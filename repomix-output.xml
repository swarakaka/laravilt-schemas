This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: **/*.log, tmp/, .js, .html, .blade.php, .css, public/, vendor/, node_modules, venv/, logs/, electorn-sentinerl/
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.github/
  ISSUE_TEMPLATE/
    bug.yml
    config.yml
  workflows/
    dependabot-auto-merge.yml
    fix-php-code-styling.yml
    publish.yml
    tests.yml
  CONTRIBUTING.md
  dependabot.yml
  FUNDING.yml
  SECURITY.md
config/
  laravilt-schemas.php
docs/
  index.md
  mcp-server.md
lang/
  ar/
    schemas.php
  en/
    schemas.php
resources/
  css/
    app.css
  js/
    components/
      ui/
        alert/
          Alert.vue
          AlertDescription.vue
          AlertTitle.vue
          index.ts
        avatar/
          Avatar.vue
          AvatarFallback.vue
          AvatarImage.vue
          index.ts
        badge/
          Badge.vue
          index.ts
        breadcrumb/
          Breadcrumb.vue
          BreadcrumbEllipsis.vue
          BreadcrumbItem.vue
          BreadcrumbLink.vue
          BreadcrumbList.vue
          BreadcrumbPage.vue
          BreadcrumbSeparator.vue
          index.ts
        button/
          Button.vue
          index.ts
        card/
          Card.vue
          CardAction.vue
          CardContent.vue
          CardDescription.vue
          CardFooter.vue
          CardHeader.vue
          CardTitle.vue
          index.ts
        checkbox/
          Checkbox.vue
          index.ts
        collapsible/
          Collapsible.vue
          CollapsibleContent.vue
          CollapsibleTrigger.vue
          index.ts
        dialog/
          Dialog.vue
          DialogClose.vue
          DialogContent.vue
          DialogDescription.vue
          DialogFooter.vue
          DialogHeader.vue
          DialogOverlay.vue
          DialogScrollContent.vue
          DialogTitle.vue
          DialogTrigger.vue
          index.ts
        dropdown-menu/
          DropdownMenu.vue
          DropdownMenuCheckboxItem.vue
          DropdownMenuContent.vue
          DropdownMenuGroup.vue
          DropdownMenuItem.vue
          DropdownMenuLabel.vue
          DropdownMenuRadioGroup.vue
          DropdownMenuRadioItem.vue
          DropdownMenuSeparator.vue
          DropdownMenuShortcut.vue
          DropdownMenuSub.vue
          DropdownMenuSubContent.vue
          DropdownMenuSubTrigger.vue
          DropdownMenuTrigger.vue
          index.ts
        input/
          index.ts
          Input.vue
        label/
          index.ts
          Label.vue
        navigation-menu/
          index.ts
          NavigationMenu.vue
          NavigationMenuContent.vue
          NavigationMenuIndicator.vue
          NavigationMenuItem.vue
          NavigationMenuLink.vue
          NavigationMenuList.vue
          NavigationMenuTrigger.vue
          NavigationMenuViewport.vue
        pin-input/
          index.ts
          PinInput.vue
          PinInputGroup.vue
          PinInputSeparator.vue
          PinInputSlot.vue
        popover/
          index.ts
          Popover.vue
          PopoverContent.vue
          PopoverTrigger.vue
        radio-group/
          index.ts
          RadioGroup.vue
          RadioGroupItem.vue
        separator/
          index.ts
          Separator.vue
        sheet/
          index.ts
          Sheet.vue
          SheetClose.vue
          SheetContent.vue
          SheetDescription.vue
          SheetFooter.vue
          SheetHeader.vue
          SheetOverlay.vue
          SheetTitle.vue
          SheetTrigger.vue
        sidebar/
          index.ts
          Sidebar.vue
          SidebarContent.vue
          SidebarFooter.vue
          SidebarGroup.vue
          SidebarGroupAction.vue
          SidebarGroupContent.vue
          SidebarGroupLabel.vue
          SidebarHeader.vue
          SidebarInput.vue
          SidebarInset.vue
          SidebarMenu.vue
          SidebarMenuAction.vue
          SidebarMenuBadge.vue
          SidebarMenuButton.vue
          SidebarMenuButtonChild.vue
          SidebarMenuItem.vue
          SidebarMenuSkeleton.vue
          SidebarMenuSub.vue
          SidebarMenuSubButton.vue
          SidebarMenuSubItem.vue
          SidebarProvider.vue
          SidebarRail.vue
          SidebarSeparator.vue
          SidebarTrigger.vue
          utils.ts
        skeleton/
          index.ts
          Skeleton.vue
        spinner/
          index.ts
          Spinner.vue
        switch/
          index.ts
          Switch.vue
        tabs/
          index.ts
          Tabs.vue
          TabsContent.vue
          TabsList.vue
          TabsTrigger.vue
        textarea/
          index.ts
          Textarea.vue
        tooltip/
          index.ts
          Tooltip.vue
          TooltipContent.vue
          TooltipProvider.vue
          TooltipTrigger.vue
        index.ts
        Tabs.vue
        TabsContent.vue
        TabsList.vue
        TabsTrigger.vue
      Grid.vue
      Schema.vue
      Section.vue
      Split.vue
      Tabs.vue
      Wizard.vue
    lib/
      utils.ts
    app.js
    app.ts
    schemas.js
  lang/
    ar/
      schemas.php
    en/
      schemas.php
  views/
    components/
      columns.blade.php
      fieldset.blade.php
      grid.blade.php
      section.blade.php
      split.blade.php
      step.blade.php
      tab.blade.php
      tabs.blade.php
      wizard.blade.php
src/
  Commands/
    InstallSchemasCommand.php
    MakeSchemaCommand.php
  Components/
    Tabs/
      Tab.php
    Columns.php
    Fieldset.php
    Grid.php
    Section.php
    Split.php
    Step.php
    Tab.php
    Tabs.php
    Wizard.php
  Concerns/
    CanBeCollapsible.php
    HasSchema.php
  Mcp/
    Tools/
      GenerateSchemaTool.php
      SearchDocsTool.php
    LaraviltSchemasServer.php
  Schema.php
  SchemasServiceProvider.php
stubs/
  schema-component.stub
  schema.stub
tests/
  Feature/
    DebugTest.php
  Unit/
    ColumnsTest.php
    FieldsetTest.php
    GridTest.php
    SchemaTest.php
    SectionTest.php
    SplitTest.php
    TabsTest.php
  Pest.php
  TestCase.php
.gitignore
.npmignore
.npmrc
CHANGELOG.md
CODE_OF_CONDUCT.md
composer.json
LICENSE.md
package.json
phpstan.neon
phpunit.xml
pint.json
README.md
testbench.yaml
vite.config.ts
vite.plugin.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".github/ISSUE_TEMPLATE/bug.yml">
name: Bug Report
description: Report a bug
title: "[Bug]: "
labels: ["bug"]
body:
  - type: markdown
    attributes:
      value: |
        Thanks for taking the time to fill out this bug report!
  - type: textarea
    id: description
    attributes:
      label: Description
      description: A clear and concise description of the bug
    validations:
      required: true
  - type: textarea
    id: steps
    attributes:
      label: Steps to Reproduce
      description: Steps to reproduce the behavior
      placeholder: |
        1. Go to '...'
        2. Click on '....'
        3. See error
    validations:
      required: true
  - type: textarea
    id: expected
    attributes:
      label: Expected Behavior
      description: What you expected to happen
    validations:
      required: true
  - type: textarea
    id: actual
    attributes:
      label: Actual Behavior
      description: What actually happened
    validations:
      required: true
  - type: input
    id: version
    attributes:
      label: Package Version
      description: What version of the package are you using?
    validations:
      required: true
  - type: input
    id: php-version
    attributes:
      label: PHP Version
      description: What version of PHP are you using?
    validations:
      required: true
  - type: input
    id: laravel-version
    attributes:
      label: Laravel Version
      description: What version of Laravel are you using?
    validations:
      required: true
</file>

<file path=".github/ISSUE_TEMPLATE/config.yml">
blank_issues_enabled: false
contact_links:
  - name: Ask a question
    url: https://github.com/laravilt/schemas/discussions/new?category=q-a
    about: Ask the community for help
  - name: Request a feature
    url: https://github.com/laravilt/schemas/discussions/new?category=ideas
    about: Share ideas for new features
</file>

<file path=".github/workflows/dependabot-auto-merge.yml">
name: Dependabot Auto-Merge

on: [push, pull_request]

permissions:
  pull-requests: write
  contents: write

jobs:
  dependabot:
    runs-on: ubuntu-latest
    if: ${{ github.actor == 'dependabot[bot]' }}
    steps:
      - name: Dependabot metadata
        id: metadata
        uses: dependabot/fetch-metadata@v2
        with:
          github-token: "${{ secrets.GITHUB_TOKEN }}"

      - name: Auto-merge Dependabot PRs for semver-minor updates
        if: ${{steps.metadata.outputs.update-type == 'version-update:semver-minor'}}
        run: gh pr merge --auto --merge "$PR_URL"
        env:
          PR_URL: ${{github.event.pull_request.html_url}}
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}

      - name: Auto-merge Dependabot PRs for semver-patch updates
        if: ${{steps.metadata.outputs.update-type == 'version-update:semver-patch'}}
        run: gh pr merge --auto --merge "$PR_URL"
        env:
          PR_URL: ${{github.event.pull_request.html_url}}
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
</file>

<file path=".github/CONTRIBUTING.md">
# Contributing to Schemas

Thank you for considering contributing to Schemas!

## Pull Requests

1. Fork the repository
2. Create a new branch for your feature
3. Write tests for your changes
4. Ensure all tests pass
5. Submit a pull request

## Coding Standards

- Follow PSR-12 coding standards
- Run `composer format` before committing
- Write tests for new features
- Ensure PHPStan passes with level 5

## Running Tests

```bash
composer test
```

## Code Style

```bash
composer format
```

## Static Analysis

```bash
composer analyse
```
</file>

<file path=".github/dependabot.yml">
version: 2
updates:
  - package-ecosystem: "composer"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10

  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
</file>

<file path=".github/FUNDING.yml">
github: fadymondy
</file>

<file path=".github/SECURITY.md">
# Security Policy

## Reporting a Vulnerability

If you discover a security vulnerability within Schemas, please send an email to info@3x1.io. All security vulnerabilities will be promptly addressed.

Please do not publicly disclose the issue until it has been addressed by the team.
</file>

<file path="config/laravilt-schemas.php">
<?php

return [
    /*
    |--------------------------------------------------------------------------
    | Plugin Settings
    |--------------------------------------------------------------------------
    |
    | Configure your plugin settings here.
    |
    */

    'enabled' => env('LARAVILT_SCHEMAS_ENABLED', true),

    // Add your configuration options here
];
</file>

<file path="docs/index.md">
# Laravilt Schemas Documentation

Complete schema system with sections, tabs, grids, and layout components for Laravilt.

## Table of Contents

1. [Getting Started](#getting-started)
2. [Architecture](#architecture)
3. [Schema Generation](#schema-generation)
4. [Layout Components](#layout-components)
5. [API Reference](#api-reference)
6. [MCP Server Integration](mcp-server.md)

## Overview

Laravilt Schemas provides a comprehensive layout system for organizing form fields and information displays:

- **Section**: Collapsible sections with headers, footers, and icons
- **Tabs**: Tabbed interfaces with multiple panels
- **Grid**: Multi-column grid layouts
- **Fieldset**: Grouped fields with legends
- **Reactive**: Dynamic visibility and state updates
- **Nested Schemas**: Support for deeply nested layouts
- **Inertia Integration**: Seamless Vue 3 integration

## Quick Start

```bash
# Generate a new schema class
php artisan make:schema ProductSchema

# Use in your forms or infolists
use App\Schemas\ProductSchema;
use Laravilt\Forms\Components\TextInput;

$schema = ProductSchema::make()
    ->schema([
        Section::make('Basic Information')
            ->schema([
                TextInput::make('name'),
                TextInput::make('sku'),
            ]),
    ]);
```

## Key Features

### ðŸ“¦ Layout Components
- **Section**: Collapsible sections with headers/footers
- **Tabs**: Tabbed content panels
- **Grid**: Multi-column layouts
- **Fieldset**: Grouped fields with legends

### ðŸŽ¨ Section Features
- Collapsible with custom state
- Icons (Lucide icons)
- Headers and descriptions
- Footers for actions
- Aside layout option
- Compact mode

### ðŸ“‘ Tab Features
- Multiple tabs
- Active tab state
- Icons and badges
- Lazy loading
- URL persistence

### ðŸ“ Grid Features
- 1-12 column layouts
- Responsive column spans
- Gap control
- Nested grids

### âš¡ Reactivity
- Conditional visibility
- Dynamic fields
- State management
- After state updated callbacks

## System Requirements

- PHP 8.3+
- Laravel 12+
- Inertia.js v2+
- Vue 3

## Installation

```bash
composer require laravilt/schemas
```

The service provider is auto-discovered and will register automatically.

## Configuration

Publish the configuration:

```bash
php artisan vendor:publish --tag=laravilt-schemas-config
```

Publish the assets:

```bash
php artisan vendor:publish --tag=laravilt-schemas-assets
```

## Basic Usage

### Section Component

```php
use Laravilt\Schemas\Components\Section;
use Laravilt\Forms\Components\TextInput;
use Laravilt\Forms\Components\Textarea;

Section::make('Product Details')
    ->description('Basic product information')
    ->icon('package')
    ->collapsible()
    ->schema([
        TextInput::make('name')
            ->label('Product Name')
            ->required(),

        TextInput::make('sku')
            ->label('SKU')
            ->required(),

        Textarea::make('description')
            ->label('Description')
            ->rows(5),
    ]);
```

### Tabs Component

```php
use Laravilt\Schemas\Components\Tabs;
use Laravilt\Schemas\Components\Tabs\Tab;

Tabs::make('product_tabs')
    ->tabs([
        Tab::make('Details')
            ->icon('info')
            ->schema([
                TextInput::make('name'),
                TextInput::make('sku'),
            ]),

        Tab::make('Pricing')
            ->icon('dollar-sign')
            ->schema([
                NumberField::make('price'),
                NumberField::make('cost'),
            ]),

        Tab::make('Inventory')
            ->icon('box')
            ->badge(fn ($record) => $record->low_stock ? 'Low Stock' : null)
            ->schema([
                NumberField::make('quantity'),
                Toggle::make('track_inventory'),
            ]),
    ]);
```

### Grid Component

```php
use Laravilt\Schemas\Components\Grid;

Grid::make()
    ->columns(2)
    ->schema([
        TextInput::make('first_name')
            ->columnSpan(1),

        TextInput::make('last_name')
            ->columnSpan(1),

        TextInput::make('email')
            ->columnSpan(2), // Full width

        TextInput::make('phone'),
        TextInput::make('company'),
    ]);
```

### Fieldset Component

```php
use Laravilt\Schemas\Components\Fieldset;

Fieldset::make('Shipping Address')
    ->schema([
        TextInput::make('shipping_address_line1')
            ->label('Address Line 1'),

        TextInput::make('shipping_city')
            ->label('City'),

        Select::make('shipping_country')
            ->label('Country')
            ->options([...]),
    ]);
```

## Advanced Features

### Collapsible Sections

```php
Section::make('Advanced Options')
    ->description('Additional configuration options')
    ->collapsible()
    ->collapsed() // Collapsed by default
    ->persistCollapsed() // Remember collapsed state
    ->schema([
        // Fields...
    ]);
```

### Aside Layout

```php
Section::make('Quick Actions')
    ->aside()
    ->description('Commonly used actions')
    ->schema([
        Action::make('save_draft'),
        Action::make('preview'),
        Action::make('publish'),
    ]);
```

### Conditional Visibility

```php
use Laravilt\Support\Utilities\Get;

Section::make('Shipping Details')
    ->visible(fn (Get $get) => $get('requires_shipping') === true)
    ->schema([
        TextInput::make('shipping_weight'),
        TextInput::make('shipping_dimensions'),
    ]);
```

### Nested Layouts

```php
Section::make('Product Information')
    ->schema([
        Grid::make()
            ->columns(2)
            ->schema([
                TextInput::make('name'),
                TextInput::make('sku'),
            ]),

        Tabs::make('details_tabs')
            ->tabs([
                Tab::make('Description')
                    ->schema([
                        RichEditor::make('description'),
                    ]),

                Tab::make('Specifications')
                    ->schema([
                        KeyValue::make('specifications'),
                    ]),
            ]),
    ]);
```

## Section Options

### Header and Footer

```php
Section::make('User Profile')
    ->description('Manage user profile information')
    ->icon('user')
    ->headerActions([
        Action::make('reset')
            ->label('Reset')
            ->icon('rotate-ccw'),
    ])
    ->footerActions([
        Action::make('save')
            ->label('Save Changes')
            ->icon('check'),
    ])
    ->schema([
        // Fields...
    ]);
```

### Compact Mode

```php
Section::make('Quick Info')
    ->compact()
    ->schema([
        TextEntry::make('status'),
        TextEntry::make('created_at'),
    ]);
```

## Tabs Options

### Tab Icons and Badges

```php
Tab::make('Orders')
    ->icon('shopping-cart')
    ->badge(fn ($record) => $record->orders_count)
    ->badgeColor('primary')
    ->schema([
        // Order fields...
    ]);
```

### Tab State Persistence

```php
Tabs::make('settings_tabs')
    ->persistTabInQueryString() // Save active tab in URL
    ->tabs([
        Tab::make('General'),
        Tab::make('Security'),
        Tab::make('Notifications'),
    ]);
```

## Grid Options

### Responsive Columns

```php
Grid::make()
    ->columns([
        'default' => 1,
        'sm' => 2,
        'lg' => 3,
        'xl' => 4,
    ])
    ->schema([
        // Fields with automatic responsive behavior
    ]);
```

### Custom Column Spans

```php
Grid::make()
    ->columns(12)
    ->schema([
        TextInput::make('title')
            ->columnSpan(8),

        Select::make('status')
            ->columnSpan(4),

        Textarea::make('content')
            ->columnSpan(12), // Full width
    ]);
```

## Generator Command

```bash
# Generate a schema class
php artisan make:schema ProductSchema

# Force overwrite existing file
php artisan make:schema ProductSchema --force
```

## Best Practices

1. **Use Sections for Organization**: Group related fields in sections
2. **Add Icons**: Use meaningful icons for better visual hierarchy
3. **Provide Descriptions**: Help users understand section purposes
4. **Use Tabs Sparingly**: Don't hide important information in tabs
5. **Responsive Grids**: Use responsive column configurations
6. **Collapsible Sections**: Make advanced options collapsible
7. **Meaningful Labels**: Use clear, descriptive section headings

## Examples

### Multi-Step Form Layout

```php
use Laravilt\Schemas\Components\Tabs;
use Laravilt\Schemas\Components\Tabs\Tab;
use Laravilt\Schemas\Components\Section;

Tabs::make('registration_steps')
    ->tabs([
        Tab::make('Personal Info')
            ->icon('user')
            ->schema([
                Section::make('Basic Information')
                    ->schema([
                        TextInput::make('first_name')->required(),
                        TextInput::make('last_name')->required(),
                        TextInput::make('email')->email()->required(),
                    ]),
            ]),

        Tab::make('Company')
            ->icon('building')
            ->schema([
                Section::make('Company Details')
                    ->schema([
                        TextInput::make('company_name')->required(),
                        TextInput::make('company_website'),
                        Select::make('industry')->required(),
                    ]),
            ]),

        Tab::make('Review')
            ->icon('check-circle')
            ->schema([
                Section::make('Summary')
                    ->description('Review your information before submitting')
                    ->schema([
                        // Display entered information
                    ]),
            ]),
    ]);
```

### Dashboard Layout

```php
Grid::make()
    ->columns(3)
    ->schema([
        Section::make('Quick Stats')
            ->columnSpan(2)
            ->schema([
                Grid::make()
                    ->columns(3)
                    ->schema([
                        StatsWidget::make('total_users'),
                        StatsWidget::make('total_orders'),
                        StatsWidget::make('revenue'),
                    ]),
            ]),

        Section::make('Recent Activity')
            ->columnSpan(1)
            ->aside()
            ->schema([
                // Activity list
            ]),

        Section::make('Sales Chart')
            ->columnSpan(2)
            ->schema([
                LineChartWidget::make('sales'),
            ]),

        Section::make('Top Products')
            ->columnSpan(1)
            ->schema([
                TableWidget::make('top_products'),
            ]),
    ]);
```

## Support

- GitHub Issues: github.com/laravilt/schemas
- Documentation: docs.laravilt.com
- Discord: discord.laravilt.com
</file>

<file path="docs/mcp-server.md">
# MCP Server Integration

The Laravilt Schemas package can be integrated with MCP (Model Context Protocol) server for AI agent interaction.

## Available Generator Command

### make:schema
Generate a new schema class.

**Usage:**
```bash
php artisan make:schema ProductSchema
php artisan make:schema Admin/ProductSchema
php artisan make:schema ProductSchema --force
```

**Arguments:**
- `name` (string, required): Schema class name (StudlyCase)

**Options:**
- `--force`: Overwrite existing file

**Generated Structure:**
```php
<?php

namespace App\Schemas;

use Laravilt\Schemas\Schema;
use Laravilt\Schemas\Components\Section;
use Laravilt\Schemas\Concerns\HasSchema;

class ProductSchema extends Schema
{
    use HasSchema;

    protected function setUp(): void
    {
        parent::setUp();

        $this->schema([
            Section::make('Information')
                ->description('Add your schema components here')
                ->schema([
                    // Add form fields or entries here
                ]),
        ]);
    }
}
```

## Layout Components Reference

For MCP tools to provide component information:

- **Section**: Collapsible sections with headers, footers, and icons
- **Tabs**: Tabbed content panels with icons and badges
- **Tab**: Individual tab within Tabs component
- **Grid**: Multi-column grid layouts with responsive support
- **Fieldset**: Grouped fields with legends

## Integration Example

MCP server tools should provide:

1. **list-schemas** - List all schema classes in the application
2. **schema-info** - Get details about a specific schema class
3. **generate-schema** - Generate a new schema class with specified layout
4. **list-layout-components** - List all available layout components

## Security

The MCP server runs with the same permissions as your Laravel application. Ensure:
- Proper file permissions on the app/Schemas directory
- Secure configuration of the MCP server
- Limited access to the MCP configuration file
</file>

<file path="lang/ar/schemas.php">
<?php

return [
    // Wizard Component
    'wizard' => [
        'submit_button_label' => 'Ø¥Ø±Ø³Ø§Ù„',
        'next_button_label' => 'Ø§Ù„ØªØ§Ù„ÙŠ',
        'previous_button_label' => 'Ø§Ù„Ø³Ø§Ø¨Ù‚',
        'skip_button_label' => 'ØªØ®Ø·ÙŠ',
    ],

    // Tabs Component
    'tabs' => [
        'tab_label' => 'ØªØ¨ÙˆÙŠØ¨',
    ],

    // Section Component
    'section' => [
        'expand' => 'ØªÙˆØ³ÙŠØ¹',
        'collapse' => 'Ø·ÙŠ',
    ],

    // Common
    'common' => [
        'loading' => 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
        'error' => 'Ø­Ø¯Ø« Ø®Ø·Ø£',
    ],
];
</file>

<file path="resources/js/components/ui/alert/Alert.vue">
<script setup lang="ts">
import type { HTMLAttributes } from "vue"
import type { AlertVariants } from "."
import { cn } from "@/lib/utils"
import { alertVariants } from "."

const props = defineProps<{
  class?: HTMLAttributes["class"]
  variant?: AlertVariants["variant"]
}>()
</script>

<template>
  <div
    data-slot="alert"
    :class="cn(alertVariants({ variant }), props.class)"
    role="alert"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/alert/AlertDescription.vue">
<script setup lang="ts">
import type { HTMLAttributes } from "vue"
import { cn } from "@/lib/utils"

const props = defineProps<{
  class?: HTMLAttributes["class"]
}>()
</script>

<template>
  <div
    data-slot="alert-description"
    :class="cn('text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/alert/AlertTitle.vue">
<script setup lang="ts">
import type { HTMLAttributes } from "vue"
import { cn } from "@/lib/utils"

const props = defineProps<{
  class?: HTMLAttributes["class"]
}>()
</script>

<template>
  <div
    data-slot="alert-title"
    :class="cn('col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/alert/index.ts">
import type { VariantProps } from "class-variance-authority"
import { cva } from "class-variance-authority"

export { default as Alert } from "./Alert.vue"
export { default as AlertDescription } from "./AlertDescription.vue"
export { default as AlertTitle } from "./AlertTitle.vue"

export const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
)

export type AlertVariants = VariantProps<typeof alertVariants>
</file>

<file path="resources/js/components/ui/avatar/Avatar.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { AvatarRoot } from 'reka-ui'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <AvatarRoot
    data-slot="avatar"
    :class="cn('relative flex size-8 shrink-0 overflow-hidden rounded-full', props.class)"
  >
    <slot />
  </AvatarRoot>
</template>
</file>

<file path="resources/js/components/ui/avatar/AvatarFallback.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { AvatarFallback, type AvatarFallbackProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<AvatarFallbackProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <AvatarFallback
    data-slot="avatar-fallback"
    v-bind="delegatedProps"
    :class="cn('bg-muted flex size-full items-center justify-center rounded-full', props.class)"
  >
    <slot />
  </AvatarFallback>
</template>
</file>

<file path="resources/js/components/ui/avatar/AvatarImage.vue">
<script setup lang="ts">
import type { AvatarImageProps } from 'reka-ui'
import { AvatarImage } from 'reka-ui'

const props = defineProps<AvatarImageProps>()
</script>

<template>
  <AvatarImage
    data-slot="avatar-image"
    v-bind="props"
    class="aspect-square size-full"
  >
    <slot />
  </AvatarImage>
</template>
</file>

<file path="resources/js/components/ui/avatar/index.ts">
export { default as Avatar } from './Avatar.vue'
export { default as AvatarFallback } from './AvatarFallback.vue'
export { default as AvatarImage } from './AvatarImage.vue'
</file>

<file path="resources/js/components/ui/badge/Badge.vue">
<script setup lang="ts">
import type { PrimitiveProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import type { BadgeVariants } from "."
import { reactiveOmit } from "@vueuse/core"
import { Primitive } from "reka-ui"
import { cn } from "@/lib/utils"
import { badgeVariants } from "."

const props = defineProps<PrimitiveProps & {
  variant?: BadgeVariants["variant"]
  class?: HTMLAttributes["class"]
}>()

const delegatedProps = reactiveOmit(props, "class")
</script>

<template>
  <Primitive
    data-slot="badge"
    :class="cn(badgeVariants({ variant }), props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/Breadcrumb.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <nav
    aria-label="breadcrumb"
    data-slot="breadcrumb"
    :class="props.class"
  >
    <slot />
  </nav>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbEllipsis.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { MoreHorizontal } from 'lucide-vue-next'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <span
    data-slot="breadcrumb-ellipsis"
    role="presentation"
    aria-hidden="true"
    :class="cn('flex size-9 items-center justify-center', props.class)"
  >
    <slot>
      <MoreHorizontal class="size-4" />
    </slot>
    <span class="sr-only">More</span>
  </span>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbItem.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <li
    data-slot="breadcrumb-item"
    :class="cn('inline-flex items-center gap-1.5', props.class)"
  >
    <slot />
  </li>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbLink.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive, type PrimitiveProps } from 'reka-ui'

const props = withDefaults(defineProps<PrimitiveProps & { class?: HTMLAttributes['class'] }>(), {
  as: 'a',
})
</script>

<template>
  <Primitive
    data-slot="breadcrumb-link"
    :as="as"
    :as-child="asChild"
    :class="cn('hover:text-foreground transition-colors', props.class)"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbList.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <ol
    data-slot="breadcrumb-list"
    :class="cn('text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5', props.class)"
  >
    <slot />
  </ol>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbPage.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <span
    data-slot="breadcrumb-page"
    role="link"
    aria-disabled="true"
    aria-current="page"
    :class="cn('text-foreground font-normal', props.class)"
  >
    <slot />
  </span>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/BreadcrumbSeparator.vue">
<script lang="ts" setup>
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { ChevronRight } from 'lucide-vue-next'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <li
    data-slot="breadcrumb-separator"
    role="presentation"
    aria-hidden="true"
    :class="cn('[&>svg]:size-3.5', props.class)"
  >
    <slot>
      <ChevronRight />
    </slot>
  </li>
</template>
</file>

<file path="resources/js/components/ui/breadcrumb/index.ts">
export { default as Breadcrumb } from './Breadcrumb.vue'
export { default as BreadcrumbEllipsis } from './BreadcrumbEllipsis.vue'
export { default as BreadcrumbItem } from './BreadcrumbItem.vue'
export { default as BreadcrumbLink } from './BreadcrumbLink.vue'
export { default as BreadcrumbList } from './BreadcrumbList.vue'
export { default as BreadcrumbPage } from './BreadcrumbPage.vue'
export { default as BreadcrumbSeparator } from './BreadcrumbSeparator.vue'
</file>

<file path="resources/js/components/ui/button/index.ts">
import { cva, type VariantProps } from 'class-variance-authority'

export { default as Button } from './Button.vue'

export const buttonVariants = cva(
  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*=\'size-\'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',
  {
    variants: {
      variant: {
        default:
          'bg-primary text-primary-foreground shadow-xs hover:bg-primary/90',
        destructive:
          'bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',
        outline:
          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',
        secondary:
          'bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80',
        ghost:
          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-9 px-4 py-2 has-[>svg]:px-3',
        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
        icon: 'size-9',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

export type ButtonVariants = VariantProps<typeof buttonVariants>
</file>

<file path="resources/js/components/ui/card/Card.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="card"
    :class="
      cn(
        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',
        props.class,
      )
    "
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/card/CardAction.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="card-action"
    :class="cn('col-start-2 row-span-2 row-start-1 self-start justify-self-end', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/card/CardContent.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="card-content"
    :class="cn('px-6', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/card/CardDescription.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <p
    data-slot="card-description"
    :class="cn('text-muted-foreground text-sm', props.class)"
  >
    <slot />
  </p>
</template>
</file>

<file path="resources/js/components/ui/card/CardFooter.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="card-footer"
    :class="cn('flex items-center px-6 [.border-t]:pt-6', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/card/CardHeader.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="card-header"
    :class="cn('@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/card/CardTitle.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <h3
    data-slot="card-title"
    :class="cn('leading-none font-semibold', props.class)"
  >
    <slot />
  </h3>
</template>
</file>

<file path="resources/js/components/ui/card/index.ts">
export { default as Card } from './Card.vue'
export { default as CardAction } from './CardAction.vue'
export { default as CardContent } from './CardContent.vue'
export { default as CardDescription } from './CardDescription.vue'
export { default as CardFooter } from './CardFooter.vue'
export { default as CardHeader } from './CardHeader.vue'
export { default as CardTitle } from './CardTitle.vue'
</file>

<file path="resources/js/components/ui/checkbox/index.ts">
export { default as Checkbox } from './Checkbox.vue'
</file>

<file path="resources/js/components/ui/collapsible/CollapsibleContent.vue">
<script setup lang="ts">
import { CollapsibleContent, type CollapsibleContentProps } from 'reka-ui'

const props = defineProps<CollapsibleContentProps>()
</script>

<template>
  <CollapsibleContent
    data-slot="collapsible-content"
    v-bind="props"
  >
    <slot />
  </CollapsibleContent>
</template>
</file>

<file path="resources/js/components/ui/collapsible/CollapsibleTrigger.vue">
<script setup lang="ts">
import { CollapsibleTrigger, type CollapsibleTriggerProps } from 'reka-ui'

const props = defineProps<CollapsibleTriggerProps>()
</script>

<template>
  <CollapsibleTrigger
    data-slot="collapsible-trigger"
    v-bind="props"
  >
    <slot />
  </CollapsibleTrigger>
</template>
</file>

<file path="resources/js/components/ui/collapsible/index.ts">
export { default as Collapsible } from './Collapsible.vue'
export { default as CollapsibleContent } from './CollapsibleContent.vue'
export { default as CollapsibleTrigger } from './CollapsibleTrigger.vue'
</file>

<file path="resources/js/components/ui/dialog/DialogClose.vue">
<script setup lang="ts">
import { DialogClose, type DialogCloseProps } from 'reka-ui'

const props = defineProps<DialogCloseProps>()
</script>

<template>
  <DialogClose
    data-slot="dialog-close"
    v-bind="props"
  >
    <slot />
  </DialogClose>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogContent.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { X } from 'lucide-vue-next'
import {
  DialogClose,
  DialogContent,
  type DialogContentEmits,
  type DialogContentProps,
  DialogPortal,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'
import DialogOverlay from './DialogOverlay.vue'

const props = defineProps<DialogContentProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<DialogContentEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DialogPortal>
    <DialogOverlay />
    <DialogContent
      data-slot="dialog-content"
      v-bind="forwarded"
      :class="
        cn(
          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',
          props.class,
        )"
    >
      <slot />

      <DialogClose
        class="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
      >
        <X />
        <span class="sr-only">Close</span>
      </DialogClose>
    </DialogContent>
  </DialogPortal>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogDescription.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogDescription, type DialogDescriptionProps, useForwardProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogDescriptionProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <DialogDescription
    data-slot="dialog-description"
    v-bind="forwardedProps"
    :class="cn('text-muted-foreground text-sm', props.class)"
  >
    <slot />
  </DialogDescription>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogFooter.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{ class?: HTMLAttributes['class'] }>()
</script>

<template>
  <div
    data-slot="dialog-footer"
    :class="cn('flex flex-col-reverse gap-2 sm:flex-row sm:justify-end', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogHeader.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="dialog-header"
    :class="cn('flex flex-col gap-2 text-center sm:text-left', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogOverlay.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogOverlay, type DialogOverlayProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogOverlayProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <DialogOverlay
    data-slot="dialog-overlay"
    v-bind="delegatedProps"
    :class="cn('data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80', props.class)"
  >
    <slot />
  </DialogOverlay>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogScrollContent.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { X } from 'lucide-vue-next'
import {
  DialogClose,
  DialogContent,
  type DialogContentEmits,
  type DialogContentProps,
  DialogOverlay,
  DialogPortal,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogContentProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<DialogContentEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DialogPortal>
    <DialogOverlay
      class="fixed inset-0 z-50 grid place-items-center overflow-y-auto bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"
    >
      <DialogContent
        :class="
          cn(
            'relative z-50 grid w-full max-w-lg my-8 gap-4 border border-border bg-background p-6 shadow-lg duration-200 sm:rounded-lg md:w-full',
            props.class,
          )
        "
        v-bind="forwarded"
        @pointer-down-outside="(event) => {
          const originalEvent = event.detail.originalEvent;
          const target = originalEvent.target as HTMLElement;
          if (originalEvent.offsetX > target.clientWidth || originalEvent.offsetY > target.clientHeight) {
            event.preventDefault();
          }
        }"
      >
        <slot />

        <DialogClose
          class="absolute top-4 right-4 p-0.5 transition-colors rounded-md hover:bg-secondary"
        >
          <X class="w-4 h-4" />
          <span class="sr-only">Close</span>
        </DialogClose>
      </DialogContent>
    </DialogOverlay>
  </DialogPortal>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogTitle.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogTitle, type DialogTitleProps, useForwardProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogTitleProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <DialogTitle
    data-slot="dialog-title"
    v-bind="forwardedProps"
    :class="cn('text-lg leading-none font-semibold', props.class)"
  >
    <slot />
  </DialogTitle>
</template>
</file>

<file path="resources/js/components/ui/dialog/DialogTrigger.vue">
<script setup lang="ts">
import { DialogTrigger, type DialogTriggerProps } from 'reka-ui'

const props = defineProps<DialogTriggerProps>()
</script>

<template>
  <DialogTrigger
    data-slot="dialog-trigger"
    v-bind="props"
  >
    <slot />
  </DialogTrigger>
</template>
</file>

<file path="resources/js/components/ui/dialog/index.ts">
export { default as Dialog } from './Dialog.vue'
export { default as DialogClose } from './DialogClose.vue'
export { default as DialogContent } from './DialogContent.vue'
export { default as DialogDescription } from './DialogDescription.vue'
export { default as DialogFooter } from './DialogFooter.vue'
export { default as DialogHeader } from './DialogHeader.vue'
export { default as DialogOverlay } from './DialogOverlay.vue'
export { default as DialogScrollContent } from './DialogScrollContent.vue'
export { default as DialogTitle } from './DialogTitle.vue'
export { default as DialogTrigger } from './DialogTrigger.vue'
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuCheckboxItem.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { Check } from 'lucide-vue-next'
import {
  DropdownMenuCheckboxItem,
  type DropdownMenuCheckboxItemEmits,
  type DropdownMenuCheckboxItemProps,
  DropdownMenuItemIndicator,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DropdownMenuCheckboxItemProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<DropdownMenuCheckboxItemEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DropdownMenuCheckboxItem
    data-slot="dropdown-menu-checkbox-item"
    v-bind="forwarded"
    :class=" cn(
      `focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,
      props.class,
    )"
  >
    <span class="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
      <DropdownMenuItemIndicator>
        <Check class="size-4" />
      </DropdownMenuItemIndicator>
    </span>
    <slot />
  </DropdownMenuCheckboxItem>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuContent.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import {
  DropdownMenuContent,
  type DropdownMenuContentEmits,
  type DropdownMenuContentProps,
  DropdownMenuPortal,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = withDefaults(
  defineProps<DropdownMenuContentProps & { class?: HTMLAttributes['class'] }>(),
  {
    sideOffset: 4,
  },
)
const emits = defineEmits<DropdownMenuContentEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DropdownMenuPortal>
    <DropdownMenuContent
      data-slot="dropdown-menu-content"
      v-bind="forwarded"
      :class="cn('bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md', props.class)"
    >
      <slot />
    </DropdownMenuContent>
  </DropdownMenuPortal>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuGroup.vue">
<script setup lang="ts">
import { DropdownMenuGroup, type DropdownMenuGroupProps } from 'reka-ui'

const props = defineProps<DropdownMenuGroupProps>()
</script>

<template>
  <DropdownMenuGroup
    data-slot="dropdown-menu-group"
    v-bind="props"
  >
    <slot />
  </DropdownMenuGroup>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuItem.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { DropdownMenuItem, type DropdownMenuItemProps, useForwardProps } from 'reka-ui'

const props = withDefaults(defineProps<DropdownMenuItemProps & {
  class?: HTMLAttributes['class']
  inset?: boolean
  variant?: 'default' | 'destructive'
}>(), {
  variant: 'default',
})

const delegatedProps = reactiveOmit(props, 'inset', 'variant')

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <DropdownMenuItem
    data-slot="dropdown-menu-item"
    :data-inset="inset ? '' : undefined"
    :data-variant="variant"
    v-bind="forwardedProps"
    :class="cn(`focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`, props.class)"
  >
    <slot />
  </DropdownMenuItem>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuLabel.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { DropdownMenuLabel, type DropdownMenuLabelProps, useForwardProps } from 'reka-ui'

const props = defineProps<DropdownMenuLabelProps & { class?: HTMLAttributes['class'], inset?: boolean }>()

const delegatedProps = reactiveOmit(props, 'class', 'inset')
const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <DropdownMenuLabel
    data-slot="dropdown-menu-label"
    :data-inset="inset ? '' : undefined"
    v-bind="forwardedProps"
    :class="cn('px-2 py-1.5 text-sm font-medium data-[inset]:pl-8', props.class)"
  >
    <slot />
  </DropdownMenuLabel>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuRadioGroup.vue">
<script setup lang="ts">
import {
  DropdownMenuRadioGroup,
  type DropdownMenuRadioGroupEmits,
  type DropdownMenuRadioGroupProps,
  useForwardPropsEmits,
} from 'reka-ui'

const props = defineProps<DropdownMenuRadioGroupProps>()
const emits = defineEmits<DropdownMenuRadioGroupEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <DropdownMenuRadioGroup
    data-slot="dropdown-menu-radio-group"
    v-bind="forwarded"
  >
    <slot />
  </DropdownMenuRadioGroup>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuRadioItem.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { Circle } from 'lucide-vue-next'
import {
  DropdownMenuItemIndicator,
  DropdownMenuRadioItem,
  type DropdownMenuRadioItemEmits,
  type DropdownMenuRadioItemProps,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DropdownMenuRadioItemProps & { class?: HTMLAttributes['class'] }>()

const emits = defineEmits<DropdownMenuRadioItemEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DropdownMenuRadioItem
    data-slot="dropdown-menu-radio-item"
    v-bind="forwarded"
    :class="cn(
      `focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,
      props.class,
    )"
  >
    <span class="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
      <DropdownMenuItemIndicator>
        <Circle class="size-2 fill-current" />
      </DropdownMenuItemIndicator>
    </span>
    <slot />
  </DropdownMenuRadioItem>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuSeparator.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import {
  DropdownMenuSeparator,
  type DropdownMenuSeparatorProps,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DropdownMenuSeparatorProps & {
  class?: HTMLAttributes['class']
}>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <DropdownMenuSeparator
    data-slot="dropdown-menu-separator"
    v-bind="delegatedProps"
    :class="cn('bg-border -mx-1 my-1 h-px', props.class)"
  />
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuShortcut.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <span
    data-slot="dropdown-menu-shortcut"
    :class="cn('text-muted-foreground ml-auto text-xs tracking-widest', props.class)"
  >
    <slot />
  </span>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuSub.vue">
<script setup lang="ts">
import {
  DropdownMenuSub,
  type DropdownMenuSubEmits,
  type DropdownMenuSubProps,
  useForwardPropsEmits,
} from 'reka-ui'

const props = defineProps<DropdownMenuSubProps>()
const emits = defineEmits<DropdownMenuSubEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <DropdownMenuSub data-slot="dropdown-menu-sub" v-bind="forwarded">
    <slot />
  </DropdownMenuSub>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuSubContent.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import {
  DropdownMenuSubContent,
  type DropdownMenuSubContentEmits,
  type DropdownMenuSubContentProps,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DropdownMenuSubContentProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<DropdownMenuSubContentEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DropdownMenuSubContent
    data-slot="dropdown-menu-sub-content"
    v-bind="forwarded"
    :class="cn('bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg', props.class)"
  >
    <slot />
  </DropdownMenuSubContent>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuSubTrigger.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { ChevronRight } from 'lucide-vue-next'
import {
  DropdownMenuSubTrigger,
  type DropdownMenuSubTriggerProps,
  useForwardProps,
} from 'reka-ui'

const props = defineProps<DropdownMenuSubTriggerProps & { class?: HTMLAttributes['class'], inset?: boolean }>()

const delegatedProps = reactiveOmit(props, 'class', 'inset')
const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <DropdownMenuSubTrigger
    data-slot="dropdown-menu-sub-trigger"
    v-bind="forwardedProps"
    :class="cn(
      'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8',
      props.class,
    )"
  >
    <slot />
    <ChevronRight class="ml-auto size-4" />
  </DropdownMenuSubTrigger>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenuTrigger.vue">
<script setup lang="ts">
import { DropdownMenuTrigger, type DropdownMenuTriggerProps, useForwardProps } from 'reka-ui'

const props = defineProps<DropdownMenuTriggerProps>()

const forwardedProps = useForwardProps(props)
</script>

<template>
  <DropdownMenuTrigger
    data-slot="dropdown-menu-trigger"
    v-bind="forwardedProps"
  >
    <slot />
  </DropdownMenuTrigger>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/index.ts">
export { default as DropdownMenu } from './DropdownMenu.vue'

export { default as DropdownMenuCheckboxItem } from './DropdownMenuCheckboxItem.vue'
export { default as DropdownMenuContent } from './DropdownMenuContent.vue'
export { default as DropdownMenuGroup } from './DropdownMenuGroup.vue'
export { default as DropdownMenuItem } from './DropdownMenuItem.vue'
export { default as DropdownMenuLabel } from './DropdownMenuLabel.vue'
export { default as DropdownMenuRadioGroup } from './DropdownMenuRadioGroup.vue'
export { default as DropdownMenuRadioItem } from './DropdownMenuRadioItem.vue'
export { default as DropdownMenuSeparator } from './DropdownMenuSeparator.vue'
export { default as DropdownMenuShortcut } from './DropdownMenuShortcut.vue'
export { default as DropdownMenuSub } from './DropdownMenuSub.vue'
export { default as DropdownMenuSubContent } from './DropdownMenuSubContent.vue'
export { default as DropdownMenuSubTrigger } from './DropdownMenuSubTrigger.vue'
export { default as DropdownMenuTrigger } from './DropdownMenuTrigger.vue'
export { DropdownMenuPortal } from 'reka-ui'
</file>

<file path="resources/js/components/ui/input/index.ts">
export { default as Input } from './Input.vue'
</file>

<file path="resources/js/components/ui/input/Input.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { useVModel } from '@vueuse/core'

const props = defineProps<{
  defaultValue?: string | number
  modelValue?: string | number
  class?: HTMLAttributes['class']
}>()

const emits = defineEmits<{
  (e: 'update:modelValue', payload: string | number): void
}>()

const modelValue = useVModel(props, 'modelValue', emits, {
  passive: true,
  defaultValue: props.defaultValue,
})
</script>

<template>
  <input
    v-model="modelValue"
    data-slot="input"
    :class="cn(
      'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
      'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',
      'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',
      props.class,
    )"
  >
</template>
</file>

<file path="resources/js/components/ui/label/index.ts">
export { default as Label } from './Label.vue'
</file>

<file path="resources/js/components/ui/label/Label.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { Label, type LabelProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<LabelProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <Label
    data-slot="label"
    v-bind="delegatedProps"
    :class="
      cn(
        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',
        props.class,
      )
    "
  >
    <slot />
  </Label>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/index.ts">
import { cva } from 'class-variance-authority'

export { default as NavigationMenu } from './NavigationMenu.vue'
export { default as NavigationMenuContent } from './NavigationMenuContent.vue'
export { default as NavigationMenuIndicator } from './NavigationMenuIndicator.vue'
export { default as NavigationMenuItem } from './NavigationMenuItem.vue'
export { default as NavigationMenuLink } from './NavigationMenuLink.vue'
export { default as NavigationMenuList } from './NavigationMenuList.vue'
export { default as NavigationMenuTrigger } from './NavigationMenuTrigger.vue'
export { default as NavigationMenuViewport } from './NavigationMenuViewport.vue'

export const navigationMenuTriggerStyle = cva(
  'group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1',
)
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuContent.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import {
  NavigationMenuContent,
  type NavigationMenuContentEmits,
  type NavigationMenuContentProps,
  useForwardPropsEmits,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<NavigationMenuContentProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<NavigationMenuContentEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <NavigationMenuContent
    data-slot="navigation-menu-content"
    v-bind="forwarded"
    :class="cn(
      `data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto`,
      `group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none`,
      props.class,
    )"
  >
    <slot />
  </NavigationMenuContent>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuIndicator.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { NavigationMenuIndicator, type NavigationMenuIndicatorProps, useForwardProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<NavigationMenuIndicatorProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <NavigationMenuIndicator
    data-slot="navigation-menu-indicator"
    v-bind="forwardedProps"
    :class="cn('data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden', props.class)"
  >
    <div class="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
  </NavigationMenuIndicator>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuItem.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { NavigationMenuItem, type NavigationMenuItemProps } from 'reka-ui'

const props = defineProps<NavigationMenuItemProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = reactiveOmit(props, 'class')
</script>

<template>
  <NavigationMenuItem
    data-slot="navigation-menu-item"
    v-bind="delegatedProps"
    :class="cn('relative', props.class)"
  >
    <slot />
  </NavigationMenuItem>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuLink.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import {
  NavigationMenuLink,
  type NavigationMenuLinkEmits,
  type NavigationMenuLinkProps,
  useForwardPropsEmits,
} from 'reka-ui'

const props = defineProps<NavigationMenuLinkProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits<NavigationMenuLinkEmits>()

const delegatedProps = reactiveOmit(props, 'class')
const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <NavigationMenuLink
    data-slot="navigation-menu-link"
    v-bind="forwarded"
    :class="cn(`'data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4'`, props.class)"
  >
    <slot />
  </NavigationMenuLink>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuList.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { NavigationMenuList, type NavigationMenuListProps, useForwardProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<NavigationMenuListProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <NavigationMenuList
    data-slot="navigation-menu-list"
    v-bind="forwardedProps"
    :class="
      cn(
        'group flex flex-1 list-none items-center justify-center gap-1',
        props.class,
      )
    "
  >
    <slot />
  </NavigationMenuList>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuTrigger.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { ChevronDown } from 'lucide-vue-next'
import {
  NavigationMenuTrigger,
  type NavigationMenuTriggerProps,
  useForwardProps,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'
import { navigationMenuTriggerStyle } from '.'

const props = defineProps<NavigationMenuTriggerProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <NavigationMenuTrigger
    data-slot="navigation-menu-trigger"
    v-bind="forwardedProps"
    :class="cn(navigationMenuTriggerStyle(), 'group', props.class)"
  >
    <slot />
    <ChevronDown
      class="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuTrigger>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenuViewport.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import {
  NavigationMenuViewport,
  type NavigationMenuViewportProps,
  useForwardProps,
} from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<NavigationMenuViewportProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <div class="absolute top-full left-0 isolate z-50 flex justify-center">
    <NavigationMenuViewport
      data-slot="navigation-menu-viewport"
      v-bind="forwardedProps"
      :class="
        cn(
          'origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--reka-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--reka-navigation-menu-viewport-width)]',
          props.class,
        )
      "
    />
  </div>
</template>
</file>

<file path="resources/js/components/ui/pin-input/index.ts">
export { default as PinInput } from "./PinInput.vue"
export { default as PinInputGroup } from "./PinInputGroup.vue"
export { default as PinInputSeparator } from "./PinInputSeparator.vue"
export { default as PinInputSlot } from "./PinInputSlot.vue"
</file>

<file path="resources/js/components/ui/pin-input/PinInputGroup.vue">
<script setup lang="ts">
import type { PrimitiveProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { Primitive, useForwardProps } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<PrimitiveProps & { class?: HTMLAttributes["class"] }>()
const delegatedProps = reactiveOmit(props, "class")
const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <Primitive
    data-slot="pin-input-group"
    v-bind="forwardedProps"
    :class="cn('flex items-center', props.class)"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/pin-input/PinInputSeparator.vue">
<script setup lang="ts">
import type { PrimitiveProps } from "reka-ui"
import { Minus } from "lucide-vue-next"
import { Primitive, useForwardProps } from "reka-ui"

const props = defineProps<PrimitiveProps>()
const forwardedProps = useForwardProps(props)
</script>

<template>
  <Primitive
    data-slot="pin-input-separator"
    v-bind="forwardedProps"
  >
    <slot>
      <Minus />
    </slot>
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/popover/index.ts">
export { default as Popover } from "./Popover.vue"
export { default as PopoverContent } from "./PopoverContent.vue"
export { default as PopoverTrigger } from "./PopoverTrigger.vue"
</file>

<file path="resources/js/components/ui/popover/PopoverContent.vue">
<script setup lang="ts">
import type { PopoverContentEmits, PopoverContentProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import {
  PopoverContent,
  PopoverPortal,
  useForwardPropsEmits,
} from "reka-ui"
import { cn } from "@/lib/utils"

defineOptions({
  inheritAttrs: false,
})

const props = withDefaults(
  defineProps<PopoverContentProps & { class?: HTMLAttributes["class"] }>(),
  {
    align: "center",
    sideOffset: 4,
  },
)
const emits = defineEmits<PopoverContentEmits>()

const delegatedProps = reactiveOmit(props, "class")

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <PopoverPortal>
    <PopoverContent
      v-bind="{ ...forwarded, ...$attrs }"
      :class="
        cn(
          'z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
          props.class,
        )
      "
    >
      <slot />
    </PopoverContent>
  </PopoverPortal>
</template>
</file>

<file path="resources/js/components/ui/popover/PopoverTrigger.vue">
<script setup lang="ts">
import type { PopoverTriggerProps } from "reka-ui"
import { PopoverTrigger } from "reka-ui"

const props = defineProps<PopoverTriggerProps>()
</script>

<template>
  <PopoverTrigger v-bind="props">
    <slot />
  </PopoverTrigger>
</template>
</file>

<file path="resources/js/components/ui/radio-group/index.ts">
export { default as RadioGroup } from "./RadioGroup.vue"
export { default as RadioGroupItem } from "./RadioGroupItem.vue"
</file>

<file path="resources/js/components/ui/radio-group/RadioGroupItem.vue">
<script setup lang="ts">
import type { RadioGroupItemProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { Circle } from "lucide-vue-next"
import {
  RadioGroupIndicator,
  RadioGroupItem,
  useForwardProps,
} from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<RadioGroupItemProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <RadioGroupItem
    v-bind="forwardedProps"
    :class="
      cn(
        'peer aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',
        props.class,
      )
    "
  >
    <RadioGroupIndicator
      class="flex items-center justify-center"
    >
      <Circle class="h-2.5 w-2.5 fill-current text-current" />
    </RadioGroupIndicator>
  </RadioGroupItem>
</template>
</file>

<file path="resources/js/components/ui/separator/index.ts">
export { default as Separator } from './Separator.vue'
</file>

<file path="resources/js/components/ui/separator/Separator.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { Separator, type SeparatorProps } from 'reka-ui'

const props = withDefaults(defineProps<
  SeparatorProps & { class?: HTMLAttributes['class'] }
>(), {
  orientation: 'horizontal',
  decorative: true,
})

const delegatedProps = reactiveOmit(props, 'class')
</script>

<template>
  <Separator
    data-slot="separator-root"
    v-bind="delegatedProps"
    :class="
      cn(
        `bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px`,
        props.class,
      )
    "
  />
</template>
</file>

<file path="resources/js/components/ui/sheet/index.ts">
export { default as Sheet } from './Sheet.vue'
export { default as SheetClose } from './SheetClose.vue'
export { default as SheetContent } from './SheetContent.vue'
export { default as SheetDescription } from './SheetDescription.vue'
export { default as SheetFooter } from './SheetFooter.vue'
export { default as SheetHeader } from './SheetHeader.vue'
export { default as SheetTitle } from './SheetTitle.vue'
export { default as SheetTrigger } from './SheetTrigger.vue'
</file>

<file path="resources/js/components/ui/sheet/SheetClose.vue">
<script setup lang="ts">
import { DialogClose, type DialogCloseProps } from 'reka-ui'

const props = defineProps<DialogCloseProps>()
</script>

<template>
  <DialogClose
    data-slot="sheet-close"
    v-bind="props"
  >
    <slot />
  </DialogClose>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetDescription.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogDescription, type DialogDescriptionProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogDescriptionProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <DialogDescription
    data-slot="sheet-description"
    :class="cn('text-muted-foreground text-sm', props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </DialogDescription>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetFooter.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{ class?: HTMLAttributes['class'] }>()
</script>

<template>
  <div
    data-slot="sheet-footer"
    :class="cn('mt-auto flex flex-col gap-2 p-4', props.class)
    "
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetHeader.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{ class?: HTMLAttributes['class'] }>()
</script>

<template>
  <div
    data-slot="sheet-header"
    :class="cn('flex flex-col gap-1.5 p-4', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetOverlay.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogOverlay, type DialogOverlayProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogOverlayProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <DialogOverlay
    data-slot="sheet-overlay"
    :class="cn('data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80', props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </DialogOverlay>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetTitle.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { DialogTitle, type DialogTitleProps } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<DialogTitleProps & { class?: HTMLAttributes['class'] }>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})
</script>

<template>
  <DialogTitle
    data-slot="sheet-title"
    :class="cn('text-foreground font-semibold', props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </DialogTitle>
</template>
</file>

<file path="resources/js/components/ui/sheet/SheetTrigger.vue">
<script setup lang="ts">
import { DialogTrigger, type DialogTriggerProps } from 'reka-ui'

const props = defineProps<DialogTriggerProps>()
</script>

<template>
  <DialogTrigger
    data-slot="sheet-trigger"
    v-bind="props"
  >
    <slot />
  </DialogTrigger>
</template>
</file>

<file path="resources/js/components/ui/sidebar/index.ts">
import type { VariantProps } from 'class-variance-authority'
import type { HTMLAttributes } from 'vue'
import { cva } from 'class-variance-authority'

export interface SidebarProps {
  side?: 'left' | 'right'
  variant?: 'sidebar' | 'floating' | 'inset'
  collapsible?: 'offcanvas' | 'icon' | 'none'
  class?: HTMLAttributes['class']
}

export { default as Sidebar } from './Sidebar.vue'
export { default as SidebarContent } from './SidebarContent.vue'
export { default as SidebarFooter } from './SidebarFooter.vue'
export { default as SidebarGroup } from './SidebarGroup.vue'
export { default as SidebarGroupAction } from './SidebarGroupAction.vue'
export { default as SidebarGroupContent } from './SidebarGroupContent.vue'
export { default as SidebarGroupLabel } from './SidebarGroupLabel.vue'
export { default as SidebarHeader } from './SidebarHeader.vue'
export { default as SidebarInput } from './SidebarInput.vue'
export { default as SidebarInset } from './SidebarInset.vue'
export { default as SidebarMenu } from './SidebarMenu.vue'
export { default as SidebarMenuAction } from './SidebarMenuAction.vue'
export { default as SidebarMenuBadge } from './SidebarMenuBadge.vue'
export { default as SidebarMenuButton } from './SidebarMenuButton.vue'
export { default as SidebarMenuItem } from './SidebarMenuItem.vue'
export { default as SidebarMenuSkeleton } from './SidebarMenuSkeleton.vue'
export { default as SidebarMenuSub } from './SidebarMenuSub.vue'
export { default as SidebarMenuSubButton } from './SidebarMenuSubButton.vue'
export { default as SidebarMenuSubItem } from './SidebarMenuSubItem.vue'
export { default as SidebarProvider } from './SidebarProvider.vue'
export { default as SidebarRail } from './SidebarRail.vue'
export { default as SidebarSeparator } from './SidebarSeparator.vue'
export { default as SidebarTrigger } from './SidebarTrigger.vue'

export { useSidebar } from './utils'

export const sidebarMenuButtonVariants = cva(
  'peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:pr-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'hover:bg-sidebar-accent hover:text-sidebar-accent-foreground',
        outline:
          'bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',
      },
      size: {
        default: 'h-8 text-sm',
        sm: 'h-7 text-xs',
        lg: 'h-12 text-sm group-data-[collapsible=icon]:p-0!',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

export type SidebarMenuButtonVariants = VariantProps<typeof sidebarMenuButtonVariants>
</file>

<file path="resources/js/components/ui/sidebar/Sidebar.vue">
<script setup lang="ts">
import type { SidebarProps } from '.'
import { cn } from '@/lib/utils'
import { Sheet, SheetContent } from '@/components/ui/sheet'
import SheetDescription from '@/components/ui/sheet/SheetDescription.vue'
import SheetHeader from '@/components/ui/sheet/SheetHeader.vue'
import SheetTitle from '@/components/ui/sheet/SheetTitle.vue'
import { SIDEBAR_WIDTH_MOBILE, useSidebar } from './utils'

defineOptions({
  inheritAttrs: false,
})

const props = withDefaults(defineProps<SidebarProps>(), {
  side: 'left',
  variant: 'sidebar',
  collapsible: 'offcanvas',
})

const { isMobile, state, openMobile, setOpenMobile } = useSidebar()
</script>

<template>
  <div
    v-if="collapsible === 'none'"
    data-slot="sidebar"
    :class="cn('bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col', props.class)"
    v-bind="$attrs"
  >
    <slot />
  </div>

  <Sheet v-else-if="isMobile" :open="openMobile" v-bind="$attrs" @update:open="setOpenMobile">
    <SheetContent
      data-sidebar="sidebar"
      data-slot="sidebar"
      data-mobile="true"
      :side="side"
      class="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
      :style="{
        '--sidebar-width': SIDEBAR_WIDTH_MOBILE,
      }"
    >
      <SheetHeader class="sr-only">
        <SheetTitle>Sidebar</SheetTitle>
        <SheetDescription>Displays the mobile sidebar.</SheetDescription>
      </SheetHeader>
      <div class="flex h-full w-full flex-col">
        <slot />
      </div>
    </SheetContent>
  </Sheet>

  <div
    v-else
    class="group peer text-sidebar-foreground hidden md:block"
    data-slot="sidebar"
    :data-state="state"
    :data-collapsible="state === 'collapsed' ? collapsible : ''"
    :data-variant="variant"
    :data-side="side"
  >
    <!-- This is what handles the sidebar gap on desktop  -->
    <div
      :class="cn(
        'relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear',
        'group-data-[collapsible=offcanvas]:w-0',
        'group-data-[side=right]:rotate-180',
        variant === 'floating' || variant === 'inset'
          ? 'group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]'
          : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon)',
      )"
    />
    <div
      :class="cn(
        'fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex',
        side === 'left'
          ? 'left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]'
          : 'right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]',
        // Adjust the padding for floating and inset variants.
        variant === 'floating' || variant === 'inset'
          ? 'p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]'
          : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l',
        props.class,
      )"
      v-bind="$attrs"
    >
      <div
        data-sidebar="sidebar"
        class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
      >
        <slot />
      </div>
    </div>
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarContent.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-content"
    data-sidebar="content"
    :class="cn('flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarFooter.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-footer"
    data-sidebar="footer"
    :class="cn('flex flex-col gap-2 p-2', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarGroup.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-group"
    data-sidebar="group"
    :class="cn('relative flex w-full min-w-0 flex-col p-2', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarGroupAction.vue">
<script setup lang="ts">
import type { PrimitiveProps } from 'reka-ui'
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive } from 'reka-ui'

const props = defineProps<PrimitiveProps & {
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <Primitive
    data-slot="sidebar-group-action"
    data-sidebar="group-action"
    :as="as"
    :as-child="asChild"
    :class="cn(
      'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
      'after:absolute after:-inset-2 md:after:hidden',
      'group-data-[collapsible=icon]:hidden',
      props.class,
    )"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarGroupContent.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-group-content"
    data-sidebar="group-content"
    :class="cn('w-full text-sm', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarGroupLabel.vue">
<script setup lang="ts">
import type { PrimitiveProps } from 'reka-ui'
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive } from 'reka-ui'

const props = defineProps<PrimitiveProps & {
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <Primitive
    data-slot="sidebar-group-label"
    data-sidebar="group-label"
    :as="as"
    :as-child="asChild"
    :class="cn(
      'text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
      'group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0',
      props.class)"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarHeader.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-header"
    data-sidebar="header"
    :class="cn('flex flex-col gap-2 p-2', props.class)"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarInput.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Input } from '@/components/ui/input'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <Input
    data-slot="sidebar-input"
    data-sidebar="input"
    :class="cn(
      'bg-background h-8 w-full shadow-none',
      props.class,
    )"
  >
    <slot />
  </Input>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarInset.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <main
    data-slot="sidebar-inset"
    :class="cn(
      'bg-background relative flex w-full flex-1 flex-col',
      'md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-0',
      props.class,
    )"
  >
    <slot />
  </main>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenu.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <ul
    data-slot="sidebar-menu"
    data-sidebar="menu"
    :class="cn('flex w-full min-w-0 flex-col gap-1', props.class)"
  >
    <slot />
  </ul>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuAction.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive, type PrimitiveProps } from 'reka-ui'

const props = withDefaults(defineProps<PrimitiveProps & {
  showOnHover?: boolean
  class?: HTMLAttributes['class']
}>(), {
  as: 'button',
})
</script>

<template>
  <Primitive
    data-slot="sidebar-menu-action"
    data-sidebar="menu-action"
    :class="cn(
      'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
      'after:absolute after:-inset-2 md:after:hidden',
      'peer-data-[size=sm]/menu-button:top-1',
      'peer-data-[size=default]/menu-button:top-1.5',
      'peer-data-[size=lg]/menu-button:top-2.5',
      'group-data-[collapsible=icon]:hidden',
      showOnHover
        && 'peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0',
      props.class,
    )"
    :as="as"
    :as-child="asChild"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuBadge.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <div
    data-slot="sidebar-menu-badge"
    data-sidebar="menu-badge"
    :class="cn(
      'text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none',
      'peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',
      'peer-data-[size=sm]/menu-button:top-1',
      'peer-data-[size=default]/menu-button:top-1.5',
      'peer-data-[size=lg]/menu-button:top-2.5',
      'group-data-[collapsible=icon]:hidden',
      props.class,
    )"
  >
    <slot />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuButton.vue">
<script setup lang="ts">
import { Tooltip, TooltipContent, TooltipTrigger } from '@/components/ui/tooltip'
import { type Component, computed } from 'vue'
import SidebarMenuButtonChild, { type SidebarMenuButtonProps } from './SidebarMenuButtonChild.vue'
import { useSidebar } from './utils'

defineOptions({
  inheritAttrs: false,
})

const props = withDefaults(defineProps<SidebarMenuButtonProps & {
  tooltip?: string | Component
}>(), {
  as: 'button',
  variant: 'default',
  size: 'default',
})

const { isMobile, state } = useSidebar()

const delegatedProps = computed(() => {
  const { tooltip, ...delegated } = props
  return delegated
})
</script>

<template>
  <SidebarMenuButtonChild v-if="!tooltip" v-bind="{ ...delegatedProps, ...$attrs }">
    <slot />
  </SidebarMenuButtonChild>

  <Tooltip v-else>
    <TooltipTrigger as-child>
      <SidebarMenuButtonChild v-bind="{ ...delegatedProps, ...$attrs }">
        <slot />
      </SidebarMenuButtonChild>
    </TooltipTrigger>
    <TooltipContent
      side="right"
      align="center"
      :hidden="state !== 'collapsed' || isMobile"
    >
      <template v-if="typeof tooltip === 'string'">
        {{ tooltip }}
      </template>
      <component :is="tooltip" v-else />
    </TooltipContent>
  </Tooltip>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuItem.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <li
    data-slot="sidebar-menu-item"
    data-sidebar="menu-item"
    :class="cn('group/menu-item relative', props.class)"
  >
    <slot />
  </li>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuSkeleton.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { Skeleton } from '@/components/ui/skeleton'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps<{
  showIcon?: boolean
  class?: HTMLAttributes['class']
}>()

const width = computed(() => {
  return `${Math.floor(Math.random() * 40) + 50}%`;
})
</script>

<template>
  <div
    data-slot="sidebar-menu-skeleton"
    data-sidebar="menu-skeleton"
    :class="cn('flex h-8 items-center gap-2 rounded-md px-2', props.class)"
  >
    <Skeleton
      v-if="showIcon"
      class="size-4 rounded-md"
      data-sidebar="menu-skeleton-icon"
    />

    <Skeleton
      class="h-4 max-w-(--skeleton-width) flex-1"
      data-sidebar="menu-skeleton-text"
      :style="{ '--skeleton-width': width }"
    />
  </div>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuSub.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <ul
    data-slot="sidebar-menu-sub"
    data-sidebar="menu-badge"
    :class="cn(
      'border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5',
      'group-data-[collapsible=icon]:hidden',
      props.class,
    )"
  >
    <slot />
  </ul>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuSubButton.vue">
<script setup lang="ts">
import type { PrimitiveProps } from 'reka-ui'
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive } from 'reka-ui'

const props = withDefaults(defineProps<PrimitiveProps & {
  size?: 'sm' | 'md'
  isActive?: boolean
  class?: HTMLAttributes['class']
}>(), {
  as: 'a',
  size: 'md',
})
</script>

<template>
  <Primitive
    data-slot="sidebar-menu-sub-button"
    data-sidebar="menu-sub-button"
    :as="as"
    :as-child="asChild"
    :data-size="size"
    :data-active="isActive"
    :class="cn(
      'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
      'data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground',
      size === 'sm' && 'text-xs',
      size === 'md' && 'text-sm',
      'group-data-[collapsible=icon]:hidden',
      props.class,
    )"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuSubItem.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <li
    data-slot="sidebar-menu-sub-item"
    data-sidebar="menu-sub-item"
    :class="cn('group/menu-sub-item relative', props.class)"
  >
    <slot />
  </li>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarProvider.vue">
<script setup lang="ts">
import { cn } from '@/lib/utils'
import { useEventListener, useMediaQuery, useVModel } from '@vueuse/core'
import { TooltipProvider } from 'reka-ui'
import { computed, type HTMLAttributes, type Ref, ref } from 'vue'
import { provideSidebarContext, SIDEBAR_COOKIE_MAX_AGE, SIDEBAR_COOKIE_NAME, SIDEBAR_KEYBOARD_SHORTCUT, SIDEBAR_WIDTH, SIDEBAR_WIDTH_ICON } from './utils'

const props = withDefaults(defineProps<{
  defaultOpen?: boolean
  open?: boolean
  class?: HTMLAttributes['class']
}>(), {
  defaultOpen: true,
  open: undefined,
})

const emits = defineEmits<{
  'update:open': [open: boolean]
}>()

const isMobile = useMediaQuery('(max-width: 768px)')
const openMobile = ref(false)

const open = useVModel(props, 'open', emits, {
  defaultValue: props.defaultOpen ?? false,
  passive: (props.open === undefined) as false,
}) as Ref<boolean>

function setOpen(value: boolean) {
  open.value = value // emits('update:open', value)

  // This sets the cookie to keep the sidebar state.
  document.cookie = `${SIDEBAR_COOKIE_NAME}=${open.value}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
}

function setOpenMobile(value: boolean) {
  openMobile.value = value
}

// Helper to toggle the sidebar.
function toggleSidebar() {
  return isMobile.value ? setOpenMobile(!openMobile.value) : setOpen(!open.value)
}

useEventListener('keydown', (event: KeyboardEvent) => {
  if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {
    event.preventDefault()
    toggleSidebar()
  }
})

// We add a state so that we can do data-state="expanded" or "collapsed".
// This makes it easier to style the sidebar with Tailwind classes.
const state = computed(() => open.value ? 'expanded' : 'collapsed')

provideSidebarContext({
  state,
  open,
  setOpen,
  isMobile,
  openMobile,
  setOpenMobile,
  toggleSidebar,
})
</script>

<template>
  <TooltipProvider :delay-duration="0">
    <div
      data-slot="sidebar-wrapper"
      :style="{
        '--sidebar-width': SIDEBAR_WIDTH,
        '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,
      }"
      :class="cn('group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full', props.class)"
      v-bind="$attrs"
    >
      <slot />
    </div>
  </TooltipProvider>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarRail.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { useSidebar } from './utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()

const { toggleSidebar } = useSidebar()
</script>

<template>
  <button
    data-sidebar="rail"
    data-slot="sidebar-rail"
    aria-label="Toggle Sidebar"
    :tabindex="-1"
    title="Toggle Sidebar"
    :class="cn(
      'hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex',
      'in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize',
      '[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize',
      'hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full',
      '[[data-side=left][data-collapsible=offcanvas]_&]:-right-2',
      '[[data-side=right][data-collapsible=offcanvas]_&]:-left-2',
      props.class,
    )"
    @click="toggleSidebar"
  >
    <slot />
  </button>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarSeparator.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Separator } from '@/components/ui/separator'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()
</script>

<template>
  <Separator
    data-slot="sidebar-separator"
    data-sidebar="separator"
    :class="cn('bg-sidebar-border mx-2 w-auto', props.class)"
  >
    <slot />
  </Separator>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarTrigger.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Button } from '@/components/ui/button'
import { PanelLeft } from 'lucide-vue-next'
import { useSidebar } from './utils'

const props = defineProps<{
  class?: HTMLAttributes['class']
}>()

const { toggleSidebar } = useSidebar()
</script>

<template>
  <Button
    data-sidebar="trigger"
    data-slot="sidebar-trigger"
    variant="ghost"
    size="icon"
    :class="cn('h-7 w-7', props.class)"
    @click="toggleSidebar"
  >
    <PanelLeft />
    <span class="sr-only">Toggle Sidebar</span>
  </Button>
</template>
</file>

<file path="resources/js/components/ui/sidebar/utils.ts">
import type { ComputedRef, Ref } from 'vue'
import { createContext } from 'reka-ui'

export const SIDEBAR_COOKIE_NAME = 'sidebar_state'
export const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
export const SIDEBAR_WIDTH = '16rem'
export const SIDEBAR_WIDTH_MOBILE = '18rem'
export const SIDEBAR_WIDTH_ICON = '3rem'
export const SIDEBAR_KEYBOARD_SHORTCUT = 'b'

export const [useSidebar, provideSidebarContext] = createContext<{
  state: ComputedRef<'expanded' | 'collapsed'>
  open: Ref<boolean>
  setOpen: (value: boolean) => void
  isMobile: Ref<boolean>
  openMobile: Ref<boolean>
  setOpenMobile: (value: boolean) => void
  toggleSidebar: () => void
}>('Sidebar')
</file>

<file path="resources/js/components/ui/skeleton/index.ts">
export { default as Skeleton } from './Skeleton.vue'
</file>

<file path="resources/js/components/ui/skeleton/Skeleton.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'

interface SkeletonProps {
  class?: HTMLAttributes['class']
}

const props = defineProps<SkeletonProps>()
</script>

<template>
  <div
    data-slot="skeleton"
    :class="cn('animate-pulse rounded-md bg-primary/10', props.class)"
  />
</template>
</file>

<file path="resources/js/components/ui/spinner/index.ts">
export { default as Spinner } from "./Spinner.vue"
</file>

<file path="resources/js/components/ui/spinner/Spinner.vue">
<script setup lang="ts">
import type { HTMLAttributes } from "vue"
import { Loader2Icon } from "lucide-vue-next"
import { cn } from "@/lib/utils"

const props = defineProps<{
  class?: HTMLAttributes["class"]
}>()
</script>

<template>
  <Loader2Icon
    role="status"
    aria-label="Loading"
    :class="cn('size-4 animate-spin', props.class)"
  />
</template>
</file>

<file path="resources/js/components/ui/switch/index.ts">
export { default as Switch } from "./Switch.vue"
</file>

<file path="resources/js/components/ui/tabs/index.ts">
export { default as Tabs } from "./Tabs.vue"
export { default as TabsContent } from "./TabsContent.vue"
export { default as TabsList } from "./TabsList.vue"
export { default as TabsTrigger } from "./TabsTrigger.vue"
</file>

<file path="resources/js/components/ui/textarea/index.ts">
export { default as Textarea } from "./Textarea.vue"
</file>

<file path="resources/js/components/ui/textarea/Textarea.vue">
<script setup lang="ts">
import type { HTMLAttributes } from "vue"
import { useVModel } from "@vueuse/core"
import { cn } from "@/lib/utils"

const props = defineProps<{
  class?: HTMLAttributes["class"]
  defaultValue?: string | number
  modelValue?: string | number
}>()

const emits = defineEmits<{
  (e: "update:modelValue", payload: string | number): void
}>()

const modelValue = useVModel(props, "modelValue", emits, {
  passive: true,
  defaultValue: props.defaultValue,
})
</script>

<template>
  <textarea v-model="modelValue" :class="cn('flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', props.class)" />
</template>
</file>

<file path="resources/js/components/ui/tooltip/index.ts">
export { default as Tooltip } from './Tooltip.vue'
export { default as TooltipContent } from './TooltipContent.vue'
export { default as TooltipProvider } from './TooltipProvider.vue'
export { default as TooltipTrigger } from './TooltipTrigger.vue'
</file>

<file path="resources/js/components/ui/tooltip/TooltipContent.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { TooltipArrow, TooltipContent, type TooltipContentEmits, type TooltipContentProps, TooltipPortal, useForwardPropsEmits } from 'reka-ui'

defineOptions({
  inheritAttrs: false,
})

const props = withDefaults(defineProps<TooltipContentProps & { class?: HTMLAttributes['class'] }>(), {
  sideOffset: 4,
})

const emits = defineEmits<TooltipContentEmits>()

const delegatedProps = reactiveOmit(props, 'class')
const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <TooltipPortal>
    <TooltipContent
      data-slot="tooltip-content"
      v-bind="{ ...forwarded, ...$attrs }"
      :class="cn('bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance', props.class)"
    >
      <slot />

      <TooltipArrow class="bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
    </TooltipContent>
  </TooltipPortal>
</template>
</file>

<file path="resources/js/components/ui/tooltip/TooltipProvider.vue">
<script setup lang="ts">
import { TooltipProvider, type TooltipProviderProps } from 'reka-ui'

const props = withDefaults(defineProps<TooltipProviderProps>(), {
  delayDuration: 0,
})
</script>

<template>
  <TooltipProvider v-bind="props">
    <slot />
  </TooltipProvider>
</template>
</file>

<file path="resources/js/components/ui/tooltip/TooltipTrigger.vue">
<script setup lang="ts">
import { TooltipTrigger, type TooltipTriggerProps } from 'reka-ui'

const props = defineProps<TooltipTriggerProps>()
</script>

<template>
  <TooltipTrigger
    data-slot="tooltip-trigger"
    v-bind="props"
  >
    <slot />
  </TooltipTrigger>
</template>
</file>

<file path="resources/js/components/ui/index.ts">
export { default as Tabs } from "./Tabs.vue"
export { default as TabsContent } from "./TabsContent.vue"
export { default as TabsList } from "./TabsList.vue"
export { default as TabsTrigger } from "./TabsTrigger.vue"
</file>

<file path="resources/js/components/ui/TabsContent.vue">
<script setup lang="ts">
import type { TabsContentProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsContent } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsContentProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")
</script>

<template>
  <TabsContent
    :class="cn('mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2', props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </TabsContent>
</template>
</file>

<file path="resources/js/components/ui/TabsList.vue">
<script setup lang="ts">
import type { TabsListProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsList } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsListProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")
</script>

<template>
  <TabsList
    v-bind="delegatedProps"
    :class="cn(
      'inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',
      props.class,
    )"
  >
    <slot />
  </TabsList>
</template>
</file>

<file path="resources/js/components/ui/TabsTrigger.vue">
<script setup lang="ts">
import type { TabsTriggerProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsTrigger, useForwardProps } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsTriggerProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <TabsTrigger
    v-bind="forwardedProps"
    :class="cn(
      'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm',
      props.class,
    )"
  >
    <span class="truncate">
      <slot />
    </span>
  </TabsTrigger>
</template>
</file>

<file path="resources/js/components/Schema.vue">
<template>
    <div ref="formRef" :class="containerClass">
        <template v-for="(component, index) in nonActionComponents" :key="component.name || component.id || index">
            <!-- Render regular form components -->
            <component
                :is="getComponent(component)"
                v-bind="getComponentProps(component)"
                :value="isSchemaComponent(component) ? undefined : (isEntryComponent(component) ? component.state : internalFormData[component.name])"
                :state="isSchemaComponent(component) ? undefined : (isEntryComponent(component) ? component.state : internalFormData[component.name])"
                :modelValue="isSchemaComponent(component) ? internalFormData : undefined"
                @update:model-value="(value) => handleComponentUpdate(component, value)"
            />
        </template>

        <!-- Render action buttons grouped together with proper gap (only if not handled by parent) -->
        <div v-if="actionComponents.length > 0 && !parentHandlesActions" class="flex items-center gap-4">
            <FormActionButton
                v-for="(action, index) in actionComponents"
                :key="action.name || index"
                v-bind="action"
                :getFormData="getFormData"
            />
        </div>
    </div>
</template>

<script setup lang="ts">
import { defineAsyncComponent, onMounted, onUnmounted, computed, h, ref, watch, provide, nextTick } from 'vue'
import ActionButton from '@laravilt/actions/components/ActionButton.vue'

const formRef = ref<HTMLFormElement | null>(null)
const internalFormData = ref<Record<string, any>>({})

// Create a wrapper component for form actions that can collect form data
const FormActionButton = {
    props: {
        getFormData: Function,
    },
    setup(props: any, { attrs }: any) {
        return () => h(ActionButton, {
            ...attrs,
            getFormData: props.getFormData,
        })
    },
}

const props = withDefaults(defineProps<{
    schema: Array<any>
    modelValue?: Record<string, any>
    schemaId?: string
    parentHandlesActions?: boolean
    formController?: string
    formMethod?: string
}>(), {
    parentHandlesActions: false,
    formController: undefined,
    formMethod: 'getSchema',
})

const emit = defineEmits<{
    'update:modelValue': [value: Record<string, any>]
    'update:schema': [value: any[]]
}>()

// Make schema internally reactive so it can be updated by reactive fields
const internalSchema = ref(props.schema)

// Watch for prop schema changes (from page navigation, etc.)
watch(() => props.schema, (newSchema) => {
    internalSchema.value = newSchema
})

// Recursively extract all field components and their default values from schema
const extractFieldDefaults = (schema: Array<any>): Record<string, any> => {
    const defaults: Record<string, any> = {}
    const schemaComponentTypes = ['tabs', 'section', 'grid']
    const entryComponentTypes = ['text_entry', 'badge_entry', 'icon_entry', 'image_entry', 'color_entry', 'code_entry', 'key_value_entry', 'repeatable_entry']

    // Safety check - ensure schema is an array
    if (!schema || !Array.isArray(schema)) {
        console.warn('extractFieldDefaults: schema is not an array', schema)
        return defaults
    }

    for (const component of schema) {
        // Skip actions
        if (component.hasAction === true || (component.name && !component.component)) {
            continue
        }

        // Skip entry components (read-only displays, not form fields)
        if (entryComponentTypes.includes(component.component)) {
            continue
        }

        // If it's a tabs component, extract from all tabs
        if (component.component === 'tabs' && component.tabs && Array.isArray(component.tabs)) {
            for (const tab of component.tabs) {
                if (tab.schema && Array.isArray(tab.schema)) {
                    Object.assign(defaults, extractFieldDefaults(tab.schema))
                }
            }
            continue // Don't add the tabs component itself as a field
        }

        // If it's a schema component (section, grid), recurse into its schema
        if (schemaComponentTypes.includes(component.component) && component.schema && Array.isArray(component.schema)) {
            Object.assign(defaults, extractFieldDefaults(component.schema))
            continue // Don't add the schema component itself as a field
        }

        // If it has a name and component type (it's an actual field), add its default value
        if (component.name && component.component && !schemaComponentTypes.includes(component.component)) {
            // Use defaultValue or default, but NOT value (value could be an object from backend)
            // For hidden fields, also check the 'default' property
            // Use ?? (nullish coalescing) to properly handle false/0 values
            defaults[component.name] = component.defaultValue ?? component.default ?? component.value ?? null
        }
    }

    return defaults
}

// Initialize form data with defaults from schema
const initializeFormData = () => {
    const defaults = extractFieldDefaults(internalSchema.value)

    // Merge with any provided modelValue
    internalFormData.value = {
        ...defaults,
        ...(props.modelValue || {})
    }

    emit('update:modelValue', internalFormData.value)
}

// Handle action-updated data events
const handleActionUpdatedData = (event: CustomEvent) => {
    const updatedData = event.detail;

    if (updatedData && typeof updatedData === 'object') {
        // Merge the updated data into internal form data
        internalFormData.value = {
            ...internalFormData.value,
            ...updatedData
        };
        emit('update:modelValue', internalFormData.value);
    }
};

// Initialize on mount
onMounted(() => {
    initializeFormData();

    // Listen for action-updated-data events from ActionButton
    window.addEventListener('action-updated-data', handleActionUpdatedData as EventListener);
});

// Cleanup on unmount
onUnmounted(() => {
    window.removeEventListener('action-updated-data', handleActionUpdatedData as EventListener);
});

// Watch for internal schema changes (from reactive fields)
// Don't re-initialize form data as it will reset user input
// The schema update only changes field options, not the data itself
watch(internalSchema, () => {
    // Intentionally empty - we don't need to do anything when schema changes
    // The reactive update already handles option changes
}, { deep: true })

// Watch for external modelValue changes and merge them
watch(() => props.modelValue, (newValue) => {
    if (newValue) {
        internalFormData.value = {
            ...internalFormData.value,
            ...newValue
        }
    }
}, { deep: true })

// Handle component update events
const handleComponentUpdate = async (component: any, value: any) => {
    if (isSchemaComponent(component)) {
        // For schema components (Section, Grid, Tabs), value is an object with field updates
        // Update internal form data first
        const oldData = { ...internalFormData.value }

        // Check if any values actually changed before proceeding
        let hasChanges = false
        for (const [fieldName, fieldValue] of Object.entries(value)) {
            if (oldData[fieldName] !== fieldValue) {
                hasChanges = true
                break
            }
        }

        // Skip if nothing changed (performance optimization)
        if (!hasChanges) {
            return
        }

        internalFormData.value = { ...internalFormData.value, ...value }
        emit('update:modelValue', internalFormData.value)

        // Check each field that changed for reactivity
        for (const [fieldName, fieldValue] of Object.entries(value)) {
            // Only trigger if value actually changed
            if (oldData[fieldName] !== fieldValue) {
                // Find the field in schema and check if it's reactive
                const field = findFieldInSchema(internalSchema.value, fieldName)
                if (field && (field.isLive || field.isLazy)) {
                    await triggerReactiveFieldUpdate(fieldName, field)
                }
            }
        }
    } else {
        await updateValue(component.name, value)
    }
}

const updateValue = async (name: string, value: any) => {
    // Update internal form data
    internalFormData.value = {
        ...internalFormData.value,
        [name]: value
    }

    emit('update:modelValue', internalFormData.value)

    // Check if this field is reactive (live/lazy)
    const field = findFieldInSchema(internalSchema.value, name)

    if (field && (field.isLive || field.isLazy)) {
        await triggerReactiveFieldUpdate(name, field)
    }
}

// Find a field by name in the schema (recursively)
const findFieldInSchema = (schema: any[], fieldName: string): any => {
    for (const component of schema) {
        if (component.name === fieldName) {
            return component
        }

        // Check nested schemas
        if (component.component === 'tabs' && component.tabs) {
            for (const tab of component.tabs) {
                if (tab.schema) {
                    const found = findFieldInSchema(tab.schema, fieldName)
                    if (found) return found
                }
            }
        }

        if (component.schema) {
            const found = findFieldInSchema(component.schema, fieldName)
            if (found) return found
        }
    }
    return null
}

// Trigger reactive field update
const triggerReactiveFieldUpdate = async (fieldName: string, field: any) => {
    // Skip if no form controller is configured
    if (!props.formController) {
        console.warn('[Schema] No formController configured, skipping reactive field update')
        return
    }

    const debounceMs = field.isLazy
        ? (field.liveDebounce || 500)
        : (field.isLive && field.liveDebounce ? field.liveDebounce : 0)

    // TODO: Implement debouncing if needed
    try {
        const payload = {
            controller: props.formController,
            method: props.formMethod || 'getSchema',
            data: internalFormData.value,
            changed_field: fieldName,
        }

        const response = await fetch('/reactive-fields/update', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') || '',
            },
            body: JSON.stringify(payload),
        })

        if (!response.ok) {
            throw new Error('Failed to update reactive fields')
        }

        const result = await response.json()

        if (result.schema) {
            updateSchema(result.schema)
        }

        // Update form data if backend modified it (from afterStateUpdated)
        if (result.data) {
            internalFormData.value = { ...internalFormData.value, ...result.data }
            emit('update:modelValue', internalFormData.value)
        }
    } catch (error) {
        console.error('[FormRenderer] Error updating reactive fields:', error)
    }
}

// Collect all form data - just return the internal tracked data
const getFormData = () => {
    // Return a copy to avoid mutations
    return { ...internalFormData.value }
}

// Validate the form using HTML5 validation
const validateForm = () => {
    if (!formRef.value) {
        return true
    }

    // Find the closest form element (could be parent or self if we're inside a form)
    const formElement = formRef.value.closest('form') as HTMLFormElement | null

    if (formElement) {
        const isValid = formElement.checkValidity()

        if (!isValid) {
            // Trigger validation UI (show error messages)
            formElement.reportValidity()
        }

        return isValid
    }

    // If no parent form, validate all inputs within this container
    const inputs = formRef.value.querySelectorAll('input, select, textarea') as NodeListOf<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>
    let isValid = true

    for (const input of inputs) {
        if (!input.checkValidity()) {
            input.reportValidity()
            isValid = false
            break
        }
    }

    return isValid
}

// Function to update schema (for reactive fields)
const updateSchema = (newSchema: any[]) => {
    // Save current scroll position and focused element
    const scrollX = window.scrollX
    const scrollY = window.scrollY
    const activeElement = document.activeElement as HTMLElement

    // Simply update the schema - Vue's reactivity will handle the updates
    // Since we're using ref(), Vue will detect the change
    internalSchema.value = newSchema

    // Restore scroll position and focus immediately in next tick
    nextTick(() => {
        // Restore scroll position
        window.scrollTo({
            top: scrollY,
            left: scrollX,
            behavior: 'instant' as ScrollBehavior
        })

        // Restore focus if element still exists
        if (activeElement && document.contains(activeElement)) {
            activeElement.focus({ preventScroll: true })
        }
    })
}

// Provide getFormData, validateForm, updateSchema, and schemaId to all child components
provide('getFormData', getFormData)
provide('validateForm', validateForm)
provide('updateSchema', updateSchema)
provide('schemaId', props.schemaId || null)
provide('formController', props.formController)
provide('formMethod', props.formMethod)

// Check if an item is an action
const isAction = (item: any) => {
    // Actions have hasAction property or don't have a component property
    return item.hasAction === true || (item.name && !item.component)
}

// Separate action components from regular components
const actionComponents = computed(() => {
    if (!internalSchema.value || !Array.isArray(internalSchema.value)) return []
    return internalSchema.value.filter(isAction)
})

const nonActionComponents = computed(() => {
    if (!internalSchema.value || !Array.isArray(internalSchema.value)) return []
    return internalSchema.value.filter((item: any) => !isAction(item))
})

// Check if a component is a schema component (needs entire modelValue, not just a field value)
const isSchemaComponent = (component: any) => {
    const schemaComponents = ['tabs', 'section', 'grid']
    return schemaComponents.includes(component.component)
}

// Check if a component is an entry component (infolist entry - uses state from backend)
const isEntryComponent = (component: any) => {
    const entryComponents = ['text_entry', 'badge_entry', 'icon_entry', 'image_entry', 'color_entry', 'code_entry', 'key_value_entry', 'repeatable_entry']
    return entryComponents.includes(component.component)
}

// Determine container spacing based on what we're rendering
const containerClass = computed(() => {
    if (!internalSchema.value || !Array.isArray(internalSchema.value) || internalSchema.value.length === 0) return ''

    // Check if we're rendering sections - if so, use space-y-8 (reduced from space-y-12)
    const hasSections = internalSchema.value.some(c => c.component === 'section')
    if (hasSections) return 'space-y-8'

    // Otherwise use space-y-6 for general spacing
    return 'space-y-6'
})


// Map component types to their Vue components
const componentMap: Record<string, any> = {
    // Schema layout components
    tabs: defineAsyncComponent(() => import('./Tabs.vue')),
    section: defineAsyncComponent(() => import('./Section.vue')),
    grid: defineAsyncComponent(() => import('./Grid.vue')),

    // Form field components
    text_input: defineAsyncComponent(() => import('@laravilt/forms/components/fields/TextInput.vue')),
    textarea: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Textarea.vue')),
    select: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Select.vue')),
    checkbox: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Checkbox.vue')),
    radio: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Radio.vue')),
    toggle: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Toggle.vue')),
    toggle_buttons: defineAsyncComponent(() => import('@laravilt/forms/components/fields/ToggleButtons.vue')),
    hidden: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Hidden.vue')),
    date_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/DatePicker.vue')),
    time_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/TimePicker.vue')),
    date_time_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/DateTimePicker.vue')),
    date_range_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/DateRangePicker.vue')),
    color_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/ColorPicker.vue')),
    file_upload: defineAsyncComponent(() => import('@laravilt/forms/components/fields/FileUpload.vue')),
    rich_editor: defineAsyncComponent(() => import('@laravilt/forms/components/fields/RichEditor.vue')),
    markdown_editor: defineAsyncComponent(() => import('@laravilt/forms/components/fields/MarkdownEditor.vue')),
    tags_input: defineAsyncComponent(() => import('@laravilt/forms/components/fields/TagsInput.vue')),
    key_value: defineAsyncComponent(() => import('@laravilt/forms/components/fields/KeyValue.vue')),
    repeater: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Repeater.vue')),
    builder: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Builder.vue')),
    icon_picker: defineAsyncComponent(() => import('@laravilt/forms/components/fields/IconPicker.vue')),
    number_field: defineAsyncComponent(() => import('@laravilt/forms/components/fields/NumberField.vue')),
    pin_input: defineAsyncComponent(() => import('@laravilt/forms/components/fields/PinInput.vue')),
    rate_input: defineAsyncComponent(() => import('@laravilt/forms/components/fields/RateInput.vue')),
    checkbox_list: defineAsyncComponent(() => import('@laravilt/forms/components/fields/CheckboxList.vue')),
    slider: defineAsyncComponent(() => import('@laravilt/forms/components/fields/Slider.vue')),
    code_editor: defineAsyncComponent(() => import('@laravilt/forms/components/fields/CodeEditor.vue')),

    // InfoList Entry components
    text_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/TextEntry.vue')),
    badge_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/BadgeEntry.vue')),
    icon_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/IconEntry.vue')),
    image_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/ImageEntry.vue')),
    color_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/ColorEntry.vue')),
    code_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/CodeEntry.vue')),
    key_value_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/KeyValueEntry.vue')),
    repeatable_entry: defineAsyncComponent(() => import('@laravilt/infolists/components/entries/RepeatableEntry.vue')),
}

const getComponent = (component: any) => {
    // Get component type from the component object
    const type = component.component || 'div'

    // Return the mapped component or a div fallback
    return componentMap[type] || 'div'
}

// Get component props, excluding value and modelValue since we set them explicitly
const getComponentProps = (component: any) => {
    const { value, modelValue, ...props } = component
    return props
}

// Expose methods to parent component via template refs
defineExpose({
    getFormData,
    validateForm,
    updateSchema,
})
</script>
</file>

<file path="resources/js/components/Split.vue">
<template>
    <div class="grid md:grid-cols-12 gap-6" :dir="rtl ? 'rtl' : 'ltr'">
        <div :class="startColumnSpan">
            <component
                v-for="(child, index) in startSchema"
                :key="index"
                :is="child.component || 'div'"
                v-bind="child"
            />
        </div>
        <div :class="endColumnSpan">
            <component
                v-for="(child, index) in endSchema"
                :key="index"
                :is="child.component || 'div'"
                v-bind="child"
            />
        </div>
    </div>
</template>

<script setup>
const props = defineProps({
    startSchema: {
        type: Array,
        default: () => []
    },
    endSchema: {
        type: Array,
        default: () => []
    },
    startColumnSpan: {
        type: [String, Number],
        default: 'md:col-span-6'
    },
    endColumnSpan: {
        type: [String, Number],
        default: 'md:col-span-6'
    },
    rtl: {
        type: Boolean,
        default: false
    },
    theme: {
        type: String,
        default: 'light'
    }
});
</script>
</file>

<file path="resources/js/lib/utils.ts">
import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
</file>

<file path="resources/js/app.ts">
// Laravilt Schemas Package Entry Point
export { default as Grid } from './components/Grid.vue';
export { default as Section } from './components/Section.vue';
export { default as Split } from './components/Split.vue';
export { default as Tabs } from './components/Tabs.vue';
export { default as Wizard } from './components/Wizard.vue';
</file>

<file path="resources/js/schemas.js">
import Grid from './components/Grid.vue';
import Section from './components/Section.vue';
import Tabs from './components/Tabs.vue';
import Wizard from './components/Wizard.vue';
import Split from './components/Split.vue';

export { Grid, Section, Tabs, Wizard, Split };

export default {
    Grid,
    Section,
    Tabs,
    Wizard,
    Split
};
</file>

<file path="resources/lang/ar/schemas.php">
<?php

return [
    'wizard' => [
        'next' => 'Ø§Ù„ØªØ§Ù„ÙŠ',
        'previous' => 'Ø§Ù„Ø³Ø§Ø¨Ù‚',
        'submit' => 'Ø¥Ø±Ø³Ø§Ù„',
        'skip' => 'ØªØ®Ø·ÙŠ',
    ],
];
</file>

<file path="resources/lang/en/schemas.php">
<?php

return [
    'wizard' => [
        'next' => 'Next',
        'previous' => 'Previous',
        'submit' => 'Submit',
        'skip' => 'Skip',
    ],
];
</file>

<file path="resources/views/components/columns.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Columns"
    :props="$props"
/>
</file>

<file path="resources/views/components/fieldset.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Fieldset"
    :props="$props"
/>
</file>

<file path="resources/views/components/grid.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Grid"
    :props="$props"
/>
</file>

<file path="resources/views/components/section.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Section"
    :props="$props"
/>
</file>

<file path="resources/views/components/split.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Split"
    :props="$props"
/>
</file>

<file path="resources/views/components/step.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Step"
    :props="$props"
/>
</file>

<file path="resources/views/components/tab.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Tab"
    :props="$props"
/>
</file>

<file path="resources/views/components/tabs.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Tabs"
    :props="$props"
/>
</file>

<file path="resources/views/components/wizard.blade.php">
@props(['component'])

@php
    $props = $component->toLaraviltProps();
@endphp

<x-laravilt-vue-component
    component="Wizard"
    :props="$props"
/>
</file>

<file path="src/Commands/MakeSchemaCommand.php">
<?php

namespace Laravilt\Schemas\Commands;

use Illuminate\Console\GeneratorCommand;
use Illuminate\Support\Str;

class MakeSchemaCommand extends GeneratorCommand
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'make:schema {name : The name of the schema}
                            {--component : Generate a schema component instead of a standalone schema}
                            {--force : Overwrite existing file}';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Create a new schema class';

    /**
     * The type of class being generated.
     *
     * @var string
     */
    protected $type = 'Schema';

    /**
     * Execute the console command.
     */
    public function handle()
    {
        if ($this->option('component')) {
            $this->type = 'Schema Component';
        }

        parent::handle();

        $this->components->info("{$this->type} [{$this->argument('name')}] created successfully.");

        // Show usage example
        $this->newLine();

        if ($this->option('component')) {
            $this->components->bulletList([
                'Import: use App\Schemas\Components\\'.str_replace('/', '\\', $this->argument('name')).';',
                'Usage: '.class_basename($this->argument('name')).'::make()->schema([...])',
            ]);
        } else {
            $this->components->bulletList([
                'Import: use App\Schemas\\'.str_replace('/', '\\', $this->argument('name')).';',
                'Usage: '.class_basename($this->argument('name')).'::make()->schema([...])',
            ]);
        }
    }

    /**
     * Get the stub file for the generator.
     */
    protected function getStub(): string
    {
        if ($this->option('component')) {
            return __DIR__.'/../../stubs/schema-component.stub';
        }

        return __DIR__.'/../../stubs/schema.stub';
    }

    /**
     * Get the default namespace for the class.
     */
    protected function getDefaultNamespace($rootNamespace): string
    {
        if ($this->option('component')) {
            return $rootNamespace.'\\Schemas\\Components';
        }

        return $rootNamespace.'\\Schemas';
    }

    /**
     * Build the class with the given name.
     */
    protected function buildClass($name): string
    {
        $stub = parent::buildClass($name);

        return $this->replaceSchemaName($stub);
    }

    /**
     * Replace the schema name in the stub.
     */
    protected function replaceSchemaName(string $stub): string
    {
        $name = class_basename($this->argument('name'));
        $kebabName = Str::kebab($name);
        $snakeName = Str::snake($name);

        $stub = str_replace('{{ schemaKebab }}', $kebabName, $stub);
        $stub = str_replace('{{ schemaSnake }}', $snakeName, $stub);

        return $stub;
    }

    /**
     * Get the destination class path.
     */
    protected function getPath($name): string
    {
        $name = Str::replaceFirst($this->rootNamespace(), '', $name);

        return $this->laravel['path'].'/'.str_replace('\\', '/', $name).'.php';
    }
}
</file>

<file path="src/Components/Tabs/Tab.php">
<?php

namespace Laravilt\Schemas\Components\Tabs;

use Laravilt\Schemas\Components\Tab as BaseTab;

/**
 * Alias for FilamentPHP v4 compatibility.
 * Allows using: Laravilt\Schemas\Components\Tabs\Tab
 */
class Tab extends BaseTab
{
    // This class is an alias for FilamentPHP compatibility
    // All functionality is inherited from the base Tab class
}
</file>

<file path="src/Components/Columns.php">
<?php

namespace Laravilt\Schemas\Components;

use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Columns extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.columns';

    protected array $schema = [];

    /**
     * Set the schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/Components/Fieldset.php">
<?php

namespace Laravilt\Schemas\Components;

use Closure;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Fieldset extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.fieldset';

    protected array $schema = [];

    protected string|Closure|null $label = null;

    protected string|Closure|null $legend = null;

    /**
     * Set the fieldset label.
     */
    public function label(string|Closure $label): static
    {
        $this->label = $label;

        return $this;
    }

    /**
     * Set the fieldset legend (alias for label).
     */
    public function legend(string|Closure $legend): static
    {
        $this->legend = $legend;
        $this->label = $legend;

        return $this;
    }

    /**
     * Get the label.
     */
    public function getLabel(): ?string
    {
        return $this->evaluate($this->label);
    }

    /**
     * Get the legend.
     */
    public function getLegend(): ?string
    {
        return $this->evaluate($this->legend ?? $this->label);
    }

    /**
     * Set the schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'label' => $this->getLabel(),
            'legend' => $this->getLegend(),
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/Components/Grid.php">
<?php

namespace Laravilt\Schemas\Components;

use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Grid extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.grid';

    protected int|array $columns = 1;

    protected array $schema = [];

    /**
     * Set number of columns.
     *
     * @param  int|array  $columns  Number of columns or responsive array [default => 1, sm => 2, md => 3, lg => 4]
     */
    public function columns(int|array $columns): static
    {
        $this->columns = $columns;

        return $this;
    }

    /**
     * Get columns configuration.
     */
    public function getColumns(): int|array
    {
        return $this->columns;
    }

    /**
     * Set the grid schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'columns' => $this->getColumns(),
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/Components/Split.php">
<?php

namespace Laravilt\Schemas\Components;

use Laravilt\Support\Component;

class Split extends Component
{
    protected string $view = 'laravilt-schemas::components.split';

    protected array $startSchema = [];

    protected array $endSchema = [];

    protected string|int $startColumnSpan = 'md:col-span-6';

    protected string|int $endColumnSpan = 'md:col-span-6';

    protected string $fromBreakpoint = 'md';

    /**
     * Set the breakpoint from which to split.
     */
    public function fromBreakpoint(string $breakpoint): static
    {
        $this->fromBreakpoint = $breakpoint;

        return $this;
    }

    /**
     * Get from breakpoint.
     */
    public function getFromBreakpoint(): string
    {
        return $this->fromBreakpoint;
    }

    /**
     * Set the left schema (alias for startSchema).
     */
    public function leftSchema(array $components): static
    {
        return $this->startSchema($components);
    }

    /**
     * Set the right schema (alias for endSchema).
     */
    public function rightSchema(array $components): static
    {
        return $this->endSchema($components);
    }

    /**
     * Get left schema.
     */
    public function getLeftSchema(): array
    {
        return $this->getStartSchema();
    }

    /**
     * Get right schema.
     */
    public function getRightSchema(): array
    {
        return $this->getEndSchema();
    }

    /**
     * Set the start (left/right) schema.
     */
    public function startSchema(array $components): static
    {
        $this->startSchema = $components;

        return $this;
    }

    /**
     * Get start schema.
     */
    public function getStartSchema(): array
    {
        return $this->startSchema;
    }

    /**
     * Set the end (right/left) schema.
     */
    public function endSchema(array $components): static
    {
        $this->endSchema = $components;

        return $this;
    }

    /**
     * Get end schema.
     */
    public function getEndSchema(): array
    {
        return $this->endSchema;
    }

    /**
     * Set start column span.
     */
    public function startColumnSpan(string|int $span): static
    {
        $this->startColumnSpan = $span;

        return $this;
    }

    /**
     * Set end column span.
     */
    public function endColumnSpan(string|int $span): static
    {
        $this->endColumnSpan = $span;

        return $this;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'fromBreakpoint' => $this->getFromBreakpoint(),
            'leftSchema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getLeftSchema()
            ),
            'rightSchema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getRightSchema()
            ),
            'startSchema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getStartSchema()
            ),
            'endSchema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getEndSchema()
            ),
            'startColumnSpan' => $this->startColumnSpan,
            'endColumnSpan' => $this->endColumnSpan,
        ]);
    }
}
</file>

<file path="src/Components/Step.php">
<?php

namespace Laravilt\Schemas\Components;

use Closure;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Step extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.step';

    protected array $schema = [];

    protected string|Closure|null $label = null;

    protected string|Closure|null $description = null;

    protected string|Closure|null $icon = null;

    /**
     * Set step label.
     */
    public function label(string|Closure $label): static
    {
        $this->label = $label;

        return $this;
    }

    /**
     * Get label.
     */
    public function getLabel(): ?string
    {
        return $this->evaluate($this->label);
    }

    /**
     * Set description.
     */
    public function description(string|Closure $description): static
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description.
     */
    public function getDescription(): ?string
    {
        return $this->evaluate($this->description);
    }

    /**
     * Set icon.
     */
    public function icon(string|Closure $icon): static
    {
        $this->icon = $icon;

        return $this;
    }

    /**
     * Get icon.
     */
    public function getIcon(): ?string
    {
        return $this->evaluate($this->icon);
    }

    /**
     * Set schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'label' => $this->getLabel(),
            'description' => $this->getDescription(),
            'icon' => $this->getIcon(),
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/Components/Tabs.php">
<?php

namespace Laravilt\Schemas\Components;

use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Tabs extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.tabs';

    protected array $tabs = [];

    protected int $activeTab = 0;

    protected bool $persistTabInQueryString = false;

    /**
     * Set tabs (array of Tab components).
     */
    public function tabs(array $tabs): static
    {
        $this->tabs = $tabs;

        return $this;
    }

    /**
     * Get tabs.
     */
    public function getTabs(): array
    {
        return $this->tabs;
    }

    /**
     * Set active tab index.
     */
    public function activeTab(int $index): static
    {
        $this->activeTab = $index;

        return $this;
    }

    /**
     * Persist active tab in query string.
     */
    public function persistTabInQueryString(bool $condition = true): static
    {
        $this->persistTabInQueryString = $condition;

        return $this;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'tabs' => array_map(
                fn ($tab) => $tab->toLaraviltProps(),
                $this->getTabs()
            ),
            'activeTab' => $this->activeTab,
            'persistTabInQueryString' => $this->persistTabInQueryString,
        ]);
    }
}
</file>

<file path="src/Components/Wizard.php">
<?php

namespace Laravilt\Schemas\Components;

use Closure;
use Laravilt\Support\Component;

class Wizard extends Component
{
    protected string $view = 'laravilt-schemas::components.wizard';

    protected array $steps = [];

    protected int $currentStep = 0;

    protected bool $skippable = false;

    protected string|Closure|null $submitButtonLabel = null;

    protected string|Closure|null $nextButtonLabel = null;

    protected string|Closure|null $previousButtonLabel = null;

    /**
     * Set wizard steps.
     */
    public function steps(array $steps): static
    {
        $this->steps = $steps;

        return $this;
    }

    /**
     * Get steps.
     */
    public function getSteps(): array
    {
        return $this->steps;
    }

    /**
     * Allow skipping steps.
     */
    public function skippable(bool $condition = true): static
    {
        $this->skippable = $condition;

        return $this;
    }

    /**
     * Set submit button label.
     */
    public function submitButtonLabel(string|Closure $label): static
    {
        $this->submitButtonLabel = $label;

        return $this;
    }

    /**
     * Get submit button label.
     */
    public function getSubmitButtonLabel(): string
    {
        return $this->evaluate($this->submitButtonLabel) ?? __('laravilt-schemas::schemas.wizard.submit');
    }

    /**
     * Set next button label.
     */
    public function nextButtonLabel(string|Closure $label): static
    {
        $this->nextButtonLabel = $label;

        return $this;
    }

    /**
     * Get next button label.
     */
    public function getNextButtonLabel(): string
    {
        return $this->evaluate($this->nextButtonLabel) ?? __('laravilt-schemas::schemas.wizard.next');
    }

    /**
     * Set previous button label.
     */
    public function previousButtonLabel(string|Closure $label): static
    {
        $this->previousButtonLabel = $label;

        return $this;
    }

    /**
     * Get previous button label.
     */
    public function getPreviousButtonLabel(): string
    {
        return $this->evaluate($this->previousButtonLabel) ?? __('laravilt-schemas::schemas.wizard.previous');
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'steps' => array_map(
                fn ($step) => $step->toLaraviltProps(),
                $this->getSteps()
            ),
            'currentStep' => $this->currentStep,
            'skippable' => $this->skippable,
            'submitButtonLabel' => $this->getSubmitButtonLabel(),
            'nextButtonLabel' => $this->getNextButtonLabel(),
            'previousButtonLabel' => $this->getPreviousButtonLabel(),
        ]);
    }
}
</file>

<file path="src/Concerns/CanBeCollapsible.php">
<?php

namespace Laravilt\Schemas\Concerns;

trait CanBeCollapsible
{
    protected bool $collapsible = false;

    protected bool $collapsed = false;

    /**
     * Make the component collapsible.
     */
    public function collapsible(bool $condition = true): static
    {
        $this->collapsible = $condition;

        return $this;
    }

    /**
     * Check if the component is collapsible.
     */
    public function isCollapsible(): bool
    {
        return $this->collapsible;
    }

    /**
     * Set the component as collapsed by default.
     */
    public function collapsed(bool $condition = true): static
    {
        $this->collapsed = $condition;

        return $this;
    }

    /**
     * Check if the component is collapsed.
     */
    public function isCollapsed(): bool
    {
        return $this->collapsible && $this->collapsed;
    }
}
</file>

<file path="src/Concerns/HasSchema.php">
<?php

namespace Laravilt\Schemas\Concerns;

trait HasSchema
{
    protected array $schema = [];

    /**
     * Set the schema components.
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema components.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Get all visible components in the schema.
     */
    public function getVisibleComponents(): array
    {
        return array_filter($this->schema, fn ($component) => ! $component->isHidden());
    }
}
</file>

<file path="src/Mcp/Tools/GenerateSchemaTool.php">
<?php

namespace Laravilt\Schemas\Mcp\Tools;

use Illuminate\JsonSchema\JsonSchema;
use Laravel\Mcp\Request;
use Laravel\Mcp\Response;
use Laravel\Mcp\Server\Tool;

class GenerateSchemaTool extends Tool
{
    protected string $description = 'Generate a new schema class for layout organization';

    public function handle(Request $request): Response
    {
        $name = $request->string('name');

        $command = 'php '.base_path('artisan').' make:schema "'.$name.'" --no-interaction';

        if ($request->boolean('force', false)) {
            $command .= ' --force';
        }

        exec($command, $output, $returnCode);

        if ($returnCode === 0) {
            $response = "âœ… Schema '{$name}' created successfully!\n\n";
            $response .= "ðŸ“– Location: app/Schemas/{$name}.php\n\n";
            $response .= "ðŸ“¦ Available layout components: Section, Tabs, Tab, Grid, Fieldset\n";

            return Response::text($response);
        } else {
            return Response::text('âŒ Failed to create schema: '.implode("\n", $output));
        }
    }

    public function schema(JsonSchema $schema): array
    {
        return [
            'name' => $schema->string()
                ->description('Schema class name in StudlyCase (e.g., "ProductSchema")')
                ->required(),
            'force' => $schema->boolean()
                ->description('Overwrite existing file')
                ->default(false),
        ];
    }
}
</file>

<file path="stubs/schema-component.stub">
<?php

namespace {{ namespace }};

use Closure;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

/**
 * {{ class }} Component
 *
 * Custom schema component for organizing form fields and layout.
 */
class {{ class }} extends Component
{
    use HasSchema;

    protected string $view = 'schemas.components.{{ schemaKebab }}';

    protected array $schema = [];

    protected string|Closure|null $heading = null;

    protected string|Closure|null $description = null;

    protected string|Closure|null $icon = null;

    /**
     * Configure the component.
     */
    protected function setUp(): void
    {
        parent::setUp();

        // Configure your component here
    }

    /**
     * Set the heading.
     */
    public function heading(string|Closure $heading): static
    {
        $this->heading = $heading;

        return $this;
    }

    /**
     * Get the heading.
     */
    public function getHeading(): ?string
    {
        return $this->evaluate($this->heading);
    }

    /**
     * Set the description.
     */
    public function description(string|Closure $description): static
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get the description.
     */
    public function getDescription(): ?string
    {
        return $this->evaluate($this->description);
    }

    /**
     * Set the icon.
     */
    public function icon(string|Closure $icon): static
    {
        $this->icon = $icon;

        return $this;
    }

    /**
     * Get the icon.
     */
    public function getIcon(): ?string
    {
        return $this->evaluate($this->icon);
    }

    /**
     * Set the schema.
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'heading' => $this->getHeading(),
            'description' => $this->getDescription(),
            'icon' => $this->getIcon(),
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="stubs/schema.stub">
<?php

namespace {{ namespace }};

use Laravilt\Schemas\Schema;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

/**
 * {{ class }} Schema
 *
 * Custom schema for organizing form components and layout.
 */
class {{ class }} extends Schema
{
    use HasSchema;

    protected string $view = 'schemas.{{ schemaKebab }}';

    /**
     * Configure the schema.
     */
    protected function setUp(): void
    {
        parent::setUp();

        // Configure your schema here
    }

    /**
     * Define the schema components.
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getVisibleComponents()
            ),
        ]);
    }
}
</file>

<file path="tests/Feature/DebugTest.php">
<?php

it('will not use debugging functions', function () {
    expect(['dd', 'dump', 'ray'])->each->not->toBeUsed();
});
</file>

<file path="tests/Unit/SchemaTest.php">
<?php

use Laravilt\Schemas\Schema;
use Laravilt\Support\Component;

beforeEach(function () {
    $this->schema = Schema::make('test-schema');
});

it('can be instantiated with make method', function () {
    $schema = Schema::make('test');

    expect($schema)->toBeInstanceOf(Schema::class)
        ->and($schema->getName())->toBe('test');
});

it('extends Support Component', function () {
    expect($this->schema)->toBeInstanceOf(Component::class);
});

it('can set and get schema', function () {
    $component = createTestComponent('child-component');

    $this->schema->schema([$component]);

    expect($this->schema->getSchema())->toHaveCount(1)
        ->and($this->schema->getSchema()[0])->toBe($component);
});

it('filters hidden components', function () {
    $visible = createTestComponent('visible');

    $hidden = createTestComponent('hidden');
    $hidden->hidden();

    $this->schema->schema([$visible, $hidden]);

    expect($this->schema->getVisibleComponents())->toHaveCount(1)
        ->and($this->schema->getVisibleComponents()[0])->toBe($visible);
});

it('serializes schema to laravilt props', function () {
    $component = createTestComponent('child');
    $component->label('Child Component');

    $this->schema->schema([$component]);

    $props = $this->schema->toLaraviltProps();

    expect($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(1)
        ->and($props['schema'][0])->toBeArray()
        ->and($props['schema'][0]['name'])->toBe('child')
        ->and($props['schema'][0]['label'])->toBe('Child Component');
});

it('inherits all Support Component traits', function () {
    $this->schema
        ->label('Test Schema')
        ->helperText('Helper text')
        ->disabled()
        ->required();

    expect($this->schema->getLabel())->toBe('Test Schema')
        ->and($this->schema->getHelperText())->toBe('Helper text')
        ->and($this->schema->isDisabled())->toBeTrue()
        ->and($this->schema->isRequired())->toBeTrue();
});

it('converts to array', function () {
    $array = $this->schema->toArray();

    expect($array)->toBeArray()
        ->and($array)->toHaveKey('component')
        ->and($array)->toHaveKey('schema');
});

it('converts to json', function () {
    $json = $this->schema->toJson();

    expect($json)->toBeString();
    $decoded = json_decode($json, true);
    expect($decoded)->toBeArray()
        ->and($decoded)->toHaveKey('schema');
});
</file>

<file path="tests/Unit/TabsTest.php">
<?php

use Laravilt\Schemas\Components\Tab;
use Laravilt\Schemas\Components\Tabs;
use Laravilt\Support\Component;

beforeEach(function () {
    $this->tabs = Tabs::make('test-tabs');
});

it('can be instantiated with make method', function () {
    $tabs = Tabs::make('test');

    expect($tabs)->toBeInstanceOf(Tabs::class)
        ->and($tabs->getName())->toBe('test');
});

it('can set and get tabs via schema method', function () {
    $tab1 = Tab::make('tab-1')->label('First Tab');
    $tab2 = Tab::make('tab-2')->label('Second Tab');

    $this->tabs->schema([$tab1, $tab2]);

    expect($this->tabs->getSchema())->toHaveCount(2)
        ->and($this->tabs->getSchema()[0])->toBe($tab1)
        ->and($this->tabs->getSchema()[1])->toBe($tab2);
});

it('has default active tab as first tab', function () {
    $props = $this->tabs->toLaraviltProps();

    expect($props['activeTab'])->toBe(0);
});

it('can set active tab index', function () {
    $this->tabs->activeTab(2);
    $props = $this->tabs->toLaraviltProps();

    expect($props['activeTab'])->toBe(2);
});

it('can persist tab in query string', function () {
    $this->tabs->persistTabInQueryString();
    $props = $this->tabs->toLaraviltProps();

    expect($props['persistTabInQueryString'])->toBeTrue();
});

it('does not persist tab by default', function () {
    $props = $this->tabs->toLaraviltProps();

    expect($props['persistTabInQueryString'])->toBeFalse();
});

it('serializes tabs to laravilt props via tabs method', function () {
    $tab1 = Tab::make('tab-1')->label('First Tab');
    $tab2 = Tab::make('tab-2')->label('Second Tab');

    // Note: Tabs component has both schema() from HasSchema trait and tabs() method
    // The toLaraviltProps() uses getTabs() which reads from $tabs property, not $schema
    // So we need to use tabs() method to set tabs for serialization
    $this->tabs->tabs([$tab1, $tab2]);
    $props = $this->tabs->toLaraviltProps();

    expect($props)->toHaveKey('tabs')
        ->and($props['tabs'])->toHaveCount(2)
        ->and($props['tabs'][0]['label'])->toBe('First Tab')
        ->and($props['tabs'][1]['label'])->toBe('Second Tab');
});

it('supports method chaining', function () {
    $result = $this->tabs
        ->activeTab(1)
        ->persistTabInQueryString()
        ->schema([]);

    expect($result)->toBe($this->tabs);
});

// Tab component tests
it('tab can be instantiated with make method', function () {
    $tab = Tab::make('test');

    expect($tab)->toBeInstanceOf(Tab::class)
        ->and($tab->getName())->toBe('test');
});

it('tab can set and get label', function () {
    $tab = Tab::make('test')->label('Test Label');

    expect($tab->getLabel())->toBe('Test Label');
});

it('tab can set and get icon', function () {
    $tab = Tab::make('test')->icon('heroicon-o-home');

    expect($tab->getIcon())->toBe('heroicon-o-home');
});

it('tab can set and get badge', function () {
    $tab = Tab::make('test')->badge('5');

    expect($tab->getBadge())->toBe('5');
});

it('tab supports closures for label', function () {
    $tab = Tab::make('test')->label(fn () => 'Dynamic Label');

    expect($tab->getLabel())->toBe('Dynamic Label');
});

it('tab can set and get schema', function () {
    $component = createTestComponent('child');

    $tab = Tab::make('test')->schema([$component]);

    expect($tab->getSchema())->toHaveCount(1)
        ->and($tab->getSchema()[0])->toBe($component);
});

it('tab serializes all properties to laravilt props', function () {
    $component = createTestComponent('child');

    $tab = Tab::make('test')
        ->label('Tab Label')
        ->icon('heroicon-o-user')
        ->badge('3')
        ->schema([$component]);

    $props = $tab->toLaraviltProps();

    expect($props)->toHaveKey('label')
        ->and($props['label'])->toBe('Tab Label')
        ->and($props)->toHaveKey('icon')
        ->and($props['icon'])->toBe('heroicon-o-user')
        ->and($props)->toHaveKey('badge')
        ->and($props['badge'])->toBe('3')
        ->and($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(1);
});
</file>

<file path=".gitignore">
.idea
.phpunit.cache
.phpunit.result.cache
.DS_Store
Thumbs.db
/vendor/
/node_modules/
/.vscode/
composer.lock
package-lock.json
*.log
.env
.env.backup
.env.production
/dist/
/build/
</file>

<file path=".npmignore">
# Development files
node_modules
.env
.env.*
!.env.example

# Build files
.vite
vite.config.ts.timestamp-*

# Testing
tests
*.test.ts
*.test.js
*.spec.ts
*.spec.js
coverage
.nyc_output

# IDE
.vscode
.idea
*.swp
*.swo
*~

# PHP/Composer files
vendor
composer.json
composer.lock
phpunit.xml
phpunit.xml.dist
.phpunit.result.cache

# Laravel specific
bootstrap/cache
storage
database
routes
config
.artisan

# Git
.git
.gitignore
.gitattributes

# CI/CD
.github
.gitlab-ci.yml
.travis.yml

# Documentation source
docs

# Source maps
*.map

# Lock files (optional - you might want to include these)
package-lock.json
yarn.lock
pnpm-lock.yaml
</file>

<file path=".npmrc">
@laravilt:registry=https://npm.pkg.github.com
</file>

<file path="CHANGELOG.md">
# Changelog

All notable changes to `Schemas` will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- Initial release

### Changed

### Deprecated

### Removed

### Fixed

### Security
</file>

<file path="CODE_OF_CONDUCT.md">
# Contributor Covenant Code of Conduct

## Our Pledge

We as members, contributors, and leaders pledge to make participation in our
community a harassment-free experience for everyone, regardless of age, body
size, visible or invisible disability, ethnicity, sex characteristics, gender
identity and expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, religion, or sexual identity
and orientation.

We pledge to act and interact in ways that contribute to an open, welcoming,
diverse, inclusive, and healthy community.

## Our Standards

Examples of behavior that contributes to a positive environment for our
community include:

* Demonstrating empathy and kindness toward other people
* Being respectful of differing opinions, viewpoints, and experiences
* Giving and gracefully accepting constructive feedback
* Accepting responsibility and apologizing to those affected by our mistakes,
  and learning from the experience
* Focusing on what is best not just for us as individuals, but for the
  overall community

Examples of unacceptable behavior include:

* The use of sexualized language or imagery, and sexual attention or
  advances of any kind
* Trolling, insulting or derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or email
  address, without their explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

## Enforcement Responsibilities

Community leaders are responsible for clarifying and enforcing our standards of
acceptable behavior and will take appropriate and fair corrective action in
response to any behavior that they deem inappropriate, threatening, offensive,
or harmful.

## Scope

This Code of Conduct applies within all community spaces, and also applies when
an individual is officially representing the community in public spaces.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported to the community leaders responsible for enforcement.

All complaints will be reviewed and investigated promptly and fairly.

All community leaders are obligated to respect the privacy and security of the
reporter of any incident.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant](https://www.contributor-covenant.org),
version 2.0, available at https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.
</file>

<file path="LICENSE.md">
MIT License

Copyright (c) 2025 Fady Mondy

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="phpstan.neon">
includes:
    - phpstan-baseline.neon

parameters:
    level: 5
    paths:
        - src
    tmpDir: build/phpstan
    checkOctaneCompatibility: true
    checkModelProperties: true
    checkMissingIterableValueType: false
</file>

<file path="phpunit.xml">
<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/11.0/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Test Suite">
            <directory suffix="Test.php">./tests</directory>
        </testsuite>
    </testsuites>
    <coverage>
        <report>
            <html outputDirectory="build/coverage"/>
            <text outputFile="build/coverage.txt"/>
            <clover outputFile="build/logs/clover.xml"/>
        </report>
    </coverage>
    <source>
        <include>
            <directory suffix=".php">./src</directory>
        </include>
    </source>
</phpunit>
</file>

<file path="pint.json">
{
    "preset": "laravel",
    "rules": {
        "simplified_null_return": true,
        "braces": false,
        "new_with_braces": {
            "anonymous_class": false,
            "named_class": false
        }
    }
}
</file>

<file path="testbench.yaml">
providers:
  - Laravilt\Schemas\SchemasServiceProvider

workbench:
  welcome: false
  discovers:
    web: true
    api: true
    commands: true
    components: true
</file>

<file path="vite.plugin.js">
import { resolve } from 'path';

export default function SchemasPlugin() {
    const pluginPath = resolve(__dirname);

    return {
        name: 'schemas-plugin',
        config: () => ({
            build: {
                rollupOptions: {
                    input: {
                        'schemas': resolve(pluginPath, 'resources/js/app.js'),
                    },
                    output: {
                        entryFileNames: 'js/[name].js',
                        chunkFileNames: 'js/[name].js',
                        assetFileNames: (assetInfo) => {
                            if (assetInfo.name.endsWith('.css')) {
                                return 'css/[name][extname]';
                            }
                            return 'assets/[name][extname]';
                        },
                    },
                },
                outDir: resolve(pluginPath, 'dist'),
                emptyOutDir: true,
            },
        }),
    };
}
</file>

<file path=".github/workflows/fix-php-code-styling.yml">
name: Fix PHP Code Styling

on:
  push:
    branches: [ "master", "main" ]

permissions:
  contents: write

jobs:
  php-code-styling:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v6
        with:
          ref: ${{ github.head_ref }}

      - name: Fix PHP code style issues
        uses: aglipanci/laravel-pint-action@2.6
        with:
          preset: laravel

      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v7
        with:
          commit_message: Fix styling
</file>

<file path=".github/workflows/publish.yml">
name: Publish to NPM

on:
  push:
    branches:
      - master
      - main
    tags:
      - 'v*'
  workflow_dispatch:
    inputs:
      version_bump:
        description: 'Version bump type'
        required: true
        default: 'patch'
        type: choice
        options:
          - patch
          - minor
          - major

jobs:
  publish:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      packages: write
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js for npm
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          registry-url: 'https://registry.npmjs.org'
          scope: '@laravilt'

      - name: Configure npm authentication
        run: |
          echo "//npm.pkg.github.com/:_authToken=${{ secrets.GITHUB_TOKEN }}" >> ~/.npmrc
          echo "//registry.npmjs.org/:_authToken=${{ secrets.NPM_TOKEN }}" >> ~/.npmrc

      - name: Install dependencies
        run: npm install

      - name: Bump version (if manual trigger)
        if: github.event_name == 'workflow_dispatch'
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          npm version ${{ github.event.inputs.version_bump }} --no-git-tag-version
          git add package.json
          git commit -m "chore: bump version to $(node -p "require('./package.json').version")"
          git push origin HEAD:${{ github.ref_name }}

      - name: Build package
        run: npm run build:npm

      - name: Publish to npm registry
        if: startsWith(github.ref, 'refs/tags/v') || github.event_name == 'workflow_dispatch'
        run: |
          echo "//registry.npmjs.org/:_authToken=${{ secrets.NPM_TOKEN }}" > .npmrc
          echo "registry=https://registry.npmjs.org/" >> .npmrc
          npm publish --access public

      - name: Publish to GitHub Packages
        if: startsWith(github.ref, 'refs/tags/v') || github.event_name == 'workflow_dispatch'
        run: |
          echo "//npm.pkg.github.com/:_authToken=${{ secrets.GITHUB_TOKEN }}" > .npmrc
          echo "registry=https://npm.pkg.github.com/" >> .npmrc
          echo "@laravilt:registry=https://npm.pkg.github.com/" >> .npmrc
          npm publish

      - name: Get package info
        id: package_info
        run: |
          echo "name=$(node -p "require('./package.json').name")" >> $GITHUB_OUTPUT
          echo "version=$(node -p "require('./package.json').version")" >> $GITHUB_OUTPUT

      - name: Create Release
        if: startsWith(github.ref, 'refs/tags/v') || github.event_name == 'workflow_dispatch'
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v${{ steps.package_info.outputs.version }}
          name: v${{ steps.package_info.outputs.version }}
          body: |
            ## ${{ steps.package_info.outputs.name }} v${{ steps.package_info.outputs.version }}

            Published to npm: https://www.npmjs.com/package/${{ steps.package_info.outputs.name }}

            Install with:
            ```bash
            npm install ${{ steps.package_info.outputs.name }}@${{ steps.package_info.outputs.version }}
            ```
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Push version tag (if manual trigger)
        if: github.event_name == 'workflow_dispatch'
        run: |
          git tag "v${{ steps.package_info.outputs.version }}"
          git push origin --tags
</file>

<file path=".github/workflows/tests.yml">
name: Tests

on:
  push:
    branches: [ "master", "main" ]
  pull_request:
    branches: [ "master", "main" ]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: true
      matrix:
        php: [8.3, 8.4]
        laravel: [12.*]
        dependency-version: [prefer-stable]

    name: PHP ${{ matrix.php }} - Laravel ${{ matrix.laravel }} - ${{ matrix.dependency-version }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v6

      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: ${{ matrix.php }}
          extensions: dom, curl, libxml, mbstring, zip, pcntl, pdo, sqlite, pdo_sqlite, bcmath, soap, intl, gd, exif, iconv
          coverage: none

      - name: Setup problem matchers
        run: |
          echo "::add-matcher::${{ runner.tool_cache }}/php.json"
          echo "::add-matcher::${{ runner.tool_cache }}/phpunit.json"

      - name: Install dependencies
        run: |
          composer require "laravel/framework:${{ matrix.laravel }}" --no-interaction --no-update
          composer update --${{ matrix.dependency-version }} --prefer-dist --no-interaction

      - name: Execute tests
        run: vendor/bin/pest
</file>

<file path="lang/en/schemas.php">
<?php

return [
    // Wizard Component
    'wizard' => [
        'submit_button_label' => 'Submit',
        'next_button_label' => 'Next',
        'previous_button_label' => 'Previous',
        'skip_button_label' => 'Skip',
    ],

    // Tabs Component
    'tabs' => [
        'tab_label' => 'Tab',
    ],

    // Section Component
    'section' => [
        'expand' => 'Expand',
        'collapse' => 'Collapse',
    ],

    // Common
    'common' => [
        'loading' => 'Loading...',
        'error' => 'An error occurred',
    ],
];
</file>

<file path="resources/css/app.css">
/* Plugin styles */
</file>

<file path="resources/js/components/ui/badge/index.ts">
import type { VariantProps } from "class-variance-authority"
import { cva } from "class-variance-authority"

export { default as Badge } from "./Badge.vue"

export const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
        // Semantic colors
        primary:
          "border-transparent bg-blue-500 text-white [a&]:hover:bg-blue-600",
        success:
          "border-transparent bg-emerald-500 text-white [a&]:hover:bg-emerald-600",
        danger:
          "border-transparent bg-red-500 text-white [a&]:hover:bg-red-600",
        warning:
          "border-transparent bg-amber-500 text-white [a&]:hover:bg-amber-600",
        info:
          "border-transparent bg-sky-500 text-white [a&]:hover:bg-sky-600",
        gray:
          "border-transparent bg-gray-500 text-white [a&]:hover:bg-gray-600",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
)
export type BadgeVariants = VariantProps<typeof badgeVariants>
</file>

<file path="resources/js/components/ui/button/Button.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive, type PrimitiveProps } from 'reka-ui'
import { type ButtonVariants, buttonVariants } from '.'

interface Props extends /* @vue-ignore */ PrimitiveProps {
  variant?: ButtonVariants['variant']
  size?: ButtonVariants['size']
  class?: HTMLAttributes['class']
}

const props = withDefaults(defineProps<Props>(), {
  as: 'button',
})
</script>

<template>
  <Primitive
    data-slot="button"
    :as="as"
    :as-child="asChild"
    :class="cn(buttonVariants({ variant, size }), props.class)"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/checkbox/Checkbox.vue">
<script setup lang="ts">
import type { CheckboxRootEmits, CheckboxRootProps } from 'reka-ui'
import { cn } from '@/lib/utils'
import { Check } from 'lucide-vue-next'
import { CheckboxIndicator, CheckboxRoot, useForwardPropsEmits } from 'reka-ui'
import { computed, type HTMLAttributes } from 'vue'

const props = defineProps</* @vue-ignore */ CheckboxRootProps & { class?: HTMLAttributes['class'] }>()
const emits = defineEmits</* @vue-ignore */ CheckboxRootEmits>()

const delegatedProps = computed(() => {
  const { class: _, ...delegated } = props

  return delegated
})

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <CheckboxRoot
    data-slot="checkbox"
    v-bind="forwarded"
    :class="
      cn('peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',
         props.class)"
  >
    <CheckboxIndicator
      data-slot="checkbox-indicator"
      class="flex items-center justify-center text-current transition-none"
    >
      <slot>
        <Check class="size-3.5" />
      </slot>
    </CheckboxIndicator>
  </CheckboxRoot>
</template>
</file>

<file path="resources/js/components/ui/collapsible/Collapsible.vue">
<script setup lang="ts">
import type { CollapsibleRootEmits, CollapsibleRootProps } from 'reka-ui'
import { CollapsibleRoot, useForwardPropsEmits } from 'reka-ui'

const props = defineProps</* @vue-ignore */ CollapsibleRootProps>()
const emits = defineEmits</* @vue-ignore */ CollapsibleRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <CollapsibleRoot
    v-slot="{ open }"
    data-slot="collapsible"
    v-bind="forwarded"
  >
    <slot :open="open" />
  </CollapsibleRoot>
</template>
</file>

<file path="resources/js/components/ui/dialog/Dialog.vue">
<script setup lang="ts">
import { DialogRoot, type DialogRootEmits, type DialogRootProps, useForwardPropsEmits } from 'reka-ui'

const props = defineProps</* @vue-ignore */ DialogRootProps>()
const emits = defineEmits</* @vue-ignore */ DialogRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <DialogRoot
    data-slot="dialog"
    v-bind="forwarded"
  >
    <slot />
  </DialogRoot>
</template>
</file>

<file path="resources/js/components/ui/dropdown-menu/DropdownMenu.vue">
<script setup lang="ts">
import { DropdownMenuRoot, type DropdownMenuRootEmits, type DropdownMenuRootProps, useForwardPropsEmits } from 'reka-ui'

const props = defineProps</* @vue-ignore */ DropdownMenuRootProps>()
const emits = defineEmits</* @vue-ignore */ DropdownMenuRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <DropdownMenuRoot
    data-slot="dropdown-menu"
    v-bind="forwarded"
  >
    <slot />
  </DropdownMenuRoot>
</template>
</file>

<file path="resources/js/components/ui/navigation-menu/NavigationMenu.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import {
  NavigationMenuRoot,
  type NavigationMenuRootEmits,
  type NavigationMenuRootProps,
  useForwardPropsEmits,
} from 'reka-ui'
import NavigationMenuViewport from './NavigationMenuViewport.vue'

const props = withDefaults(defineProps<NavigationMenuRootProps & {
  class?: HTMLAttributes['class']
  viewport?: boolean
}>(), {
  viewport: true,
})
const emits = defineEmits</* @vue-ignore */ NavigationMenuRootEmits>()

const delegatedProps = reactiveOmit(props, 'class', 'viewport')
const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <NavigationMenuRoot
    data-slot="navigation-menu"
    :data-viewport="viewport"
    v-bind="forwarded"
    :class="cn('group/navigation-menu relative flex max-w-max flex-1 items-center justify-center', props.class)"
  >
    <slot />
    <NavigationMenuViewport v-if="viewport" />
  </NavigationMenuRoot>
</template>
</file>

<file path="resources/js/components/ui/pin-input/PinInput.vue">
<script setup lang="ts" generic="Type extends 'text' | 'number' = 'text'">
import type { PinInputRootEmits, PinInputRootProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { PinInputRoot, useForwardPropsEmits } from "reka-ui"
import { cn } from "@/lib/utils"

const props = withDefaults(defineProps</* @vue-ignore */ PinInputRootProps<Type> & { class?: HTMLAttributes["class"] }>(), {
  modelValue: () => [],
})
const emits = defineEmits</* @vue-ignore */ PinInputRootEmits<Type>>()

const delegatedProps = reactiveOmit(props, "class")

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <PinInputRoot
    data-slot="pin-input"
    v-bind="forwarded" :class="cn('flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed', props.class)"
  >
    <slot />
  </PinInputRoot>
</template>
</file>

<file path="resources/js/components/ui/pin-input/PinInputSlot.vue">
<script setup lang="ts">
import type { PinInputInputProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { PinInputInput, useForwardProps } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<PinInputInputProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <PinInputInput
    data-slot="pin-input-slot"
    v-bind="forwardedProps"
    :class="cn('border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative h-9 w-9 border-y border-e text-sm shadow-xs transition-all outline-none text-center first:rounded-s-md first:border-s last:rounded-e-md focus:z-10 focus:ring-[3px] [direction:ltr] [&]:p-0 [&]:leading-9', props.class)"
  />
</template>
</file>

<file path="resources/js/components/ui/popover/Popover.vue">
<script setup lang="ts">
import type { PopoverRootEmits, PopoverRootProps } from "reka-ui"
import { PopoverRoot, useForwardPropsEmits } from "reka-ui"

const props = defineProps</* @vue-ignore */ PopoverRootProps>()
const emits = defineEmits</* @vue-ignore */ PopoverRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <PopoverRoot v-bind="forwarded">
    <slot />
  </PopoverRoot>
</template>
</file>

<file path="resources/js/components/ui/radio-group/RadioGroup.vue">
<script setup lang="ts">
import type { RadioGroupRootEmits, RadioGroupRootProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { RadioGroupRoot, useForwardPropsEmits } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps</* @vue-ignore */ RadioGroupRootProps & { class?: HTMLAttributes["class"] }>()
const emits = defineEmits</* @vue-ignore */ RadioGroupRootEmits>()

const delegatedProps = reactiveOmit(props, "class")

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <RadioGroupRoot
    :class="cn('grid gap-2', props.class)"
    v-bind="forwarded"
  >
    <slot />
  </RadioGroupRoot>
</template>
</file>

<file path="resources/js/components/ui/sheet/Sheet.vue">
<script setup lang="ts">
import { DialogRoot, type DialogRootEmits, type DialogRootProps, useForwardPropsEmits } from 'reka-ui'

const props = defineProps</* @vue-ignore */ DialogRootProps>()
const emits = defineEmits</* @vue-ignore */ DialogRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <DialogRoot
    data-slot="sheet"
    v-bind="forwarded"
  >
    <slot />
  </DialogRoot>
</template>
</file>

<file path="resources/js/components/ui/sidebar/SidebarMenuButtonChild.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { cn } from '@/lib/utils'
import { Primitive, type PrimitiveProps } from 'reka-ui'
import { type SidebarMenuButtonVariants, sidebarMenuButtonVariants } from '.'

export interface SidebarMenuButtonProps extends /* @vue-ignore */ PrimitiveProps {
  variant?: SidebarMenuButtonVariants['variant']
  size?: SidebarMenuButtonVariants['size']
  isActive?: boolean
  class?: HTMLAttributes['class']
}

const props = withDefaults(defineProps<SidebarMenuButtonProps>(), {
  as: 'button',
  variant: 'default',
  size: 'default',
})
</script>

<template>
  <Primitive
    data-slot="sidebar-menu-button"
    data-sidebar="menu-button"
    :data-size="size"
    :data-active="isActive"
    :class="cn(sidebarMenuButtonVariants({ variant, size }), props.class)"
    :as="as"
    :as-child="asChild"
    v-bind="$attrs"
  >
    <slot />
  </Primitive>
</template>
</file>

<file path="resources/js/components/ui/switch/Switch.vue">
<script setup lang="ts">
import type { SwitchRootEmits, SwitchRootProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import {
  SwitchRoot,
  SwitchThumb,
  useForwardPropsEmits,
} from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps</* @vue-ignore */ SwitchRootProps & { class?: HTMLAttributes["class"] }>()

const emits = defineEmits</* @vue-ignore */ SwitchRootEmits>()

const delegatedProps = reactiveOmit(props, "class")

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <SwitchRoot
    v-bind="forwarded"
    :class="cn(
      'peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input',
      props.class,
    )"
  >
    <SwitchThumb
      :class="cn('pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5')"
    >
      <slot name="thumb" />
    </SwitchThumb>
  </SwitchRoot>
</template>
</file>

<file path="resources/js/components/ui/tabs/Tabs.vue">
<script setup lang="ts">
import type { TabsRootEmits, TabsRootProps } from "reka-ui"
import { TabsRoot, useForwardPropsEmits } from "reka-ui"

const props = defineProps</* @vue-ignore */ TabsRootProps>()
const emits = defineEmits</* @vue-ignore */ TabsRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <TabsRoot v-bind="forwarded">
    <slot />
  </TabsRoot>
</template>
</file>

<file path="resources/js/components/ui/tabs/TabsContent.vue">
<script setup lang="ts">
import type { TabsContentProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsContent } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsContentProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")
</script>

<template>
  <TabsContent
    v-cloak
    :class="cn('mt-4 ring-offset-background focus-visible:outline-none animate-in fade-in-0 duration-200', props.class)"
    v-bind="delegatedProps"
  >
    <slot />
  </TabsContent>
</template>
</file>

<file path="resources/js/components/ui/tabs/TabsList.vue">
<script setup lang="ts">
import type { TabsListProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsList } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsListProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")
</script>

<template>
  <TabsList
    v-bind="delegatedProps"
    :class="cn(
      'flex max-w-full gap-x-1 overflow-x-auto border-b border-gray-200 dark:border-white/10 py-2',
      props.class,
    )"
  >
    <slot />
  </TabsList>
</template>
</file>

<file path="resources/js/components/ui/tabs/TabsTrigger.vue">
<script setup lang="ts">
import type { TabsTriggerProps } from "reka-ui"
import type { HTMLAttributes } from "vue"
import { reactiveOmit } from "@vueuse/core"
import { TabsTrigger, useForwardProps } from "reka-ui"
import { cn } from "@/lib/utils"

const props = defineProps<TabsTriggerProps & { class?: HTMLAttributes["class"] }>()

const delegatedProps = reactiveOmit(props, "class")

const forwardedProps = useForwardProps(delegatedProps)
</script>

<template>
  <TabsTrigger
    v-bind="forwardedProps"
    :class="cn(
      'flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium gap-x-2 whitespace-nowrap transition-all duration-75 outline-none',
      'text-gray-500 dark:text-gray-400',
      'hover:bg-gray-50 dark:hover:bg-white/5',
      'focus:bg-gray-50 dark:focus:bg-white/5',
      'data-[state=active]:bg-gray-50 dark:data-[state=active]:bg-white/5',
      'data-[state=active]:text-primary-600 dark:data-[state=active]:text-primary-400',
      'disabled:pointer-events-none disabled:opacity-50',
      props.class,
    )"
  >
    <slot />
  </TabsTrigger>
</template>
</file>

<file path="resources/js/components/ui/tooltip/Tooltip.vue">
<script setup lang="ts">
import { TooltipRoot, type TooltipRootEmits, type TooltipRootProps, useForwardPropsEmits } from 'reka-ui'

const props = defineProps</* @vue-ignore */ TooltipRootProps>()
const emits = defineEmits</* @vue-ignore */ TooltipRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <TooltipRoot
    data-slot="tooltip"
    v-bind="forwarded"
  >
    <slot />
  </TooltipRoot>
</template>
</file>

<file path="resources/js/components/ui/Tabs.vue">
<script setup lang="ts">
import type { TabsRootEmits, TabsRootProps } from "reka-ui"
import { TabsRoot, useForwardPropsEmits } from "reka-ui"

const props = defineProps</* @vue-ignore */ TabsRootProps>()
const emits = defineEmits</* @vue-ignore */ TabsRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <TabsRoot v-bind="forwarded">
    <slot />
  </TabsRoot>
</template>
</file>

<file path="resources/js/components/Wizard.vue">
<template>
    <div class="wizard" :dir="rtl ? 'rtl' : 'ltr'">
        <!-- Step Indicators -->
        <div class="wizard-steps">
            <div
                v-for="(step, index) in steps"
                :key="index"
                :class="[
                    'wizard-step',
                    {
                        'active': currentStepIndex === index,
                        'completed': currentStepIndex > index
                    }
                ]"
            >
                <div class="wizard-step-indicator">
                    <span v-if="step.icon" v-html="step.icon"></span>
                    <span v-else v-text="index + 1"></span>
                </div>
                <div class="wizard-step-label">
                    <div class="wizard-step-title" v-text="step.label"></div>
                    <div v-if="step.description" class="wizard-step-description" v-text="step.description"></div>
                </div>
            </div>
        </div>

        <!-- Step Content -->
        <div class="wizard-content">
            <div
                v-for="(step, index) in steps"
                :key="index"
                v-show="currentStepIndex === index"
                class="wizard-step-content"
            >
                <component
                    v-for="(child, childIndex) in step.schema"
                    :key="childIndex"
                    :is="child.component || 'div'"
                    v-bind="child"
                />
            </div>
        </div>

        <!-- Navigation -->
        <div class="wizard-navigation">
            <button
                v-if="currentStepIndex > 0"
                type="button"
                @click="previousStep"
                class="wizard-button wizard-button-previous"
                v-text="translatedPreviousButtonLabel"
            ></button>

            <button
                v-if="skippable && !isLastStep"
                type="button"
                @click="skipStep"
                class="wizard-button wizard-button-skip"
                v-text="translatedSkipButtonLabel"
            ></button>

            <button
                v-if="!isLastStep"
                type="button"
                @click="nextStep"
                class="wizard-button wizard-button-next"
                v-text="translatedNextButtonLabel"
            ></button>

            <button
                v-if="isLastStep"
                type="submit"
                class="wizard-button wizard-button-submit"
                v-text="translatedSubmitButtonLabel"
            ></button>
        </div>
    </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import { useLocalization } from '@/composables/useLocalization';

// Initialize localization
const { trans } = useLocalization();

const props = defineProps({
    steps: {
        type: Array,
        default: () => []
    },
    currentStep: {
        type: Number,
        default: 0
    },
    skippable: {
        type: Boolean,
        default: false
    },
    submitButtonLabel: {
        type: String,
        default: 'Submit'
    },
    nextButtonLabel: {
        type: String,
        default: 'Next'
    },
    previousButtonLabel: {
        type: String,
        default: 'Previous'
    },
    skipButtonLabel: {
        type: String,
        default: 'Skip'
    },
    rtl: {
        type: Boolean,
        default: false
    },
    theme: {
        type: String,
        default: 'light'
    }
});

const currentStepIndex = ref(props.currentStep);

// Computed translated labels
const translatedSubmitButtonLabel = computed(() => props.submitButtonLabel !== 'Submit' ? props.submitButtonLabel : trans('wizard.submit_button_label'));
const translatedNextButtonLabel = computed(() => props.nextButtonLabel !== 'Next' ? props.nextButtonLabel : trans('wizard.next_button_label'));
const translatedPreviousButtonLabel = computed(() => props.previousButtonLabel !== 'Previous' ? props.previousButtonLabel : trans('wizard.previous_button_label'));
const translatedSkipButtonLabel = computed(() => props.skipButtonLabel !== 'Skip' ? props.skipButtonLabel : trans('wizard.skip_button_label'));

const isLastStep = computed(() => {
    return currentStepIndex.value === props.steps.length - 1;
});

const nextStep = () => {
    if (currentStepIndex.value < props.steps.length - 1) {
        currentStepIndex.value++;
    }
};

const previousStep = () => {
    if (currentStepIndex.value > 0) {
        currentStepIndex.value--;
    }
};

const skipStep = () => {
    if (props.skippable && currentStepIndex.value < props.steps.length - 1) {
        currentStepIndex.value++;
    }
};
</script>
</file>

<file path="resources/js/app.js">
// Plugin JavaScript
console.log('Plugin loaded: schemas');
</file>

<file path="src/Commands/InstallSchemasCommand.php">
<?php

namespace Laravilt\Schemas\Commands;

use Illuminate\Console\Command;
use Illuminate\Support\Facades\Artisan;

class InstallSchemasCommand extends Command
{
    /**
     * The name and signature of the console command.
     */
    protected $signature = 'schemas:install
                            {--force : Overwrite existing files}
                            {--without-assets : Skip asset publishing}';

    /**
     * The console command description.
     */
    protected $description = 'Install Schemas plugin';

    /**
     * Execute the console command.
     */
    public function handle(): int
    {
        $this->info('Installing {{ name }} plugin...');
        $this->newLine();

        // Publish config
        $this->publishConfig();

        $this->publishAssets();
        if (! $this->option('without-assets')) {
            $this->buildAssets();
        }
        $this->newLine();
        $this->info('âœ… {{ name }} plugin installed successfully!');
        $this->newLine();

        return self::SUCCESS;
    }

    /**
     * Publish configuration file.
     */
    protected function publishConfig(): void
    {
        $this->info('Publishing configuration...');

        $params = ['--tag' => '{{ config }}-config'];

        if ($this->option('force')) {
            $params['--force'] = true;
        }

        Artisan::call('vendor:publish', $params, $this->output);
    }

    protected function publishAssets(): void
    {
        $this->info('Publishing assets...');

        $this->call('vendor:publish', [
            '--tag' => 'schemas-assets',
            '--force' => true,
        ]);

        $this->components->success('Assets published successfully!');
    }

    protected function buildAssets(): void
    {
        $this->info('Building assets...');

        $process = Process::path(base_path('packages/laravilt/schemas'))
            ->run('npm install && npm run build');

        if ($process->successful()) {
            $this->components->success('Assets built successfully!');
        } else {
            $this->components->error('Failed to build assets: '.$process->errorOutput());
        }
    }
}
</file>

<file path="src/Components/Tab.php">
<?php

namespace Laravilt\Schemas\Components;

use Closure;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Tab extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.tab';

    protected array $schema = [];

    protected string|Closure|null $label = null;

    protected string|Closure|null $icon = null;

    protected string|Closure|null $badge = null;

    /**
     * Set up the component - auto-populate label from name if not set.
     */
    protected function setUp(): void
    {
        parent::setUp();

        // Auto-set label from name if not explicitly set
        if (is_null($this->label)) {
            $this->label = $this->name;
        }

        // Auto-generate ID from name (convert to snake_case)
        if (! $this->id) {
            $this->id($this->generateIdFromName($this->name));
        }
    }

    /**
     * Generate a snake_case ID from the name.
     */
    protected function generateIdFromName(string $name): string
    {
        // Remove translation function calls like __() or trans()
        $cleaned = preg_replace('/^(?:__|trans)\([\'"](.+?)[\'"]\)$/', '$1', $name);

        // Convert to snake_case
        $snakeCase = strtolower(preg_replace('/[^a-zA-Z0-9]+/', '_', $cleaned));

        // Remove leading/trailing underscores
        return trim($snakeCase, '_');
    }

    /**
     * Set tab label.
     */
    public function label(string|Closure $label): static
    {
        $this->label = $label;

        return $this;
    }

    /**
     * Get label.
     */
    public function getLabel(): ?string
    {
        return $this->evaluate($this->label);
    }

    /**
     * Set icon.
     */
    public function icon(string|Closure $icon): static
    {
        $this->icon = $icon;

        return $this;
    }

    /**
     * Get icon.
     */
    public function getIcon(): ?string
    {
        return $this->evaluate($this->icon);
    }

    /**
     * Set badge.
     */
    public function badge(string|Closure $badge): static
    {
        $this->badge = $badge;

        return $this;
    }

    /**
     * Get badge.
     */
    public function getBadge(): ?string
    {
        return $this->evaluate($this->badge);
    }

    /**
     * Set schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'label' => $this->getLabel(),
            'icon' => $this->getIcon(),
            'badge' => $this->getBadge(),
            'schema' => array_map(
                fn (Component $component): array => $component->toLaraviltProps(),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/Mcp/Tools/SearchDocsTool.php">
<?php

namespace Laravilt\Schemas\Mcp\Tools;

use Illuminate\JsonSchema\JsonSchema;
use Illuminate\Support\Facades\File;
use Laravel\Mcp\Request;
use Laravel\Mcp\Response;
use Laravel\Mcp\Server\Tool;

class SearchDocsTool extends Tool
{
    protected string $description = 'Search the Laravilt Schemas documentation';

    public function handle(Request $request): Response
    {
        $query = $request->string('query');
        $packagePath = base_path('packages/laravilt/schemas');

        $docFiles = $this->getDocumentationFiles($packagePath);
        $results = $this->searchDocumentation($docFiles, $query);

        if (empty($results)) {
            return Response::text("No documentation found matching '{$query}'.");
        }

        $output = "Documentation Search Results for: {$query}\n\n";
        $output .= 'Found '.count($results)." relevant section(s):\n\n";

        foreach ($results as $result) {
            $output .= "ðŸ“„ {$result['file']}\n";
            $output .= str_repeat('=', 60)."\n\n";
            $output .= $result['content']."\n\n";
            $output .= str_repeat('-', 60)."\n\n";
        }

        return Response::text($output);
    }

    public function schema(JsonSchema $schema): array
    {
        return [
            'query' => $schema->string()
                ->description('QUERY_Search the Laravilt Schemas documentation')
                ->required(),
        ];
    }

    protected function getDocumentationFiles(string $path): array
    {
        $files = [];

        if (File::exists($path.'/README.md')) {
            $files[] = [
                'path' => $path.'/README.md',
                'name' => 'README.md',
                'content' => File::get($path.'/README.md'),
            ];
        }

        $docsPath = $path.'/docs';
        if (File::isDirectory($docsPath)) {
            foreach (File::allFiles($docsPath) as $file) {
                if ($file->getExtension() === 'md') {
                    $relativePath = str_replace($path.'/', '', $file->getPathname());
                    $files[] = [
                        'path' => $file->getPathname(),
                        'name' => $relativePath,
                        'content' => File::get($file->getPathname()),
                    ];
                }
            }
        }

        return $files;
    }

    protected function searchDocumentation(array $files, string $query): array
    {
        $results = [];
        $queryLower = strtolower($query);
        $keywords = explode(' ', $queryLower);

        foreach ($files as $file) {
            $content = $file['content'];
            $contentLower = strtolower($content);

            $matchCount = 0;
            foreach ($keywords as $keyword) {
                if (stripos($contentLower, $keyword) !== false) {
                    $matchCount++;
                }
            }

            if ($matchCount > 0) {
                $sections = $this->extractRelevantSections($content, $query, $keywords);
                foreach ($sections as $section) {
                    $results[] = [
                        'file' => $file['name'],
                        'content' => $section,
                        'relevance' => $matchCount,
                    ];
                }
            }
        }

        usort($results, fn ($a, $b) => $b['relevance'] <=> $a['relevance']);

        return array_slice($results, 0, 5);
    }

    protected function extractRelevantSections(string $content, string $query, array $keywords): array
    {
        $sections = [];
        $lines = explode("\n", $content);
        $currentSection = '';
        $currentHeader = '';
        $inRelevantSection = false;

        foreach ($lines as $line) {
            if (preg_match('/^#+\s+(.+)$/', $line, $matches)) {
                if ($inRelevantSection && ! empty(trim($currentSection))) {
                    $sections[] = trim($currentHeader."\n\n".$currentSection);
                }

                $currentHeader = $line;
                $currentSection = '';
                $headerLower = strtolower($matches[1]);
                $inRelevantSection = false;
                foreach ($keywords as $keyword) {
                    if (stripos($headerLower, $keyword) !== false) {
                        $inRelevantSection = true;
                        break;
                    }
                }
            } else {
                $currentSection .= $line."\n";
                if (! $inRelevantSection) {
                    $lineLower = strtolower($line);
                    foreach ($keywords as $keyword) {
                        if (stripos($lineLower, $keyword) !== false) {
                            $inRelevantSection = true;
                            break;
                        }
                    }
                }
            }
        }

        if ($inRelevantSection && ! empty(trim($currentSection))) {
            $sections[] = trim($currentHeader."\n\n".$currentSection);
        }

        return $sections;
    }
}
</file>

<file path="src/Mcp/LaraviltSchemasServer.php">
<?php

namespace Laravilt\Schemas\Mcp;

use Laravel\Mcp\Server;
use Laravilt\Schemas\Mcp\Tools\GenerateSchemaTool;
use Laravilt\Schemas\Mcp\Tools\SearchDocsTool;

class LaraviltSchemasServer extends Server
{
    protected string $name = 'Laravilt Schemas';

    protected string $version = '1.0.0';

    protected string $instructions = <<<'MARKDOWN'
        This server provides schema layout capabilities for Laravilt projects.

        You can:
        - Generate new schema classes
        - Search schemas documentation
        - Access information about layout components (sections, tabs, grids)

        Schemas organize form fields and information displays with sections, tabs, and grids.
    MARKDOWN;

    protected array $tools = [
        GenerateSchemaTool::class,
        SearchDocsTool::class,
    ];
}
</file>

<file path="tests/Unit/ColumnsTest.php">
<?php

use Laravilt\Schemas\Components\Columns;

beforeEach(function () {
    $this->columns = Columns::make('test-columns');
});

it('can be instantiated with make method', function () {
    $columns = Columns::make('test');

    expect($columns)->toBeInstanceOf(Columns::class)
        ->and($columns->getName())->toBe('test');
});

it('can set and get schema', function () {
    $component1 = createTestComponent('child1');
    $component2 = createTestComponent('child2');

    $this->columns->schema([$component1, $component2]);

    expect($this->columns->getSchema())->toHaveCount(2)
        ->and($this->columns->getSchema()[0])->toBe($component1)
        ->and($this->columns->getSchema()[1])->toBe($component2);
});

it('serializes schema to laravilt props', function () {
    $component1 = createTestComponent('child1');
    $component1->label('First Component');

    $component2 = createTestComponent('child2');
    $component2->label('Second Component');

    $this->columns->schema([$component1, $component2]);

    $props = $this->columns->toLaraviltProps();

    expect($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(2)
        ->and($props['schema'][0]['label'])->toBe('First Component')
        ->and($props['schema'][1]['label'])->toBe('Second Component');
});

it('inherits Support Component traits', function () {
    $this->columns
        ->label('Test Columns')
        ->helperText('Helper text')
        ->disabled();

    expect($this->columns->getLabel())->toBe('Test Columns')
        ->and($this->columns->getHelperText())->toBe('Helper text')
        ->and($this->columns->isDisabled())->toBeTrue();
});

it('supports method chaining', function () {
    $result = $this->columns
        ->label('Test')
        ->schema([]);

    expect($result)->toBe($this->columns);
});

it('converts to array', function () {
    $array = $this->columns->toArray();

    expect($array)->toBeArray()
        ->and($array)->toHaveKey('component')
        ->and($array)->toHaveKey('schema');
});
</file>

<file path="tests/Unit/FieldsetTest.php">
<?php

use Laravilt\Schemas\Components\Fieldset;

beforeEach(function () {
    $this->fieldset = Fieldset::make('test-fieldset');
});

it('can be instantiated with make method', function () {
    $fieldset = Fieldset::make('test');

    expect($fieldset)->toBeInstanceOf(Fieldset::class)
        ->and($fieldset->getName())->toBe('test');
});

it('can set and get label', function () {
    $this->fieldset->label('Test Label');

    expect($this->fieldset->getLabel())->toBe('Test Label');
});

it('can set and get legend', function () {
    $this->fieldset->legend('Test Legend');

    expect($this->fieldset->getLegend())->toBe('Test Legend');
});

it('legend is an alias for label', function () {
    $this->fieldset->legend('Test Legend');

    expect($this->fieldset->getLabel())->toBe('Test Legend')
        ->and($this->fieldset->getLegend())->toBe('Test Legend');
});

it('supports closures for label', function () {
    $this->fieldset->label(fn () => 'Dynamic Label');

    expect($this->fieldset->getLabel())->toBe('Dynamic Label');
});

it('supports closures for legend', function () {
    $this->fieldset->legend(fn () => 'Dynamic Legend');

    expect($this->fieldset->getLegend())->toBe('Dynamic Legend');
});

it('can set and get schema', function () {
    $component = createTestComponent('child');

    $this->fieldset->schema([$component]);

    expect($this->fieldset->getSchema())->toHaveCount(1)
        ->and($this->fieldset->getSchema()[0])->toBe($component);
});

it('serializes all properties to laravilt props', function () {
    $component = createTestComponent('child');
    $component->label('Child Component');

    $this->fieldset
        ->legend('Fieldset Legend')
        ->schema([$component]);

    $props = $this->fieldset->toLaraviltProps();

    expect($props)->toHaveKey('label')
        ->and($props['label'])->toBe('Fieldset Legend')
        ->and($props)->toHaveKey('legend')
        ->and($props['legend'])->toBe('Fieldset Legend')
        ->and($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(1)
        ->and($props['schema'][0]['label'])->toBe('Child Component');
});

it('supports method chaining', function () {
    $result = $this->fieldset
        ->legend('Test')
        ->schema([]);

    expect($result)->toBe($this->fieldset);
});
</file>

<file path="tests/Unit/GridTest.php">
<?php

use Laravilt\Schemas\Components\Grid;

beforeEach(function () {
    $this->grid = Grid::make('test-grid');
});

it('can be instantiated with make method', function () {
    $grid = Grid::make('test');

    expect($grid)->toBeInstanceOf(Grid::class)
        ->and($grid->getName())->toBe('test');
});

it('has default single column', function () {
    expect($this->grid->getColumns())->toBe(1);
});

it('can set columns as integer', function () {
    $this->grid->columns(3);

    expect($this->grid->getColumns())->toBe(3);
});

it('can set responsive columns as array', function () {
    $columns = [
        'default' => 1,
        'sm' => 2,
        'md' => 3,
        'lg' => 4,
    ];

    $this->grid->columns($columns);

    expect($this->grid->getColumns())->toBe($columns)
        ->and($this->grid->getColumns()['sm'])->toBe(2)
        ->and($this->grid->getColumns()['lg'])->toBe(4);
});

it('can set and get schema', function () {
    $component = createTestComponent('child');

    $this->grid->schema([$component]);

    expect($this->grid->getSchema())->toHaveCount(1)
        ->and($this->grid->getSchema()[0])->toBe($component);
});

it('serializes columns and schema to laravilt props', function () {
    $component = createTestComponent('child');
    $component->label('Child Component');

    $this->grid
        ->columns(2)
        ->schema([$component]);

    $props = $this->grid->toLaraviltProps();

    expect($props)->toHaveKey('columns')
        ->and($props['columns'])->toBe(2)
        ->and($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(1)
        ->and($props['schema'][0]['label'])->toBe('Child Component');
});

it('serializes responsive columns to laravilt props', function () {
    $columns = [
        'default' => 1,
        'md' => 3,
    ];

    $this->grid->columns($columns);
    $props = $this->grid->toLaraviltProps();

    expect($props['columns'])->toBe($columns)
        ->and($props['columns']['default'])->toBe(1)
        ->and($props['columns']['md'])->toBe(3);
});

it('supports method chaining', function () {
    $result = $this->grid
        ->columns(3)
        ->label('Test Grid')
        ->schema([]);

    expect($result)->toBe($this->grid);
});
</file>

<file path="tests/Unit/SectionTest.php">
<?php

use Laravilt\Schemas\Components\Section;

beforeEach(function () {
    $this->section = Section::make('test-section');
});

it('can be instantiated with make method', function () {
    $section = Section::make('test');

    expect($section)->toBeInstanceOf(Section::class)
        ->and($section->getName())->toBe('test');
});

it('can set and get heading', function () {
    $this->section->heading('Test Heading');

    expect($this->section->getHeading())->toBe('Test Heading');
});

it('can set and get description', function () {
    $this->section->description('Test Description');

    expect($this->section->getDescription())->toBe('Test Description');
});

it('can set and get icon', function () {
    $this->section->icon('heroicon-o-user');

    expect($this->section->getIcon())->toBe('heroicon-o-user');
});

it('supports closures for heading', function () {
    $this->section->heading(fn () => 'Dynamic Heading');

    expect($this->section->getHeading())->toBe('Dynamic Heading');
});

it('supports closures for description', function () {
    $this->section->description(fn () => 'Dynamic Description');

    expect($this->section->getDescription())->toBe('Dynamic Description');
});

it('can be collapsible', function () {
    $this->section->collapsible();

    expect($this->section->isCollapsible())->toBeTrue();
});

it('can be collapsed by default', function () {
    $this->section->collapsible()->collapsed();

    expect($this->section->isCollapsed())->toBeTrue();
});

it('is not collapsible by default', function () {
    expect($this->section->isCollapsible())->toBeFalse()
        ->and($this->section->isCollapsed())->toBeFalse();
});

it('can set and get schema', function () {
    $component = createTestComponent('child');

    $this->section->schema([$component]);

    expect($this->section->getSchema())->toHaveCount(1)
        ->and($this->section->getSchema()[0])->toBe($component);
});

it('serializes all properties to laravilt props', function () {
    $component = createTestComponent('child');
    $component->label('Child Component');

    $this->section
        ->heading('Section Heading')
        ->description('Section Description')
        ->icon('heroicon-o-information-circle')
        ->collapsible()
        ->collapsed()
        ->schema([$component]);

    $props = $this->section->toLaraviltProps();

    expect($props)->toHaveKey('heading')
        ->and($props['heading'])->toBe('Section Heading')
        ->and($props)->toHaveKey('description')
        ->and($props['description'])->toBe('Section Description')
        ->and($props)->toHaveKey('icon')
        ->and($props['icon'])->toBe('heroicon-o-information-circle')
        ->and($props)->toHaveKey('collapsible')
        ->and($props['collapsible'])->toBeTrue()
        ->and($props)->toHaveKey('collapsed')
        ->and($props['collapsed'])->toBeTrue()
        ->and($props)->toHaveKey('schema')
        ->and($props['schema'])->toHaveCount(1);
});

it('supports method chaining', function () {
    $result = $this->section
        ->heading('Test')
        ->description('Description')
        ->collapsible()
        ->schema([]);

    expect($result)->toBe($this->section);
});
</file>

<file path="tests/Unit/SplitTest.php">
<?php

use Laravilt\Schemas\Components\Split;

beforeEach(function () {
    $this->split = Split::make('test-split');
});

it('can be instantiated with make method', function () {
    $split = Split::make('test');

    expect($split)->toBeInstanceOf(Split::class)
        ->and($split->getName())->toBe('test');
});

it('can set and get start schema', function () {
    $component = createTestComponent('child');

    $this->split->startSchema([$component]);

    expect($this->split->getStartSchema())->toHaveCount(1)
        ->and($this->split->getStartSchema()[0])->toBe($component);
});

it('can set and get end schema', function () {
    $component = createTestComponent('child');

    $this->split->endSchema([$component]);

    expect($this->split->getEndSchema())->toHaveCount(1)
        ->and($this->split->getEndSchema()[0])->toBe($component);
});

it('supports leftSchema alias for startSchema', function () {
    $component = createTestComponent('child');

    $this->split->leftSchema([$component]);

    expect($this->split->getLeftSchema())->toHaveCount(1)
        ->and($this->split->getStartSchema())->toHaveCount(1);
});

it('supports rightSchema alias for endSchema', function () {
    $component = createTestComponent('child');

    $this->split->rightSchema([$component]);

    expect($this->split->getRightSchema())->toHaveCount(1)
        ->and($this->split->getEndSchema())->toHaveCount(1);
});

it('can set from breakpoint', function () {
    $this->split->fromBreakpoint('lg');

    expect($this->split->getFromBreakpoint())->toBe('lg');
});

it('has default breakpoint as md', function () {
    expect($this->split->getFromBreakpoint())->toBe('md');
});

it('can set start column span', function () {
    $this->split->startColumnSpan(4);

    $props = $this->split->toLaraviltProps();
    expect($props['startColumnSpan'])->toBe(4);
});

it('can set end column span', function () {
    $this->split->endColumnSpan(8);

    $props = $this->split->toLaraviltProps();
    expect($props['endColumnSpan'])->toBe(8);
});

it('has default column spans', function () {
    $props = $this->split->toLaraviltProps();

    expect($props['startColumnSpan'])->toBe('md:col-span-6')
        ->and($props['endColumnSpan'])->toBe('md:col-span-6');
});

it('serializes all schemas to laravilt props', function () {
    $start = createTestComponent('start');
    $start->label('Start Component');

    $end = createTestComponent('end');
    $end->label('End Component');

    $this->split
        ->startSchema([$start])
        ->endSchema([$end])
        ->fromBreakpoint('lg');

    $props = $this->split->toLaraviltProps();

    expect($props)->toHaveKey('startSchema')
        ->and($props['startSchema'])->toHaveCount(1)
        ->and($props['startSchema'][0]['label'])->toBe('Start Component')
        ->and($props)->toHaveKey('endSchema')
        ->and($props['endSchema'])->toHaveCount(1)
        ->and($props['endSchema'][0]['label'])->toBe('End Component')
        ->and($props)->toHaveKey('leftSchema')
        ->and($props['leftSchema'])->toHaveCount(1)
        ->and($props)->toHaveKey('rightSchema')
        ->and($props['rightSchema'])->toHaveCount(1)
        ->and($props)->toHaveKey('fromBreakpoint')
        ->and($props['fromBreakpoint'])->toBe('lg');
});

it('supports method chaining', function () {
    $result = $this->split
        ->startSchema([])
        ->endSchema([])
        ->fromBreakpoint('lg')
        ->startColumnSpan(4)
        ->endColumnSpan(8);

    expect($result)->toBe($this->split);
});
</file>

<file path="tests/TestCase.php">
<?php

namespace Laravilt\Schemas\Tests;

use Orchestra\Testbench\TestCase as Orchestra;

class TestCase extends Orchestra
{
    protected function setUp(): void
    {
        parent::setUp();

        // Additional setup if needed
    }

    protected function getPackageProviders($app): array
    {
        return [
            \Laravilt\Support\SupportServiceProvider::class,
            \Laravilt\Schemas\SchemasServiceProvider::class,
        ];
    }

    protected function getEnvironmentSetUp($app): void
    {
        // Setup environment for testing
        config()->set('database.default', 'testing');
    }
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve, dirname } from 'path'
import { fileURLToPath } from 'url'

const __filename = fileURLToPath(import.meta.url)
const __dirname = dirname(__filename)

export default defineConfig({
  plugins: [vue()],
  build: {
    lib: {
      entry: resolve(__dirname, 'resources/js/app.ts'),
      name: 'LaraviltSchemas',
      formats: ['es', 'umd'],
      fileName: (format) => `schemas.${format}.js`,
    },
    rollupOptions: {
      external: ['vue', '@inertiajs/vue3', 'radix-vue', 'reka-ui', 'lucide-vue-next', 'tailwind-merge', 'clsx', 'class-variance-authority', '@vueuse/core', /@laravilt\/.*/],
      output: {
        globals: {
          vue: 'Vue',
          '@inertiajs/vue3': 'InertiaVue3',
          'radix-vue': 'RadixVue',
          'reka-ui': 'RekaUI',
          'lucide-vue-next': 'LucideVueNext',
          'tailwind-merge': 'TailwindMerge',
          clsx: 'clsx',
          'class-variance-authority': 'ClassVarianceAuthority',
          '@vueuse/core': 'VueUseCore',
        },
        assetFileNames: (assetInfo) => {
          if (assetInfo.name === 'style.css') return 'style.css'
          return assetInfo.name as string
        },
      },
    },
    outDir: 'dist',
    emptyOutDir: true,
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, 'resources/js'),
    },
  },
})
</file>

<file path="resources/js/components/ui/sheet/SheetContent.vue">
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { computed } from 'vue'
import { cn } from '@/lib/utils'
import { reactiveOmit } from '@vueuse/core'
import { X } from 'lucide-vue-next'
import {
  DialogClose,
  DialogContent,
  type DialogContentEmits,
  type DialogContentProps,
  DialogPortal,
  useForwardPropsEmits,
} from 'reka-ui'
import SheetOverlay from './SheetOverlay.vue'
import { useLocalization } from '@laravilt/support/composables'

interface SheetContentProps extends /* @vue-ignore */ DialogContentProps {
  class?: HTMLAttributes['class']
  side?: 'top' | 'right' | 'bottom' | 'left'
}

defineOptions({
  inheritAttrs: false,
})

const props = withDefaults(defineProps<SheetContentProps>(), {
  side: 'right',
})
const emits = defineEmits<DialogContentEmits>()

const { isRtl } = useLocalization()

// Compute effective side - flip left/right for RTL
const effectiveSide = computed(() => {
  if (!isRtl.value) return props.side
  if (props.side === 'left') return 'right'
  if (props.side === 'right') return 'left'
  return props.side
})

const delegatedProps = reactiveOmit(props, 'class', 'side')

const forwarded = useForwardPropsEmits(delegatedProps, emits)
</script>

<template>
  <DialogPortal>
    <SheetOverlay />
    <DialogContent
      data-slot="sheet-content"
      :class="cn(
        'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
        effectiveSide === 'right'
          && 'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',
        effectiveSide === 'left'
          && 'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',
        effectiveSide === 'top'
          && 'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',
        effectiveSide === 'bottom'
          && 'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',
        props.class)"
      v-bind="{ ...forwarded, ...$attrs }"
    >
      <slot />

      <DialogClose
        class="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 end-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none"
      >
        <X class="size-4" />
        <span class="sr-only">Close</span>
      </DialogClose>
    </DialogContent>
  </DialogPortal>
</template>
</file>

<file path="src/Components/Section.php">
<?php

namespace Laravilt\Schemas\Components;

use Closure;
use Laravilt\Schemas\Concerns\CanBeCollapsible;
use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Section extends Component
{
    use CanBeCollapsible;
    use HasSchema;

    protected string $view = 'laravilt-schemas::components.section';

    protected array $schema = [];

    protected string|Closure|null $heading = null;

    protected string|Closure|null $description = null;

    protected string|Closure|null $icon = null;

    protected int|array|null $columns = null;

    /**
     * Create a new section instance. Name is optional for sections.
     */
    public static function make(?string $name = null): static
    {
        $static = app(static::class);
        $static->name = $name ?? 'section';
        $static->setUp();

        return $static;
    }

    /**
     * Set up the component - auto-populate heading from name if not set.
     */
    protected function setUp(): void
    {
        parent::setUp();

        // Auto-set heading from name if not explicitly set (but not if name is 'section')
        if (is_null($this->heading) && $this->name !== 'section') {
            $this->heading = $this->name;
        }

        // Auto-generate ID from name (convert to snake_case)
        if (! $this->id && $this->name) {
            $this->id($this->generateIdFromName($this->name));
        }
    }

    /**
     * Generate a snake_case ID from the name.
     */
    protected function generateIdFromName(string $name): string
    {
        // Remove translation function calls like __() or trans()
        $cleaned = preg_replace('/^(?:__|trans)\([\'"](.+?)[\'"]\)$/', '$1', $name);

        // Convert to snake_case
        $snakeCase = strtolower(preg_replace('/[^a-zA-Z0-9]+/', '_', $cleaned));

        // Remove leading/trailing underscores
        return trim($snakeCase, '_');
    }

    /**
     * Set the section heading.
     */
    public function heading(string|Closure $heading): static
    {
        $this->heading = $heading;

        return $this;
    }

    /**
     * Get the heading.
     */
    public function getHeading(): ?string
    {
        return $this->evaluate($this->heading);
    }

    /**
     * Set the description.
     */
    public function description(string|Closure $description): static
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get the description.
     */
    public function getDescription(): ?string
    {
        return $this->evaluate($this->description);
    }

    /**
     * Set the icon.
     */
    public function icon(string|Closure $icon): static
    {
        $this->icon = $icon;

        return $this;
    }

    /**
     * Get the icon.
     */
    public function getIcon(): ?string
    {
        return $this->evaluate($this->icon);
    }

    /**
     * Set the number of columns.
     */
    public function columns(int|array $columns): static
    {
        $this->columns = $columns;

        return $this;
    }

    /**
     * Get the number of columns.
     */
    public function getColumns(): int|array|null
    {
        return $this->columns;
    }

    /**
     * Set the schema.
     *
     * @param  array<Component>  $components
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Serialize to Laravilt props.
     */
    public function toLaraviltProps(): array
    {
        return array_merge(parent::toLaraviltProps(), [
            'heading' => $this->getHeading(),
            'description' => $this->getDescription(),
            'icon' => $this->getIcon(),
            'columns' => $this->getColumns(),
            'collapsible' => $this->isCollapsible(),
            'collapsed' => $this->isCollapsed(),
            'schema' => array_map(
                fn ($component): array => method_exists($component, 'toLaraviltProps')
                    ? $component->toLaraviltProps()
                    : (method_exists($component, 'toArray') ? $component->toArray() : []),
                $this->getSchema()
            ),
        ]);
    }
}
</file>

<file path="src/SchemasServiceProvider.php">
<?php

namespace Laravilt\Schemas;

use Illuminate\Support\ServiceProvider;

class SchemasServiceProvider extends ServiceProvider
{
    /**
     * Register services.
     */
    public function register(): void
    {
        // Merge config
        $this->mergeConfigFrom(
            __DIR__.'/../config/laravilt-schemas.php',
            'laravilt-schemas'
        );
    }

    /**
     * Boot services.
     */
    public function boot(): void
    {
        // Load views
        $this->loadViewsFrom(__DIR__.'/../resources/views', 'laravilt-schemas');

        // Load translations
        $this->loadTranslationsFrom(__DIR__.'/../resources/lang', 'laravilt-schemas');

        if ($this->app->runningInConsole()) {
            // Publish config
            $this->publishes([
                __DIR__.'/../config/laravilt-schemas.php' => config_path('laravilt-schemas.php'),
            ], 'laravilt-schemas-config');

            // Publish assets
            $this->publishes([
                __DIR__.'/../dist' => public_path('vendor/laravilt/schemas'),
            ], 'laravilt-schemas-assets');

            // Publish views
            $this->publishes([
                __DIR__.'/../resources/views' => resource_path('views/vendor/laravilt-schemas'),
            ], 'laravilt-schemas-views');

            // Publish translations
            $this->publishes([
                __DIR__.'/../resources/lang' => lang_path('vendor/laravilt-schemas'),
            ], 'laravilt-schemas-translations');

            // Register commands
            $this->commands([
                Commands\InstallSchemasCommand::class,
                Commands\MakeSchemaCommand::class,
            ]);
        }
    }
}
</file>

<file path="tests/Pest.php">
<?php

use Laravilt\Schemas\Tests\TestCase;
use Laravilt\Support\Component;

uses(TestCase::class)->in(__DIR__);

/*
|--------------------------------------------------------------------------
| Helper Functions
|--------------------------------------------------------------------------
*/

// Helper function to create test components properly initialized
function createTestComponent(string $name): Component
{
    return new class($name) extends Component
    {
        protected string $view = 'test-view';

        public function __construct(string $name)
        {
            $this->name = $name;
            $this->setUp();
        }
    };
}
</file>

<file path="resources/js/components/Tabs.vue">
<template>
    <Tabs :default-value="String(activeTab || 0)" :dir="dir" class="w-full" @update:model-value="handleTabChange">
        <TabsList class="w-full justify-start">
            <TabsTrigger
                v-for="(tab, index) in tabs"
                :key="index"
                :value="String(index)"
                class="gap-2"
            >
                <component
                    v-if="tab.icon && getIconComponent(tab.icon)"
                    :is="getIconComponent(tab.icon)"
                    class="h-4 w-4"
                />
                <span>{{ tab.label }}</span>
                <span
                    v-if="tab.badge"
                    class="ms-1 inline-flex items-center justify-center px-2 py-0.5 text-xs font-medium rounded-full bg-primary/10 text-primary"
                >
                    {{ tab.badge }}
                </span>
            </TabsTrigger>
        </TabsList>

        <TabsContent
            v-for="(tab, index) in tabs"
            :key="index"
            :value="String(index)"
            class="space-y-6 mt-6"
        >
            <!-- Skeleton while loading -->
            <Transition
                enter-active-class="transition-opacity duration-150 ease-out"
                enter-from-class="opacity-0"
                enter-to-class="opacity-100"
                leave-active-class="transition-opacity duration-100 ease-in"
                leave-from-class="opacity-100"
                leave-to-class="opacity-0"
                mode="out-in"
            >
                <div v-if="isLoading && currentTab === String(index)" key="skeleton" class="space-y-6">
                    <div class="bg-card rounded-xl border shadow-sm p-6 space-y-4">
                        <div class="h-4 bg-muted/60 rounded w-1/4 animate-pulse"></div>
                        <div class="space-y-3">
                            <div class="h-10 bg-muted/60 rounded animate-pulse" style="animation-delay: 0ms"></div>
                            <div class="h-10 bg-muted/60 rounded animate-pulse" style="animation-delay: 75ms"></div>
                            <div class="h-10 bg-muted/60 rounded w-3/4 animate-pulse" style="animation-delay: 150ms"></div>
                        </div>
                    </div>
                </div>

                <!-- Actual content -->
                <Schema
                    v-else-if="tab.schema"
                    key="content"
                    :schema="tab.schema"
                    :model-value="modelValue"
                    @update:model-value="(value) => emit('update:modelValue', value)"
                />
            </Transition>
        </TabsContent>
    </Tabs>
</template>

<script setup lang="ts">
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import Schema from './Schema.vue'
import * as LucideIcons from 'lucide-vue-next'
import { ref, onMounted, onUnmounted, nextTick, Transition } from 'vue'

const props = defineProps<{
    tabs: Array<any>
    activeTab?: number
    persistTabInQueryString?: boolean
    modelValue?: Record<string, any>
}>()

const isLoading = ref(false)
const currentTab = ref(String(props.activeTab || 0))

const handleTabChange = async (value: string) => {
    if (value !== currentTab.value) {
        isLoading.value = true
        currentTab.value = value
        await nextTick()
        // Small delay to show skeleton
        setTimeout(() => {
            isLoading.value = false
        }, 150)
    }
}

// Reactive document direction for RTL support
const dir = ref<'ltr' | 'rtl'>('ltr')
let observer: MutationObserver | null = null

onMounted(() => {
    // Set initial direction
    dir.value = (document.documentElement.dir as 'ltr' | 'rtl') || 'ltr'

    // Watch for direction changes on the html element
    observer = new MutationObserver((mutations) => {
        for (const mutation of mutations) {
            if (mutation.attributeName === 'dir') {
                dir.value = (document.documentElement.dir as 'ltr' | 'rtl') || 'ltr'
            }
        }
    })

    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['dir']
    })
})

onUnmounted(() => {
    if (observer) {
        observer.disconnect()
        observer = null
    }
})

const emit = defineEmits<{
    'update:modelValue': [value: Record<string, any>]
}>()

// Convert kebab-case or snake_case icon names to PascalCase for lucide-vue-next
const getIconComponent = (iconName: string) => {
    if (!iconName) return null

    // Convert formats like 'user', 'file-text', 'user-circle' to PascalCase
    const pascalCase = iconName
        .split(/[-_]/)
        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
        .join('')

    return (LucideIcons as any)[pascalCase] || null
}
</script>
</file>

<file path="README.md">
![schemas](https://raw.githubusercontent.com/laravilt/schemas/master/arts/screenshot.jpg)

# Laravilt Schemas

[![Latest Stable Version](https://poser.pugx.org/laravilt/schemas/version.svg)](https://packagist.org/packages/laravilt/schemas)
[![License](https://poser.pugx.org/laravilt/schemas/license.svg)](https://packagist.org/packages/laravilt/schemas)
[![Downloads](https://poser.pugx.org/laravilt/schemas/d/total.svg)](https://packagist.org/packages/laravilt/schemas)
[![Dependabot Updates](https://github.com/laravilt/schemas/actions/workflows/dependabot/dependabot-updates/badge.svg)](https://github.com/laravilt/schemas/actions/workflows/dependabot/dependabot-updates)
[![PHP Code Styling](https://github.com/laravilt/schemas/actions/workflows/fix-php-code-styling.yml/badge.svg)](https://github.com/laravilt/schemas/actions/workflows/fix-php-code-styling.yml)
[![Tests](https://github.com/laravilt/schemas/actions/workflows/tests.yml/badge.svg)](https://github.com/laravilt/schemas/actions/workflows/tests.yml)



Complete schema system with sections, tabs, grids, and layout components for Laravilt. Organize form fields and information displays with powerful layout components.

## Features

- ðŸ“¦ **Layout Components** - Section, Tabs, Grid, Fieldset
- ðŸŽ¨ **Section Features** - Collapsible, icons, headers, footers, aside layout
- ðŸ“‘ **Tab Features** - Multiple tabs, icons, badges, lazy loading
- ðŸ“ **Grid Features** - 1-12 column layouts, responsive spans
- âš¡ **Reactivity** - Conditional visibility, dynamic fields, state management
- ðŸ”„ **Nested Schemas** - Support for deeply nested layouts

## Installation

```bash
composer require laravilt/schemas
```

## Generator Command

```bash
php artisan make:schema ProductSchema
```

## Documentation

- **[Complete Documentation](docs/index.md)** - All layout components and features
- **[MCP Server Guide](docs/mcp-server.md)** - AI agent integration

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.
</file>

<file path="resources/js/components/Grid.vue">
<template>
    <div v-if="schema && schema.length > 0" :class="gridClasses">
        <div
            v-for="(child, index) in schema"
            :key="child.name || child.id || index"
            :class="getColumnSpanClass(child)"
        >
            <Schema
                :schema="[child]"
                :model-value="modelValue"
                @update:model-value="$emit('update:modelValue', $event)"
            />
        </div>
    </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import Schema from './Schema.vue'

const props = defineProps<{
    columns: number | Record<string, number>
    schema: Array<any>
    modelValue?: Record<string, any>
}>()

const emit = defineEmits<{
    'update:modelValue': [value: Record<string, any>]
}>()

const gridClasses = computed(() => {
    const classes = ['grid', 'gap-6']

    if (typeof props.columns === 'number') {
        classes.push(`grid-cols-1`)
        if (props.columns > 1) {
            classes.push(`md:grid-cols-${props.columns}`)
        }
    } else if (typeof props.columns === 'object') {
        if (props.columns.default) classes.push(`grid-cols-${props.columns.default}`)
        if (props.columns.sm) classes.push(`sm:grid-cols-${props.columns.sm}`)
        if (props.columns.md) classes.push(`md:grid-cols-${props.columns.md}`)
        if (props.columns.lg) classes.push(`lg:grid-cols-${props.columns.lg}`)
        if (props.columns.xl) classes.push(`xl:grid-cols-${props.columns.xl}`)
    }

    return classes.join(' ')
})

const getColumnSpanClass = (child: any): string => {
    if (!child.columnSpan) return ''

    // Handle 'full' string value from columnSpanFull()
    if (child.columnSpan === 'full') {
        return 'col-span-full'
    }

    if (typeof child.columnSpan === 'number') {
        return `col-span-${child.columnSpan}`
    }

    if (typeof child.columnSpan === 'object') {
        const classes: string[] = []
        if (child.columnSpan.default) classes.push(`col-span-${child.columnSpan.default}`)
        if (child.columnSpan.sm) classes.push(`sm:col-span-${child.columnSpan.sm}`)
        if (child.columnSpan.md) classes.push(`md:col-span-${child.columnSpan.md}`)
        if (child.columnSpan.lg) classes.push(`lg:col-span-${child.columnSpan.lg}`)
        return classes.join(' ')
    }

    return ''
}
</script>
</file>

<file path="resources/js/components/Section.vue">
<template>
    <div class="bg-card text-card-foreground rounded-xl border shadow-sm">
        <!-- Section Header -->
        <header v-if="heading" :class="['px-6 py-4 transition-all duration-200', isCollapsed ? '' : 'border-b']">
            <div
                :class="[
                    'flex items-center gap-3',
                    collapsible ? 'cursor-pointer select-none' : ''
                ]"
                @click="collapsible && toggleCollapse()"
            >
                <div
                    v-if="icon && getIconComponent(icon)"
                    class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10 text-primary flex-shrink-0"
                >
                    <component
                        :is="getIconComponent(icon)"
                        class="h-5 w-5"
                    />
                </div>
                <div class="flex-1 min-w-0">
                    <h3 class="leading-none font-semibold">
                        {{ heading }}
                    </h3>
                    <p v-if="description" class="mt-1 text-sm text-muted-foreground">
                        {{ description }}
                    </p>
                </div>
                <ChevronDown
                    v-if="collapsible"
                    :class="[
                        'h-4 w-4 text-muted-foreground transition-transform duration-200 ease-out flex-shrink-0',
                        isCollapsed ? '-rotate-90 rtl:rotate-90' : ''
                    ]"
                />
            </div>
        </header>

        <!-- Section Content with smooth collapse -->
        <div
            class="grid transition-all duration-200 ease-out"
            :style="{ gridTemplateRows: isCollapsed ? '0fr' : '1fr' }"
        >
            <div class="overflow-hidden">
                <div class="p-6 space-y-6">
                    <Schema
                        v-if="schema && schema.length > 0"
                        :schema="schema"
                        :model-value="modelValue"
                        @update:model-value="$emit('update:modelValue', $event)"
                    />
                </div>
            </div>
        </div>
    </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { ChevronDown } from 'lucide-vue-next'
import * as LucideIcons from 'lucide-vue-next'
import Schema from './Schema.vue'

const props = defineProps<{
    heading?: string
    description?: string
    icon?: string
    collapsible?: boolean
    collapsed?: boolean
    schema?: Array<any>
    modelValue?: Record<string, any>
}>()

const emit = defineEmits<{
    'update:modelValue': [value: Record<string, any>]
}>()

const isCollapsed = ref(props.collapsed || false)

const toggleCollapse = () => {
    if (props.collapsible) {
        isCollapsed.value = !isCollapsed.value
    }
}

// Convert kebab-case or snake_case icon names to PascalCase for lucide-vue-next
const getIconComponent = (iconName: string) => {
    if (!iconName) return null

    // Convert formats like 'user', 'id-card', 'map-pin' to PascalCase
    const pascalCase = iconName
        .split(/[-_]/)
        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
        .join('')

    return (LucideIcons as any)[pascalCase] || null
}
</script>
</file>

<file path="src/Schema.php">
<?php

namespace Laravilt\Schemas;

use Laravilt\Schemas\Concerns\HasSchema;
use Laravilt\Support\Component;

class Schema extends Component
{
    use HasSchema;

    protected string $view = 'laravilt-schemas::schema';

    protected array $schema = [];

    protected array $data = [];

    protected int $gridColumns = 1;

    /**
     * Create a new schema instance.
     * Override parent to make name optional.
     */
    public static function make(?string $name = null): static
    {
        $static = app(static::class);
        $static->name = $name ?? 'schema';
        $static->setUp();

        return $static;
    }

    /**
     * Set the schema components.
     */
    public function schema(array $components): static
    {
        $this->schema = $components;

        return $this;
    }

    /**
     * Get the schema components.
     */
    public function getSchema(): array
    {
        return $this->schema;
    }

    /**
     * Set the number of columns for the schema grid layout.
     */
    public function columns(int $columns): static
    {
        $this->gridColumns = $columns;

        return $this;
    }

    /**
     * Get the number of grid columns.
     */
    public function getGridColumns(): int
    {
        return $this->gridColumns;
    }

    /**
     * Fill the schema with data.
     */
    public function fill(array $data): static
    {
        $this->data = $data;

        // Fill each component/entry with the data
        $this->fillComponents($this->schema, $data);

        return $this;
    }

    /**
     * Recursively fill components with data.
     */
    protected function fillComponents(array $components, array $data): void
    {
        foreach ($components as $component) {
            // If component has a fill method (like Entry), call it
            if (method_exists($component, 'getName') && method_exists($component, 'state')) {
                $name = $component->getName();
                $value = $data[$name] ?? null;

                // Set state - the component will handle null values (e.g., Entry uses placeholder)
                $component->state($value);
            }

            // Handle nested schemas (Sections, Grids, Tabs, etc.)
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $this->fillComponents($nestedSchema, $data);
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $this->fillComponents($tabSchema, $data);
                            }
                        }
                    }
                }
            }
        }
    }

    /**
     * Get the data.
     */
    public function getData(): array
    {
        return $this->data;
    }

    /**
     * Get all visible components in the schema.
     */
    public function getVisibleComponents(): array
    {
        return array_filter($this->schema, function ($item): bool {
            // Support both Components and Actions
            if (method_exists($item, 'isHidden')) {
                return ! $item->isHidden();
            }

            return true;
        });
    }

    /**
     * Serialize to Inertia props (for page rendering).
     */
    public function toInertiaProps(): array
    {
        return $this->toLaraviltProps($this->data);
    }

    /**
     * Serialize to Laravilt props with evaluation context.
     */
    public function toLaraviltProps(array &$data = [], mixed $record = null, ?string $changedField = null): array
    {
        // Execute afterStateUpdated callbacks if a field changed
        if ($changedField && array_key_exists($changedField, $data)) {
            $this->executeAfterStateUpdatedCallbacks($this->schema, $changedField, $data[$changedField], $data, $record);
        }

        // Set evaluation context on all components recursively
        $this->setEvaluationContextRecursive($this->schema, $data, $record);

        return array_merge(parent::toLaraviltProps(), [
            'gridColumns' => $this->getGridColumns(),
            'schema' => array_map(
                function ($item): array {
                    // Support both Components and Actions
                    if (method_exists($item, 'toLaraviltProps')) {
                        return $item->toLaraviltProps();
                    }
                    if (method_exists($item, 'toArray')) {
                        return $item->toArray();
                    }

                    return [];
                },
                $this->getVisibleComponents()
            ),
        ]);
    }

    /**
     * Recursively set evaluation context on all components.
     */
    protected function setEvaluationContextRecursive(array $components, array $data, mixed $record): void
    {
        foreach ($components as $component) {
            // Set evaluation context if component supports it
            if (method_exists($component, 'evaluationContext')) {
                $component->evaluationContext($data, $record);
            }

            // Handle nested schemas (Sections, Grids, Tabs, etc.)
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $this->setEvaluationContextRecursive($nestedSchema, $data, $record);
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $this->setEvaluationContextRecursive($tabSchema, $data, $record);
                            }
                        }
                    }
                }
            }
        }
    }

    /**
     * Extract validation rules from all components in the schema.
     *
     * @return array<string, mixed> Array of field names => validation rules
     */
    public function getValidationRules(): array
    {
        return $this->extractValidationRulesFromComponents($this->schema);
    }

    /**
     * Extract validation messages from all components in the schema.
     *
     * @return array<string, string> Array of validation messages
     */
    public function getValidationMessages(): array
    {
        return $this->extractValidationMessagesFromComponents($this->schema);
    }

    /**
     * Extract validation attributes from all components in the schema.
     *
     * @return array<string, string> Array of validation attributes
     */
    public function getValidationAttributes(): array
    {
        return $this->extractValidationAttributesFromComponents($this->schema);
    }

    /**
     * Get field prefixes that should be prepended to values for validation.
     * This is used for URL fields with prefix text like "https://".
     *
     * @return array<string, string> Array of field names => prefix text
     */
    public function getFieldPrefixes(): array
    {
        return $this->extractFieldPrefixesFromComponents($this->schema);
    }

    /**
     * Recursively extract field prefixes from components.
     */
    protected function extractFieldPrefixesFromComponents(array $components): array
    {
        $prefixes = [];

        foreach ($components as $component) {
            // Skip actions
            if ($component instanceof \Laravilt\Actions\Action) {
                continue;
            }

            // Check if component has a prefix and is a URL type
            if (method_exists($component, 'getName') && method_exists($component, 'getPrefix') && method_exists($component, 'getType')) {
                $name = $component->getName();
                $prefix = $component->getPrefix();
                $type = $component->getType();

                // Only add prefix for URL fields (where prefix affects validation)
                if ($name && $prefix && $type === 'url') {
                    $prefixes[$name] = $prefix;
                }
            }

            // Handle nested schemas (Sections, Grids, etc.)
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $prefixes = array_merge($prefixes, $this->extractFieldPrefixesFromComponents($nestedSchema));
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $prefixes = array_merge($prefixes, $this->extractFieldPrefixesFromComponents($tabSchema));
                            }
                        }
                    }
                }
            }
        }

        return $prefixes;
    }

    /**
     * Recursively extract validation rules from components.
     */
    protected function extractValidationRulesFromComponents(array $components): array
    {
        $rules = [];

        foreach ($components as $component) {
            // Skip actions
            if ($component instanceof \Laravilt\Actions\Action) {
                continue;
            }

            // If component has validation rules
            if (method_exists($component, 'getName') && method_exists($component, 'getValidationRules')) {
                $name = $component->getName();
                $componentRules = $component->getValidationRules();

                if ($name && $componentRules) {
                    $rules[$name] = $componentRules;
                } elseif ($name && method_exists($component, 'isRequired') && $component->isRequired()) {
                    // Add 'required' if the field is marked as required but has no explicit rules
                    $rules[$name] = isset($rules[$name])
                        ? (is_array($rules[$name]) ? array_merge(['required'], $rules[$name]) : 'required|'.$rules[$name])
                        : 'required';
                }
            }

            // Handle nested schemas (Sections, Grids, etc.)
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $rules = array_merge($rules, $this->extractValidationRulesFromComponents($nestedSchema));
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $rules = array_merge($rules, $this->extractValidationRulesFromComponents($tabSchema));
                            }
                        }
                    }
                }
            }
        }

        return $rules;
    }

    /**
     * Recursively extract validation messages from components.
     */
    protected function extractValidationMessagesFromComponents(array $components): array
    {
        $messages = [];

        foreach ($components as $component) {
            // Skip actions
            if ($component instanceof \Laravilt\Actions\Action) {
                continue;
            }

            // If component has validation messages
            if (method_exists($component, 'getValidationMessages')) {
                $componentMessages = $component->getValidationMessages();
                if ($componentMessages) {
                    $messages = array_merge($messages, $componentMessages);
                }
            }

            // Handle nested schemas
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $messages = array_merge($messages, $this->extractValidationMessagesFromComponents($nestedSchema));
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $messages = array_merge($messages, $this->extractValidationMessagesFromComponents($tabSchema));
                            }
                        }
                    }
                }
            }
        }

        return $messages;
    }

    /**
     * Recursively extract validation attributes from components.
     */
    protected function extractValidationAttributesFromComponents(array $components): array
    {
        $attributes = [];

        foreach ($components as $component) {
            // Skip actions
            if ($component instanceof \Laravilt\Actions\Action) {
                continue;
            }

            // If component has a name and label, use the label as the attribute
            if (method_exists($component, 'getName') && method_exists($component, 'getLabel')) {
                $name = $component->getName();
                $label = $component->getLabel();
                if ($name && $label) {
                    $attributes[$name] = $label;
                }
            }

            // Handle nested schemas
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $attributes = array_merge($attributes, $this->extractValidationAttributesFromComponents($nestedSchema));
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $attributes = array_merge($attributes, $this->extractValidationAttributesFromComponents($tabSchema));
                            }
                        }
                    }
                }
            }
        }

        return $attributes;
    }

    /**
     * Execute afterStateUpdated callbacks for a changed field.
     */
    protected function executeAfterStateUpdatedCallbacks(array $components, string $changedField, mixed $value, array &$data, mixed $record): void
    {
        \Log::info('[Schema] executeAfterStateUpdatedCallbacks called', [
            'changedField' => $changedField,
            'value' => $value,
            'componentCount' => count($components),
        ]);

        $set = new \Laravilt\Support\Utilities\Set($data);

        foreach ($components as $component) {
            // Check if this component is the one that changed
            if (method_exists($component, 'getName') && $component->getName() === $changedField) {
                \Log::info('[Schema] Found matching component', [
                    'componentName' => $component->getName(),
                    'hasGetAfterStateUpdated' => method_exists($component, 'getAfterStateUpdated'),
                ]);

                // Check if it has an afterStateUpdated callback
                if (method_exists($component, 'getAfterStateUpdated')) {
                    $callback = $component->getAfterStateUpdated();
                    \Log::info('[Schema] afterStateUpdated callback', [
                        'isClosure' => $callback instanceof \Closure,
                        'callbackType' => gettype($callback),
                    ]);

                    if ($callback instanceof \Closure) {
                        \Log::info('[Schema] Executing afterStateUpdated callback for field: '.$changedField);
                        // Execute the callback with dependency injection
                        $get = new \Laravilt\Support\Utilities\Get($data);
                        app()->call($callback, [
                            'value' => $value,
                            'get' => $get,
                            'set' => $set,
                            'data' => $data,
                            'record' => $record,
                        ]);
                        \Log::info('[Schema] afterStateUpdated callback executed, data after:', $data);
                    }
                }
            }

            // Handle nested schemas
            if (method_exists($component, 'getSchema')) {
                $nestedSchema = $component->getSchema();
                if (is_array($nestedSchema)) {
                    $this->executeAfterStateUpdatedCallbacks($nestedSchema, $changedField, $value, $data, $record);
                }
            }

            // Handle tabs
            if (method_exists($component, 'getTabs')) {
                $tabs = $component->getTabs();
                if (is_array($tabs)) {
                    foreach ($tabs as $tab) {
                        if (method_exists($tab, 'getSchema')) {
                            $tabSchema = $tab->getSchema();
                            if (is_array($tabSchema)) {
                                $this->executeAfterStateUpdatedCallbacks($tabSchema, $changedField, $value, $data, $record);
                            }
                        }
                    }
                }
            }
        }
    }
}
</file>

<file path="composer.json">
{
    "name": "laravilt/schemas",
    "description": "Complete schema system with sections, tabs, grids, and layout components. Organize form fields and information displays with powerful layout components supporting collapsible sections, responsive grids, and nested schemas.",
    "version": "1.0.3",
    "type": "library",
    "license": "MIT",
    "keywords": [
        "laravel",
        "laravilt",
        "schemas",
        "sections",
        "tabs",
        "grids",
        "layouts",
        "organization",
        "inertia",
        "vue"
    ],
    "authors": [
        {
            "name": "Fady Mondy",
            "email": "info@3x1.io"
        }
    ],
    "require": {
        "php": "^8.3|^8.4",
        "spatie/laravel-package-tools": "^1.14",
        "laravilt/support": "^1.0"
    },
    "require-dev": {
        "larastan/larastan": "^2.9||^3.0",
        "laravel/pint": "^1.14",
        "nunomaduro/collision": "^8.1.1||^7.10.0",
        "orchestra/testbench": "^10.0",
        "pestphp/pest": "^3.0",
        "pestphp/pest-plugin-arch": "^3.0",
        "pestphp/pest-plugin-laravel": "^3.0",
        "pestphp/pest-plugin-livewire": "^3.0",
        "pestphp/pest-plugin-type-coverage": "^3.5",
        "phpstan/extension-installer": "^1.3||^2.0",
        "phpstan/phpstan-deprecation-rules": "^1.1||^2.0",
        "phpstan/phpstan-phpunit": "^1.3||^2.0"
    },
    "autoload": {
        "psr-4": {
            "Laravilt\\Schemas\\": "src/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Laravilt\\Schemas\\Tests\\": "tests/",
            "Laravilt\\Schemas\\Tests\\Database\\Factories\\": "tests/database/factories",
            "Laravilt\\Schemas\\Tests\\Database\\Seeders\\": "tests/database/seeders"
        }
    },
    "scripts": {
        "testbench": "vendor/bin/testbench package:discover --ansi",
        "db": "vendor/bin/testbench package:create-sqlite-db && vendor/bin/testbench migrate",
        "analyse": "vendor/bin/phpstan analyse --memory-limit=512M",
        "test": "vendor/bin/pest",
        "test-coverage": "vendor/bin/pest --coverage",
        "format": "vendor/bin/pint"
    },
    "config": {
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "phpstan/extension-installer": true
        }
    },
    "extra": {
        "laravel": {
            "providers": [
                "Laravilt\\Schemas\\SchemasServiceProvider"
            ]
        }
    },
    "prefer-stable": true
}
</file>

<file path="package.json">
{
    "name": "@laravilt/schemas",
    "version": "1.0.3",
    "description": "Complete schema system with layout components for forms, tables, and pages. Build structured layouts with sections, tabs, grids, and columns for organizing UI components.",
    "author": "Fady Mondy <info@3x1.io>",
    "license": "MIT",
    "type": "module",
    "main": "./dist/schemas.umd.js",
    "module": "./dist/schemas.es.js",
    "types": "./dist/index.d.ts",
    "exports": {
        ".": {
            "types": "./dist/index.d.ts",
            "import": "./dist/schemas.es.js",
            "require": "./dist/schemas.umd.js"
        },
        "./style.css": "./dist/style.css"
    },
    "files": [
        "dist",
        "resources"
    ],
    "keywords": [
        "laravilt",
        "schemas",
        "layouts",
        "vue",
        "vue3",
        "sections",
        "tabs",
        "grids",
        "inertia",
        "laravel"
    ],
    "repository": {
        "type": "git",
        "url": "https://github.com/laravilt/schemas"
    },
    "bugs": {
        "url": "https://github.com/laravilt/schemas/issues"
    },
    "homepage": "https://laravilt.dev/schemas",
    "scripts": {
        "dev": "vite",
        "build": "vite build",
        "build:types": "vue-tsc --declaration --emitDeclarationOnly --outDir dist resources/js/app.ts || true",
        "build:npm": "npm run build",
        "prepublishOnly": "npm run build:npm",
        "format": "prettier --write resources/",
        "format:check": "prettier --check resources/",
        "lint": "eslint . --fix"
    },
    "peerDependencies": {
        "vue": "^3.3.0"
    },
    "devDependencies": {
        "@eslint/js": "^9.19.0",
        "@tailwindcss/vite": "^4.1.11",
        "@types/node": "^22.13.5",
        "@vitejs/plugin-vue": "^6.0.0",
        "@vue/eslint-config-typescript": "^14.3.0",
        "@vueuse/core": "^14.1.0",
        "class-variance-authority": "^0.7.1",
        "clsx": "^2.1.1",
        "eslint": "^9.17.0",
        "eslint-config-prettier": "^10.0.1",
        "eslint-plugin-vue": "^9.32.0",
        "lucide-vue-next": "^0.555.0",
        "prettier": "^3.4.2",
        "prettier-plugin-organize-imports": "^4.1.0",
        "prettier-plugin-tailwindcss": "^0.6.11",
        "radix-vue": "^1.9.17",
        "reka-ui": "^2.6.1",
        "tailwind-merge": "^3.4.0",
        "typescript": "^5.2.2",
        "typescript-eslint": "^8.23.0",
        "vite": "^7.0.4",
        "vue": "^3.5.13",
        "vue-tsc": "^2.2.4"
    },
    "dependencies": {
        "tailwindcss": "^4.1.1"
    }
}
</file>

</files>
